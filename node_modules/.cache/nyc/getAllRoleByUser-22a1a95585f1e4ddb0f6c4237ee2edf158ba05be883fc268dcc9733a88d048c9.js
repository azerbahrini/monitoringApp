function cov_h0caxp7gp(){var path="/home/azer/Desktop/jenkins/app/monitoringApp/services/role/getAllRoleByUser.js";var hash="ea521dea18ce4e2e3d3fc1e5f50975b447323f82";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/azer/Desktop/jenkins/app/monitoringApp/services/role/getAllRoleByUser.js",statementMap:{"0":{start:{line:1,column:14},end:{line:1,column:43}},"1":{start:{line:3,column:0},end:{line:26,column:2}},"2":{start:{line:4,column:2},end:{line:25,column:3}},"3":{start:{line:5,column:17},end:{line:16,column:13}},"4":{start:{line:17,column:22},end:{line:20,column:8}},"5":{start:{line:18,column:0},end:{line:18,column:17}},"6":{start:{line:21,column:28},end:{line:21,column:117}},"7":{start:{line:22,column:4},end:{line:22,column:54}},"8":{start:{line:24,column:4},end:{line:24,column:36}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:3,column:17},end:{line:3,column:18}},loc:{start:{line:3,column:48},end:{line:26,column:1}},line:3},"1":{name:"(anonymous_1)",decl:{start:{line:17,column:31},end:{line:17,column:32}},loc:{start:{line:17,column:39},end:{line:20,column:7}},line:17}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},f:{"0":0,"1":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ea521dea18ce4e2e3d3fc1e5f50975b447323f82"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_h0caxp7gp=function(){return actualCoverage;};}return actualCoverage;}cov_h0caxp7gp();const Shift=(cov_h0caxp7gp().s[0]++,require("../../models/Shift"));cov_h0caxp7gp().s[1]++;module.exports=async(userId,date,type)=>{cov_h0caxp7gp().f[0]++;cov_h0caxp7gp().s[2]++;try{const Role=(cov_h0caxp7gp().s[3]++,await Shift.find({user:userId,type:type,$and:[{startDate:{$lte:date},endDate:{$gte:date}}]},{role:1,_id:0,user:1/*, startDate : 1, endDate : 1 , type:1 */}).populate({path:"role",select:{label:1}}).distinct("role").lean().exec());const objRole=(cov_h0caxp7gp().s[4]++,Role.map(role=>{cov_h0caxp7gp().f[1]++;cov_h0caxp7gp().s[5]++;return{role:role};}));const rolePopulated=(cov_h0caxp7gp().s[6]++,await Shift.populate(objRole,{path:"role",model:"role",select:["label","_id"]}));cov_h0caxp7gp().s[7]++;return{data:rolePopulated,status:"success"};}catch(err){cov_h0caxp7gp().s[8]++;return{err,status:"error"};}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldEFsbFJvbGVCeVVzZXIuanMiXSwibmFtZXMiOlsiU2hpZnQiLCJyZXF1aXJlIiwibW9kdWxlIiwiZXhwb3J0cyIsInVzZXJJZCIsImRhdGUiLCJ0eXBlIiwiUm9sZSIsImZpbmQiLCJ1c2VyIiwiJGFuZCIsInN0YXJ0RGF0ZSIsIiRsdGUiLCJlbmREYXRlIiwiJGd0ZSIsInJvbGUiLCJfaWQiLCJwb3B1bGF0ZSIsInBhdGgiLCJzZWxlY3QiLCJsYWJlbCIsImRpc3RpbmN0IiwibGVhbiIsImV4ZWMiLCJvYmpSb2xlIiwibWFwIiwicm9sZVBvcHVsYXRlZCIsIm1vZGVsIiwiZGF0YSIsInN0YXR1cyIsImVyciJdLCJtYXBwaW5ncyI6InU5Q0FlWTt5RkFmWixLQUFNQSxDQUFBQSxLQUFLLHlCQUFHQyxPQUFPLENBQUMsb0JBQUQsQ0FBVixDQUFYLEMsdUJBRUFDLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixNQUFPQyxNQUFQLENBQWVDLElBQWYsQ0FBc0JDLElBQXRCLEdBQStCLCtDQUM5QyxHQUFJLENBQ0YsS0FBTUMsQ0FBQUEsSUFBSSx5QkFBRyxLQUFNUCxDQUFBQSxLQUFLLENBQUNRLElBQU4sQ0FDakIsQ0FDRUMsSUFBSSxDQUFFTCxNQURSLENBRUVFLElBQUksQ0FBRUEsSUFGUixDQUdFSSxJQUFJLENBQUUsQ0FBQyxDQUFFQyxTQUFTLENBQUUsQ0FBRUMsSUFBSSxDQUFFUCxJQUFSLENBQWIsQ0FBNkJRLE9BQU8sQ0FBRSxDQUFFQyxJQUFJLENBQUVULElBQVIsQ0FBdEMsQ0FBRCxDQUhSLENBRGlCLENBTWpCLENBQUVVLElBQUksQ0FBRSxDQUFSLENBQVdDLEdBQUcsQ0FBRSxDQUFoQixDQUFvQlAsSUFBSSxDQUFFLENBQUUsMENBQTVCLENBTmlCLEVBUWhCUSxRQVJnQixDQVFQLENBQUVDLElBQUksQ0FBRSxNQUFSLENBQWdCQyxNQUFNLENBQUUsQ0FBRUMsS0FBSyxDQUFFLENBQVQsQ0FBeEIsQ0FSTyxFQVNoQkMsUUFUZ0IsQ0FTUCxNQVRPLEVBVWhCQyxJQVZnQixHQVdoQkMsSUFYZ0IsRUFBVCxDQUFWLENBWUUsS0FBTUMsQ0FBQUEsT0FBTyx5QkFBR2pCLElBQUksQ0FBQ2tCLEdBQUwsQ0FBU1YsSUFBSSxFQUFJLCtDQUN2QyxNQUFNLENBQUNBLElBQUksQ0FBQ0EsSUFBTixDQUFOLENBRU8sQ0FIZSxDQUFILENBQWIsQ0FJQSxLQUFNVyxDQUFBQSxhQUFhLHlCQUFHLEtBQU0xQixDQUFBQSxLQUFLLENBQUNpQixRQUFOLENBQWVPLE9BQWYsQ0FBeUIsQ0FBRU4sSUFBSSxDQUFFLE1BQVIsQ0FBZVMsS0FBSyxDQUFHLE1BQXZCLENBQWdDUixNQUFNLENBQUcsQ0FBQyxPQUFELENBQVMsS0FBVCxDQUF6QyxDQUF6QixDQUFULENBQW5CLENBakJBLHVCQWtCRixNQUFPLENBQUVTLElBQUksQ0FBRUYsYUFBUixDQUF1QkcsTUFBTSxDQUFFLFNBQS9CLENBQVAsQ0FDRCxDQUFDLE1BQU9DLEdBQVAsQ0FBWSx3QkFDWixNQUFPLENBQUVBLEdBQUYsQ0FBT0QsTUFBTSxDQUFFLE9BQWYsQ0FBUCxDQUNELENBQ0YsQ0F2QkQiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBTaGlmdCA9IHJlcXVpcmUoXCIuLi8uLi9tb2RlbHMvU2hpZnRcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gYXN5bmMgKHVzZXJJZCwgZGF0ZSAsIHR5cGUpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBSb2xlID0gYXdhaXQgU2hpZnQuZmluZChcbiAgICAgIHtcbiAgICAgICAgdXNlcjogdXNlcklkLFxuICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAkYW5kOiBbeyBzdGFydERhdGU6IHsgJGx0ZTogZGF0ZSB9LCBlbmREYXRlOiB7ICRndGU6IGRhdGUgfSB9XSxcbiAgICAgIH0sXG4gICAgICB7IHJvbGU6IDEsIF9pZDogMCAsIHVzZXIgOjEgLyosIHN0YXJ0RGF0ZSA6IDEsIGVuZERhdGUgOiAxICwgdHlwZToxICovIH1cbiAgICApXG4gICAgICAucG9wdWxhdGUoeyBwYXRoOiBcInJvbGVcIiwgc2VsZWN0OiB7IGxhYmVsOiAxIH0gfSlcbiAgICAgIC5kaXN0aW5jdChcInJvbGVcIilcbiAgICAgIC5sZWFuKClcbiAgICAgIC5leGVjKCk7XG4gICAgICBjb25zdCBvYmpSb2xlID0gUm9sZS5tYXAocm9sZSA9PiB7XG5yZXR1cm57cm9sZTpyb2xlfVxuXG4gICAgICB9KVxuICAgICAgY29uc3Qgcm9sZVBvcHVsYXRlZCA9IGF3YWl0IFNoaWZ0LnBvcHVsYXRlKG9ialJvbGUgLCB7IHBhdGg6IFwicm9sZVwiLG1vZGVsIDogXCJyb2xlXCIgLCBzZWxlY3QgOiBbXCJsYWJlbFwiLFwiX2lkXCJdfSlcbiAgICByZXR1cm4geyBkYXRhOiByb2xlUG9wdWxhdGVkLCBzdGF0dXM6IFwic3VjY2Vzc1wiIH07XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiB7IGVyciwgc3RhdHVzOiBcImVycm9yXCIgfTtcbiAgfVxufTtcbiJdfQ==