function cov_2aqjg4g0uk(){var path="/home/azer/Desktop/jenkins/app/monitoringApp/controllers/category.controller.js";var hash="c6bcf59e8aef043283ddae6cac72d3dee2bbf32f";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/azer/Desktop/jenkins/app/monitoringApp/controllers/category.controller.js",statementMap:{"0":{start:{line:1,column:17},end:{line:1,column:46}},"1":{start:{line:2,column:24},end:{line:2,column:55}},"2":{start:{line:5,column:0},end:{line:11,column:2}},"3":{start:{line:6,column:17},end:{line:6,column:60}},"4":{start:{line:7,column:2},end:{line:8,column:55}},"5":{start:{line:8,column:4},end:{line:8,column:55}},"6":{start:{line:9,column:2},end:{line:10,column:65}},"7":{start:{line:10,column:4},end:{line:10,column:65}},"8":{start:{line:14,column:0},end:{line:34,column:2}},"9":{start:{line:15,column:13},end:{line:15,column:27}},"10":{start:{line:16,column:13},end:{line:16,column:27}},"11":{start:{line:17,column:17},end:{line:17,column:36}},"12":{start:{line:18,column:27},end:{line:18,column:29}},"13":{start:{line:19,column:20},end:{line:19,column:41}},"14":{start:{line:20,column:2},end:{line:22,column:3}},"15":{start:{line:21,column:4},end:{line:21,column:46}},"16":{start:{line:23,column:17},end:{line:28,column:3}},"17":{start:{line:30,column:2},end:{line:31,column:55}},"18":{start:{line:31,column:4},end:{line:31,column:55}},"19":{start:{line:32,column:2},end:{line:33,column:58}},"20":{start:{line:33,column:4},end:{line:33,column:58}},"21":{start:{line:37,column:0},end:{line:44,column:2}},"22":{start:{line:38,column:17},end:{line:38,column:69}},"23":{start:{line:40,column:2},end:{line:41,column:55}},"24":{start:{line:41,column:4},end:{line:41,column:55}},"25":{start:{line:42,column:2},end:{line:43,column:58}},"26":{start:{line:43,column:4},end:{line:43,column:58}},"27":{start:{line:46,column:0},end:{line:61,column:2}},"28":{start:{line:47,column:17},end:{line:49,column:3}},"29":{start:{line:51,column:22},end:{line:54,column:3}},"30":{start:{line:55,column:2},end:{line:56,column:60}},"31":{start:{line:56,column:4},end:{line:56,column:60}},"32":{start:{line:57,column:2},end:{line:60,column:50}},"33":{start:{line:58,column:4},end:{line:60,column:50}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:5,column:22},end:{line:5,column:23}},loc:{start:{line:5,column:48},end:{line:11,column:1}},line:5},"1":{name:"(anonymous_1)",decl:{start:{line:14,column:25},end:{line:14,column:26}},loc:{start:{line:14,column:51},end:{line:34,column:1}},line:14},"2":{name:"(anonymous_2)",decl:{start:{line:37,column:26},end:{line:37,column:27}},loc:{start:{line:37,column:52},end:{line:44,column:1}},line:37},"3":{name:"(anonymous_3)",decl:{start:{line:46,column:25},end:{line:46,column:26}},loc:{start:{line:46,column:55},end:{line:61,column:1}},line:46}},branchMap:{"0":{loc:{start:{line:7,column:2},end:{line:8,column:55}},type:"if",locations:[{start:{line:7,column:2},end:{line:8,column:55}},{start:{line:7,column:2},end:{line:8,column:55}}],line:7},"1":{loc:{start:{line:9,column:2},end:{line:10,column:65}},type:"if",locations:[{start:{line:9,column:2},end:{line:10,column:65}},{start:{line:9,column:2},end:{line:10,column:65}}],line:9},"2":{loc:{start:{line:20,column:2},end:{line:22,column:3}},type:"if",locations:[{start:{line:20,column:2},end:{line:22,column:3}},{start:{line:20,column:2},end:{line:22,column:3}}],line:20},"3":{loc:{start:{line:30,column:2},end:{line:31,column:55}},type:"if",locations:[{start:{line:30,column:2},end:{line:31,column:55}},{start:{line:30,column:2},end:{line:31,column:55}}],line:30},"4":{loc:{start:{line:32,column:2},end:{line:33,column:58}},type:"if",locations:[{start:{line:32,column:2},end:{line:33,column:58}},{start:{line:32,column:2},end:{line:33,column:58}}],line:32},"5":{loc:{start:{line:40,column:2},end:{line:41,column:55}},type:"if",locations:[{start:{line:40,column:2},end:{line:41,column:55}},{start:{line:40,column:2},end:{line:41,column:55}}],line:40},"6":{loc:{start:{line:42,column:2},end:{line:43,column:58}},type:"if",locations:[{start:{line:42,column:2},end:{line:43,column:58}},{start:{line:42,column:2},end:{line:43,column:58}}],line:42},"7":{loc:{start:{line:55,column:2},end:{line:56,column:60}},type:"if",locations:[{start:{line:55,column:2},end:{line:56,column:60}},{start:{line:55,column:2},end:{line:56,column:60}}],line:55},"8":{loc:{start:{line:57,column:2},end:{line:60,column:50}},type:"if",locations:[{start:{line:57,column:2},end:{line:60,column:50}},{start:{line:57,column:2},end:{line:60,column:50}}],line:57},"9":{loc:{start:{line:59,column:14},end:{line:59,column:67}},type:"cond-expr",locations:[{start:{line:59,column:39},end:{line:59,column:61}},{start:{line:59,column:64},end:{line:59,column:67}}],line:59}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c6bcf59e8aef043283ddae6cac72d3dee2bbf32f"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2aqjg4g0uk=function(){return actualCoverage;};}return actualCoverage;}cov_2aqjg4g0uk();const Category=(cov_2aqjg4g0uk().s[0]++,require("../models/Category"));const categoryService=(cov_2aqjg4g0uk().s[1]++,require("../services/category"));//Add Category
cov_2aqjg4g0uk().s[2]++;exports.addCategory=async function(req,res){cov_2aqjg4g0uk().f[0]++;const result=(cov_2aqjg4g0uk().s[3]++,await categoryService.addCategory(req.body));cov_2aqjg4g0uk().s[4]++;if(result.status=="success"){cov_2aqjg4g0uk().b[0][0]++;cov_2aqjg4g0uk().s[5]++;return res.status(201).json({data:result.data});}else{cov_2aqjg4g0uk().b[0][1]++;}cov_2aqjg4g0uk().s[6]++;if(result.status=="error"){cov_2aqjg4g0uk().b[1][0]++;cov_2aqjg4g0uk().s[7]++;return res.status(400).json({message:result.err.message});}else{cov_2aqjg4g0uk().b[1][1]++;}};//Get All Category
cov_2aqjg4g0uk().s[8]++;exports.getAllCategory=async function(req,res){cov_2aqjg4g0uk().f[1]++;let page=(cov_2aqjg4g0uk().s[9]++,req.query.page);let size=(cov_2aqjg4g0uk().s[10]++,req.query.size);let isActive=(cov_2aqjg4g0uk().s[11]++,req.query?.isActive);let activeFilterObject=(cov_2aqjg4g0uk().s[12]++,{});let searchValue=(cov_2aqjg4g0uk().s[13]++,req.query.searchValue);cov_2aqjg4g0uk().s[14]++;if(typeof isActive!=='undefined'){cov_2aqjg4g0uk().b[2][0]++;cov_2aqjg4g0uk().s[15]++;activeFilterObject={isActive:isActive};}else{cov_2aqjg4g0uk().b[2][1]++;}const result=(cov_2aqjg4g0uk().s[16]++,await categoryService.getAllCategoriesService(page,size,activeFilterObject,searchValue));cov_2aqjg4g0uk().s[17]++;if(result.status=="success"){cov_2aqjg4g0uk().b[3][0]++;cov_2aqjg4g0uk().s[18]++;return res.status(200).json({data:result.data});}else{cov_2aqjg4g0uk().b[3][1]++;}cov_2aqjg4g0uk().s[19]++;if(result.status=="error"){cov_2aqjg4g0uk().b[4][0]++;cov_2aqjg4g0uk().s[20]++;res.status(400).json({message:result.err.message});}else{cov_2aqjg4g0uk().b[4][1]++;}};//Get category by Id
cov_2aqjg4g0uk().s[21]++;exports.getCategoryById=async function(req,res){cov_2aqjg4g0uk().f[2]++;const result=(cov_2aqjg4g0uk().s[22]++,await categoryService.getCategoryById(req.params.id));cov_2aqjg4g0uk().s[23]++;if(result.status=="success"){cov_2aqjg4g0uk().b[5][0]++;cov_2aqjg4g0uk().s[24]++;return res.status(200).json({data:result.data});}else{cov_2aqjg4g0uk().b[5][1]++;}cov_2aqjg4g0uk().s[25]++;if(result.status=="error"){cov_2aqjg4g0uk().b[6][0]++;cov_2aqjg4g0uk().s[26]++;res.status(400).json({message:result.err.message});}else{cov_2aqjg4g0uk().b[6][1]++;}};cov_2aqjg4g0uk().s[27]++;exports.updateCategory=async function(request,res){cov_2aqjg4g0uk().f[3]++;const filter=(cov_2aqjg4g0uk().s[28]++,{_id:request.params.id});const updateCateg=(cov_2aqjg4g0uk().s[29]++,await categoryService.updateCategory(filter,request.body));cov_2aqjg4g0uk().s[30]++;if(updateCateg.status=="success"){cov_2aqjg4g0uk().b[7][0]++;cov_2aqjg4g0uk().s[31]++;return res.status(201).json({data:updateCateg.data});}else{cov_2aqjg4g0uk().b[7][1]++;}cov_2aqjg4g0uk().s[32]++;if(updateCateg.status=="error"){cov_2aqjg4g0uk().b[8][0]++;cov_2aqjg4g0uk().s[33]++;return res.status(updateCateg.statusCode?(cov_2aqjg4g0uk().b[9][0]++,updateCateg.statusCode):(cov_2aqjg4g0uk().b[9][1]++,400)).json({message:updateCateg.err.message});}else{cov_2aqjg4g0uk().b[8][1]++;}};//exports.updateSystemCategory = async function (request, response) {
// const token = request.header("x-auth-token");
// const id = request.params.id;
//  const category = request.body.category;
/*if (!token) {
    return response.sendStatus(401);
  }
*/ // validate request data
// `active` boolean is not asserted, because it will always contain a value
/* if (!category || !id) {
    return response.sendStatus(400);
  }

  const filter = {
    _id: request.params.id,
  };

  try {
    const categoryDocument = await Category.findOneAndUpdate(
      filter,
      request.body
    );

    if (!categoryDocument) {
      return response.sendStatus(404);
    }

    const updatedCategoryDocument = await Category.findOne(filter);

    response.status(201).json({ data: updatedCategoryDocument });
  } catch (e) {
    return response.sendStatus(501);
  }
};
 */
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhdGVnb3J5LmNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiQ2F0ZWdvcnkiLCJyZXF1aXJlIiwiY2F0ZWdvcnlTZXJ2aWNlIiwiZXhwb3J0cyIsImFkZENhdGVnb3J5IiwicmVxIiwicmVzIiwicmVzdWx0IiwiYm9keSIsInN0YXR1cyIsImpzb24iLCJkYXRhIiwibWVzc2FnZSIsImVyciIsImdldEFsbENhdGVnb3J5IiwicGFnZSIsInF1ZXJ5Iiwic2l6ZSIsImlzQWN0aXZlIiwiYWN0aXZlRmlsdGVyT2JqZWN0Iiwic2VhcmNoVmFsdWUiLCJnZXRBbGxDYXRlZ29yaWVzU2VydmljZSIsImdldENhdGVnb3J5QnlJZCIsInBhcmFtcyIsImlkIiwidXBkYXRlQ2F0ZWdvcnkiLCJyZXF1ZXN0IiwiZmlsdGVyIiwiX2lkIiwidXBkYXRlQ2F0ZWciLCJzdGF0dXNDb2RlIl0sIm1hcHBpbmdzIjoib3hLQWVZOzJGQWZaLEtBQU1BLENBQUFBLFFBQVEsMEJBQUdDLE9BQU8sQ0FBQyxvQkFBRCxDQUFWLENBQWQsQ0FDQSxLQUFNQyxDQUFBQSxlQUFlLDBCQUFHRCxPQUFPLENBQUMsc0JBQUQsQ0FBVixDQUFyQixDQUVBO3dCQUNBRSxPQUFPLENBQUNDLFdBQVIsQ0FBc0IsZUFBZ0JDLEdBQWhCLENBQXFCQyxHQUFyQixDQUEwQix5QkFDOUMsS0FBTUMsQ0FBQUEsTUFBTSwwQkFBRyxLQUFNTCxDQUFBQSxlQUFlLENBQUNFLFdBQWhCLENBQTRCQyxHQUFHLENBQUNHLElBQWhDLENBQVQsQ0FBWixDQUQ4Qyx3QkFFOUMsR0FBSUQsTUFBTSxDQUFDRSxNQUFQLEVBQWlCLFNBQXJCLENBQ0UsMERBQU9ILENBQUFBLEdBQUcsQ0FBQ0csTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLENBQUVDLElBQUksQ0FBRUosTUFBTSxDQUFDSSxJQUFmLENBQXJCLENBQVAsQ0FBbUQsQ0FEckQsaUNBRjhDLHdCQUk5QyxHQUFJSixNQUFNLENBQUNFLE1BQVAsRUFBaUIs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ZSxDQUFDdUIsY0FBaEIsQ0FDeEJFLE1BRHdCLENBRXhCRCxPQUFPLENBQUNsQixJQUZnQixDQUFULENBQWpCLENBTHFELHlCQVNyRCxHQUFJcUIsV0FBVyxDQUFDcEIsTUFBWixFQUFzQixTQUExQixDQUNFLDJEQUFPSCxDQUFBQSxHQUFHLENBQUNHLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQixDQUFFQyxJQUFJLENBQUVrQixXQUFXLENBQUNsQixJQUFwQixDQUFyQixDQUFQLENBQXdELENBRDFELGlDQVRxRCx5QkFXckQsR0FBSWtCLFdBQVcsQ0FBQ3BCLE1BQVosRUFBc0IsT0FBMUIsQ0FDRSwyREFBT0gsQ0FBQUEsR0FBRyxDQUNQRyxNQURJLENBQ0dvQixXQUFXLENBQUNDLFVBQVosNkJBQXlCRCxXQUFXLENBQUNDLFVBQXJDLDhCQUFrRCxHQUFsRCxDQURILEVBRUpwQixJQUZJLENBRUMsQ0FBRUUsT0FBTyxDQUFFaUIsV0FBVyxDQUFDaEIsR0FBWixDQUFnQkQsT0FBM0IsQ0FGRCxDQUFQLENBRThDLENBSGhELGlDQUlELENBZkQsQ0FpQkE7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFLENBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBDYXRlZ29yeSA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvQ2F0ZWdvcnlcIik7XG5jb25zdCBjYXRlZ29yeVNlcnZpY2UgPSByZXF1aXJlKFwiLi4vc2VydmljZXMvY2F0ZWdvcnlcIik7XG5cbi8vQWRkIENhdGVnb3J5XG5leHBvcnRzLmFkZENhdGVnb3J5ID0gYXN5bmMgZnVuY3Rpb24gKHJlcSwgcmVzKSB7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNhdGVnb3J5U2VydmljZS5hZGRDYXRlZ29yeShyZXEuYm9keSk7XG4gIGlmIChyZXN1bHQuc3RhdHVzID09IFwic3VjY2Vzc1wiKVxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbih7IGRhdGE6IHJlc3VsdC5kYXRhIH0pO1xuICBpZiAocmVzdWx0LnN0YXR1cyA9PSBcImVycm9yXCIpXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogcmVzdWx0LmVyci5tZXNzYWdlIH0pO1xufTtcblxuLy9HZXQgQWxsIENhdGVnb3J5XG5leHBvcnRzLmdldEFsbENhdGVnb3J5ID0gYXN5bmMgZnVuY3Rpb24gKHJlcSwgcmVzKSB7XG4gIGxldCBwYWdlID0gcmVxLnF1ZXJ5LnBhZ2U7XG4gIGxldCBzaXplID0gcmVxLnF1ZXJ5LnNpemU7XG4gIGxldCBpc0FjdGl2ZSA9IHJlcS5xdWVyeT8uaXNBY3RpdmU7XG4gIGxldCBhY3RpdmVGaWx0ZXJPYmplY3QgPSB7fVxuICBsZXQgc2VhcmNoVmFsdWUgPSByZXEucXVlcnkuc2VhcmNoVmFsdWVcbiAgaWYodHlwZW9mIGlzQWN0aXZlICE9PSAndW5kZWZpbmVkJykge1xuICAgIGFjdGl2ZUZpbHRlck9iamVjdCA9IHtpc0FjdGl2ZTogaXNBY3RpdmV9O1xuICB9XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNhdGVnb3J5U2VydmljZS5nZXRBbGxDYXRlZ29yaWVzU2VydmljZShcbiAgICBwYWdlLFxuICAgIHNpemUsXG4gICAgYWN0aXZlRmlsdGVyT2JqZWN0LFxuICAgIHNlYXJjaFZhbHVlXG4gICk7XG5cbiAgaWYgKHJlc3VsdC5zdGF0dXMgPT0gXCJzdWNjZXNzXCIpXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgZGF0YTogcmVzdWx0LmRhdGEgfSk7XG4gIGlmIChyZXN1bHQuc3RhdHVzID09IFwiZXJyb3JcIilcbiAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6IHJlc3VsdC5lcnIubWVzc2FnZSB9KTtcbn07XG5cbi8vR2V0IGNhdGVnb3J5IGJ5IElkXG5leHBvcnRzLmdldENhdGVnb3J5QnlJZCA9IGFzeW5jIGZ1bmN0aW9uIChyZXEsIHJlcykge1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBjYXRlZ29yeVNlcnZpY2UuZ2V0Q2F0ZWdvcnlCeUlkKHJlcS5wYXJhbXMuaWQpO1xuXG4gIGlmIChyZXN1bHQuc3RhdHVzID09IFwic3VjY2Vzc1wiKVxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IGRhdGE6IHJlc3VsdC5kYXRhIH0pO1xuICBpZiAocmVzdWx0LnN0YXR1cyA9PSBcImVycm9yXCIpXG4gICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiByZXN1bHQuZXJyLm1lc3NhZ2UgfSk7XG59O1xuXG5leHBvcnRzLnVwZGF0ZUNhdGVnb3J5ID0gYXN5bmMgZnVuY3Rpb24gKHJlcXVlc3QsIHJlcykge1xuICBjb25zdCBmaWx0ZXIgPSB7XG4gICAgX2lkOiByZXF1ZXN0LnBhcmFtcy5pZCxcbiAgfTtcblxuICBjb25zdCB1cGRhdGVDYXRlZyA9IGF3YWl0IGNhdGVnb3J5U2VydmljZS51cGRhdGVDYXRlZ29yeShcbiAgICBmaWx0ZXIsXG4gICAgcmVxdWVzdC5ib2R5XG4gICk7XG4gIGlmICh1cGRhdGVDYXRlZy5zdGF0dXMgPT0gXCJzdWNjZXNzXCIpXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgZGF0YTogdXBkYXRlQ2F0ZWcuZGF0YSB9KTtcbiAgaWYgKHVwZGF0ZUNhdGVnLnN0YXR1cyA9PSBcImVycm9yXCIpXG4gICAgcmV0dXJuIHJlc1xuICAgICAgLnN0YXR1cyh1cGRhdGVDYXRlZy5zdGF0dXNDb2RlID8gdXBkYXRlQ2F0ZWcuc3RhdHVzQ29kZSA6IDQwMClcbiAgICAgIC5qc29uKHsgbWVzc2FnZTogdXBkYXRlQ2F0ZWcuZXJyLm1lc3NhZ2UgfSk7XG59O1xuXG4vL2V4cG9ydHMudXBkYXRlU3lzdGVtQ2F0ZWdvcnkgPSBhc3luYyBmdW5jdGlvbiAocmVxdWVzdCwgcmVzcG9uc2UpIHtcbi8vIGNvbnN0IHRva2VuID0gcmVxdWVzdC5oZWFkZXIoXCJ4LWF1dGgtdG9rZW5cIik7XG5cbi8vIGNvbnN0IGlkID0gcmVxdWVzdC5wYXJhbXMuaWQ7XG5cbi8vICBjb25zdCBjYXRlZ29yeSA9IHJlcXVlc3QuYm9keS5jYXRlZ29yeTtcblxuLyppZiAoIXRva2VuKSB7XG4gICAgcmV0dXJuIHJlc3BvbnNlLnNlbmRTdGF0dXMoNDAxKTtcbiAgfVxuKi9cbi8vIHZhbGlkYXRlIHJlcXVlc3QgZGF0YVxuLy8gYGFjdGl2ZWAgYm9vbGVhbiBpcyBub3QgYXNzZXJ0ZWQsIGJlY2F1c2UgaXQgd2lsbCBhbHdheXMgY29udGFpbiBhIHZhbHVlXG4vKiBpZiAoIWNhdGVnb3J5IHx8ICFpZCkge1xuICAgIHJldHVybiByZXNwb25zZS5zZW5kU3RhdHVzKDQwMCk7XG4gIH1cblxuICBjb25zdCBmaWx0ZXIgPSB7XG4gICAgX2lkOiByZXF1ZXN0LnBhcmFtcy5pZCxcbiAgfTtcblxuICB0cnkge1xuICAgIGNvbnN0IGNhdGVnb3J5RG9jdW1lbnQgPSBhd2FpdCBDYXRlZ29yeS5maW5kT25lQW5kVXBkYXRlKFxuICAgICAgZmlsdGVyLFxuICAgICAgcmVxdWVzdC5ib2R5XG4gICAgKTtcblxuICAgIGlmICghY2F0ZWdvcnlEb2N1bWVudCkge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLnNlbmRTdGF0dXMoNDA0KTtcbiAgICB9XG5cbiAgICBjb25zdCB1cGRhdGVkQ2F0ZWdvcnlEb2N1bWVudCA9IGF3YWl0IENhdGVnb3J5LmZpbmRPbmUoZmlsdGVyKTtcblxuICAgIHJlc3BvbnNlLnN0YXR1cygyMDEpLmpzb24oeyBkYXRhOiB1cGRhdGVkQ2F0ZWdvcnlEb2N1bWVudCB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiByZXNwb25zZS5zZW5kU3RhdHVzKDUwMSk7XG4gIH1cbn07XG4gKi9cbiJdfQ==