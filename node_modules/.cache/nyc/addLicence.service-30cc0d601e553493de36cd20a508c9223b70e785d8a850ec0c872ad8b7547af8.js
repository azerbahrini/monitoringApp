function cov_o2s2fxx0q(){var path="/home/azer/Desktop/jenkins/app/monitoringApp/services/licence/addLicence.service.js";var hash="8a18c41f196805155b1b359c3e9cc3531e30814e";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/azer/Desktop/jenkins/app/monitoringApp/services/licence/addLicence.service.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:47}},"1":{start:{line:3,column:0},end:{line:25,column:2}},"2":{start:{line:4,column:2},end:{line:24,column:3}},"3":{start:{line:5,column:21},end:{line:5,column:116}},"4":{start:{line:6,column:4},end:{line:11,column:5}},"5":{start:{line:7,column:6},end:{line:10,column:8}},"6":{start:{line:13,column:28},end:{line:13,column:60}},"7":{start:{line:14,column:4},end:{line:19,column:5}},"8":{start:{line:15,column:6},end:{line:18,column:8}},"9":{start:{line:21,column:4},end:{line:21,column:56}},"10":{start:{line:23,column:4},end:{line:23,column:36}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:3,column:17},end:{line:3,column:18}},loc:{start:{line:3,column:32},end:{line:25,column:1}},line:3}},branchMap:{"0":{loc:{start:{line:6,column:4},end:{line:11,column:5}},type:"if",locations:[{start:{line:6,column:4},end:{line:11,column:5}},{start:{line:6,column:4},end:{line:11,column:5}}],line:6},"1":{loc:{start:{line:14,column:4},end:{line:19,column:5}},type:"if",locations:[{start:{line:14,column:4},end:{line:19,column:5}},{start:{line:14,column:4},end:{line:19,column:5}}],line:14}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},f:{"0":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8a18c41f196805155b1b359c3e9cc3531e30814e"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_o2s2fxx0q=function(){return actualCoverage;};}return actualCoverage;}cov_o2s2fxx0q();const Licence=(cov_o2s2fxx0q().s[0]++,require('../../models/Licence'));cov_o2s2fxx0q().s[1]++;module.exports=async doc=>{cov_o2s2fxx0q().f[0]++;cov_o2s2fxx0q().s[2]++;try{const licences=(cov_o2s2fxx0q().s[3]++,await Licence.find({endDate:{$gte:doc.startDate},customer:doc.customer,isActive:true}));cov_o2s2fxx0q().s[4]++;if(licences.length!==0){cov_o2s2fxx0q().b[0][0]++;cov_o2s2fxx0q().s[5]++;return{err:{message:'Licence Already Exist During This Periode'},status:'error'};}else{cov_o2s2fxx0q().b[0][1]++;}const licenceDocument=(cov_o2s2fxx0q().s[6]++,await Licence.create({...doc}));cov_o2s2fxx0q().s[7]++;if(!licenceDocument){cov_o2s2fxx0q().b[1][0]++;cov_o2s2fxx0q().s[8]++;return{err:{message:'Licence creation problem'},status:'error'};}else{cov_o2s2fxx0q().b[1][1]++;}cov_o2s2fxx0q().s[9]++;return{data:licenceDocument,status:'success'};}catch(err){cov_o2s2fxx0q().s[10]++;return{err,status:'error'};}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZExpY2VuY2Uuc2VydmljZS5qcyJdLCJuYW1lcyI6WyJMaWNlbmNlIiwicmVxdWlyZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJkb2MiLCJsaWNlbmNlcyIsImZpbmQiLCJlbmREYXRlIiwiJGd0ZSIsInN0YXJ0RGF0ZSIsImN1c3RvbWVyIiwiaXNBY3RpdmUiLCJsZW5ndGgiLCJlcnIiLCJtZXNzYWdlIiwic3RhdHVzIiwibGljZW5jZURvY3VtZW50IiwiY3JlYXRlIiwiZGF0YSJdLCJtYXBwaW5ncyI6InUwREFlWTt5RkFmWixLQUFNQSxDQUFBQSxPQUFPLHlCQUFHQyxPQUFPLENBQUMsc0JBQUQsQ0FBVixDQUFiLEMsdUJBRUFDLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixLQUFPQyxDQUFBQSxHQUFQLEVBQWUsK0NBQzlCLEdBQUksQ0FDRixLQUFNQyxDQUFBQSxRQUFRLHlCQUFHLEtBQU1MLENBQUFBLE9BQU8sQ0FBQ00sSUFBUixDQUFhLENBQUVDLE9BQU8sQ0FBRSxDQUFFQyxJQUFJLENBQUVKLEdBQUcsQ0FBQ0ssU0FBWixDQUFYLENBQW9DQyxRQUFRLENBQUVOLEdBQUcsQ0FBQ00sUUFBbEQsQ0FBNERDLFFBQVEsQ0FBRSxJQUF0RSxDQUFiLENBQVQsQ0FBZCxDQURFLHVCQUVGLEdBQUlOLFFBQVEsQ0FBQ08sTUFBVCxHQUFvQixDQUF4QixDQUEyQixrREFDekIsTUFBTyxDQUNMQyxHQUFHLENBQUUsQ0FBRUMsT0FBTyxDQUFFLDJDQUFYLENBREEsQ0FFTEMsTUFBTSxDQUFFLE9BRkgsQ0FBUCxDQUlELENBTEQsZ0NBT0EsS0FBTUMsQ0FBQUEsZUFBZSx5QkFBRyxLQUFNaEIsQ0FBQUEsT0FBTyxDQUFDaUIsTUFBUixDQUFlLENBQUUsR0FBR2IsR0FBTCxDQUFmLENBQVQsQ0FBckIsQ0FURSx1QkFVRixHQUFJLENBQUNZLGVBQUwsQ0FBc0Isa0RBQ3BCLE1BQU8sQ0FDTEgsR0FBRyxDQUFFLENBQUVDLE9BQU8sQ0FBRSwwQkFBWCxDQURBLENBRUxDLE1BQU0sQ0FBRSxPQUZILENBQVAsQ0FJRCxDQUxELGdDQVZFLHVCQWlCRixNQUFPLENBQUVHLElBQUksQ0FBRUYsZUFBUixDQUF5QkQsTUFBTSxDQUFFLFNBQWpDLENBQVAsQ0FDRCxDQUFDLE1BQU9GLEdBQVAsQ0FBWSx5QkFDWixNQUFPLENBQUVBLEdBQUYsQ0FBT0UsTUFBTSxDQUFFLE9BQWYsQ0FBUCxDQUNELENBQ0YsQ0F0QkQiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBMaWNlbmNlID0gcmVxdWlyZSgnLi4vLi4vbW9kZWxzL0xpY2VuY2UnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBhc3luYyAoZG9jKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgbGljZW5jZXMgPSBhd2FpdCBMaWNlbmNlLmZpbmQoeyBlbmREYXRlOiB7ICRndGU6IGRvYy5zdGFydERhdGUgfSwgY3VzdG9tZXI6IGRvYy5jdXN0b21lciwgaXNBY3RpdmU6IHRydWV9KTtcbiAgICBpZiAobGljZW5jZXMubGVuZ3RoICE9PSAwKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBlcnI6IHsgbWVzc2FnZTogJ0xpY2VuY2UgQWxyZWFkeSBFeGlzdCBEdXJpbmcgVGhpcyBQZXJpb2RlJyB9LFxuICAgICAgICBzdGF0dXM6ICdlcnJvcidcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3QgbGljZW5jZURvY3VtZW50ID0gYXdhaXQgTGljZW5jZS5jcmVhdGUoeyAuLi5kb2MgfSk7XG4gICAgaWYgKCFsaWNlbmNlRG9jdW1lbnQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVycjogeyBtZXNzYWdlOiAnTGljZW5jZSBjcmVhdGlvbiBwcm9ibGVtJyB9LFxuICAgICAgICBzdGF0dXM6ICdlcnJvcidcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgZGF0YTogbGljZW5jZURvY3VtZW50LCBzdGF0dXM6ICdzdWNjZXNzJyB9O1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZXR1cm4geyBlcnIsIHN0YXR1czogJ2Vycm9yJyB9O1xuICB9XG59O1xuIl19