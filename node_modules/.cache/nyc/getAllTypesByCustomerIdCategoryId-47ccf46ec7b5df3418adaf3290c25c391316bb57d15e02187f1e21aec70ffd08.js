function cov_vbeejo4er(){var path="/home/azer/Desktop/jenkins/app/monitoringApp/services/system/getAllTypesByCustomerIdCategoryId.js";var hash="b722a6b122edfee1f027a0d65d9ac611b38d7345";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/azer/Desktop/jenkins/app/monitoringApp/services/system/getAllTypesByCustomerIdCategoryId.js",statementMap:{"0":{start:{line:1,column:15},end:{line:1,column:45}},"1":{start:{line:4,column:2},end:{line:4,column:69}},"2":{start:{line:4,column:39},end:{line:4,column:56}},"3":{start:{line:6,column:0},end:{line:47,column:2}},"4":{start:{line:7,column:2},end:{line:46,column:3}},"5":{start:{line:8,column:14},end:{line:8,column:16}},"6":{start:{line:9,column:24},end:{line:19,column:6}},"7":{start:{line:21,column:4},end:{line:27,column:5}},"8":{start:{line:22,column:6},end:{line:26,column:8}},"9":{start:{line:29,column:4},end:{line:36,column:5}},"10":{start:{line:29,column:17},end:{line:29,column:18}},"11":{start:{line:30,column:6},end:{line:35,column:7}},"12":{start:{line:31,column:8},end:{line:34,column:11}},"13":{start:{line:38,column:23},end:{line:38,column:50}},"14":{start:{line:40,column:4},end:{line:43,column:6}},"15":{start:{line:45,column:4},end:{line:45,column:36}}},fnMap:{"0":{name:"getUniqueListBy",decl:{start:{line:3,column:9},end:{line:3,column:24}},loc:{start:{line:3,column:35},end:{line:5,column:1}},line:3},"1":{name:"(anonymous_1)",decl:{start:{line:4,column:29},end:{line:4,column:30}},loc:{start:{line:4,column:39},end:{line:4,column:56}},line:4},"2":{name:"(anonymous_2)",decl:{start:{line:6,column:17},end:{line:6,column:18}},loc:{start:{line:6,column:53},end:{line:47,column:1}},line:6}},branchMap:{"0":{loc:{start:{line:21,column:4},end:{line:27,column:5}},type:"if",locations:[{start:{line:21,column:4},end:{line:27,column:5}},{start:{line:21,column:4},end:{line:27,column:5}}],line:21},"1":{loc:{start:{line:30,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:30,column:6},end:{line:35,column:7}},{start:{line:30,column:6},end:{line:35,column:7}}],line:30}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b722a6b122edfee1f027a0d65d9ac611b38d7345"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_vbeejo4er=function(){return actualCoverage;};}return actualCoverage;}cov_vbeejo4er();const System=(cov_vbeejo4er().s[0]++,require("../../models/System"));function getUniqueListBy(arr,key){cov_vbeejo4er().f[0]++;cov_vbeejo4er().s[1]++;return[...new Map(arr.map(item=>{cov_vbeejo4er().f[1]++;cov_vbeejo4er().s[2]++;return[item[key],item];})).values()];}cov_vbeejo4er().s[3]++;module.exports=async(customer_Id,category_Id)=>{cov_vbeejo4er().f[2]++;cov_vbeejo4er().s[4]++;try{let tab=(cov_vbeejo4er().s[5]++,[]);const systemTypes=(cov_vbeejo4er().s[6]++,await System.find({customer:customer_Id,category:category_Id,type:{$exists:true}},{type:1,_id:0}).populate({path:"type",select:{_id:1,type:1}}));cov_vbeejo4er().s[7]++;if(systemTypes.length===0){cov_vbeejo4er().b[0][0]++;cov_vbeejo4er().s[8]++;return{err:{message:"No Types match this criteria !"},status:"error",statusCode:404};}else{cov_vbeejo4er().b[0][1]++;}cov_vbeejo4er().s[9]++;for(let i=(cov_vbeejo4er().s[10]++,0);i<systemTypes.length;i++){cov_vbeejo4er().s[11]++;if(systemTypes[i].type){cov_vbeejo4er().b[1][0]++;cov_vbeejo4er().s[12]++;tab.push({_id:systemTypes[i].type._id,type:systemTypes[i].type.type});}else{cov_vbeejo4er().b[1][1]++;}}const uniqueList=(cov_vbeejo4er().s[13]++,getUniqueListBy(tab,"_id"));cov_vbeejo4er().s[14]++;return{data:uniqueList,status:"success"};}catch(err){cov_vbeejo4er().s[15]++;return{err,status:"error"};}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldEFsbFR5cGVzQnlDdXN0b21lcklkQ2F0ZWdvcnlJZC5qcyJdLCJuYW1lcyI6WyJTeXN0ZW0iLCJyZXF1aXJlIiwiZ2V0VW5pcXVlTGlzdEJ5IiwiYXJyIiwia2V5IiwiTWFwIiwibWFwIiwiaXRlbSIsInZhbHVlcyIsIm1vZHVsZSIsImV4cG9ydHMiLCJjdXN0b21lcl9JZCIsImNhdGVnb3J5X0lkIiwidGFiIiwic3lzdGVtVHlwZXMiLCJmaW5kIiwiY3VzdG9tZXIiLCJjYXRlZ29yeSIsInR5cGUiLCIkZXhpc3RzIiwiX2lkIiwicG9wdWxhdGUiLCJwYXRoIiwic2VsZWN0IiwibGVuZ3RoIiwiZXJyIiwibWVzc2FnZSIsInN0YXR1cyIsInN0YXR1c0NvZGUiLCJpIiwicHVzaCIsInVuaXF1ZUxpc3QiLCJkYXRhIl0sIm1hcHBpbmdzIjoieThFQWVZO3lGQWZaLEtBQU1BLENBQUFBLE1BQU0seUJBQUdDLE9BQU8sQ0FBQyxxQkFBRCxDQUFWLENBQVosQ0FFQSxRQUFTQyxDQUFBQSxlQUFULENBQXlCQyxHQUF6QixDQUE4QkMsR0FBOUIsQ0FBbUMsK0NBQ2pDLE1BQU8sQ0FBQyxHQUFHLEdBQUlDLENBQUFBLEdBQUosQ0FBUUYsR0FBRyxDQUFDRyxHQUFKLENBQVNDLElBQUQsRUFBVSxzREFBQ0EsSUFBSSxDQUFDSCxHQUFELENBQUwsQ0FBWUcsSUFBWixFQUFpQixDQUFuQyxDQUFSLEVBQThDQyxNQUE5QyxFQUFKLENBQVAsQ0FDRCxDLHVCQUNEQyxNQUFNLENBQUNDLE9BQVAsQ0FBaUIsTUFBT0MsV0FBUCxDQUFvQkMsV0FBcEIsR0FBb0MsK0NBQ25ELEdBQUksQ0FDRixHQUFJQyxDQUFBQSxHQUFHLHlCQUFHLEVBQUgsQ0FBUCxDQUNBLEtBQU1DLENBQUFBLFdBQVcseUJBQUcsS0FBTWQsQ0FBQUEsTUFBTSxDQUFDZSxJQUFQLENBQ3hCLENBQ0VDLFFBQVEsQ0FBRUwsV0FEWixDQUVFTSxRQUFRLENBQUVMLFdBRlosQ0FHRU0sSUFBSSxDQUFFLENBQUVDLE9BQU8sQ0FBRSxJQUFYLENBSFIsQ0FEd0IsQ0FNeEIsQ0FBRUQsSUFBSSxDQUFFLENBQVIsQ0FBV0UsR0FBRyxDQUFFLENBQWhCLENBTndCLEVBT3hCQyxRQVB3QixDQU9mLENBQ1RDLElBQUksQ0FBRSxNQURHLENBRVRDLE1BQU0sQ0FBRSxDQUFFSCxHQUFHLENBQUUsQ0FBUCxDQUFVRixJQUFJLENBQUUsQ0FBaEIsQ0FGQyxDQVBlLENBQVQsQ0FBakIsQ0FGRSx1QkFjRixHQUFJSixXQUFXLENBQUNVLE1BQVosR0FBdUIsQ0FBM0IsQ0FBOEIsa0RBQzVCLE1BQU8sQ0FDTEMsR0FBRyxDQUFFLENBQUVDLE9BQU8sQ0FBRSxnQ0FBWCxDQURBLENBRUxDLE1BQU0sQ0FBRSxPQUZILENBR0xDLFVBQVUsQ0FBRSxHQUhQLENBQVAsQ0FLRCxDQU5ELGdDQWRFLHVCQXNCRixJQUFLLEdBQUlDLENBQUFBLENBQUMsMEJBQUcsQ0FBSCxDQUFWLENBQWdCQSxDQUFDLENBQUdmLFdBQVcsQ0FBQ1UsTUFBaEMsQ0FBd0NLLENBQUMsRUFBekMsQ0FBNkMseUJBQzNDLEdBQUlmLFdBQVcsQ0FBQ2UsQ0FBRCxDQUFYLENBQWVYLElBQW5CLENBQXlCLG1EQUN2QkwsR0FBRyxDQUFDaUIsSUFBSixDQUFTLENBQ1BWLEdBQUcsQ0FBRU4sV0FBVyxDQUFDZSxDQUFELENBQVgsQ0FBZVgsSUFBZixDQUFvQkUsR0FEbEIsQ0FFUEYsSUFBSSxDQUFFSixXQUFXLENBQUNlLENBQUQsQ0FBWCxDQUFlWCxJQUFmLENBQW9CQSxJQUZuQixDQUFULEVBSUQsQ0FMRCxnQ0FNRCxDQUVELEtBQU1hLENBQUFBLFVBQVUsMEJBQUc3QixlQUFlLENBQUNXLEdBQUQsQ0FBTSxLQUFOLENBQWxCLENBQWhCLENBL0JFLHdCQWlDRixNQUFPLENBQ0xtQixJQUFJLENBQUVELFVBREQsQ0FFTEosTUFBTSxDQUFFLFNBRkgsQ0FBUCxDQUlELENBQUMsTUFBT0YsR0FBUCxDQUFZLHlCQUNaLE1BQU8sQ0FBRUEsR0FBRixDQUFPRSxNQUFNLENBQUUsT0FBZixDQUFQLENBQ0QsQ0FDRixDQXpDRCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFN5c3RlbSA9IHJlcXVpcmUoXCIuLi8uLi9tb2RlbHMvU3lzdGVtXCIpO1xuXG5mdW5jdGlvbiBnZXRVbmlxdWVMaXN0QnkoYXJyLCBrZXkpIHtcbiAgcmV0dXJuIFsuLi5uZXcgTWFwKGFyci5tYXAoKGl0ZW0pID0+IFtpdGVtW2tleV0sIGl0ZW1dKSkudmFsdWVzKCldO1xufVxubW9kdWxlLmV4cG9ydHMgPSBhc3luYyAoY3VzdG9tZXJfSWQsIGNhdGVnb3J5X0lkKSA9PiB7XG4gIHRyeSB7XG4gICAgbGV0IHRhYiA9IFtdO1xuICAgIGNvbnN0IHN5c3RlbVR5cGVzID0gYXdhaXQgU3lzdGVtLmZpbmQoXG4gICAgICB7XG4gICAgICAgIGN1c3RvbWVyOiBjdXN0b21lcl9JZCxcbiAgICAgICAgY2F0ZWdvcnk6IGNhdGVnb3J5X0lkLFxuICAgICAgICB0eXBlOiB7ICRleGlzdHM6IHRydWUgfSxcbiAgICAgIH0sXG4gICAgICB7IHR5cGU6IDEsIF9pZDogMCB9XG4gICAgKS5wb3B1bGF0ZSh7XG4gICAgICBwYXRoOiBcInR5cGVcIixcbiAgICAgIHNlbGVjdDogeyBfaWQ6IDEsIHR5cGU6IDEgfSxcbiAgICB9KTtcblxuICAgIGlmIChzeXN0ZW1UeXBlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVycjogeyBtZXNzYWdlOiBcIk5vIFR5cGVzIG1hdGNoIHRoaXMgY3JpdGVyaWEgIVwiIH0sXG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBzdGF0dXNDb2RlOiA0MDQsXG4gICAgICB9O1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3lzdGVtVHlwZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChzeXN0ZW1UeXBlc1tpXS50eXBlKSB7XG4gICAgICAgIHRhYi5wdXNoKHtcbiAgICAgICAgICBfaWQ6IHN5c3RlbVR5cGVzW2ldLnR5cGUuX2lkLFxuICAgICAgICAgIHR5cGU6IHN5c3RlbVR5cGVzW2ldLnR5cGUudHlwZSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdW5pcXVlTGlzdCA9IGdldFVuaXF1ZUxpc3RCeSh0YWIsIFwiX2lkXCIpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGE6IHVuaXF1ZUxpc3QsXG4gICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiB7IGVyciwgc3RhdHVzOiBcImVycm9yXCIgfTtcbiAgfVxufTtcbiJdfQ==