function cov_r9t17s0h2(){var path="/home/azer/Desktop/jenkins/app/monitoringApp/controllers/customerContact.controller.js";var hash="1968f1b1ebc13ab07dd696d41b149583549f7e93";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/azer/Desktop/jenkins/app/monitoringApp/controllers/customerContact.controller.js",statementMap:{"0":{start:{line:1,column:19},end:{line:1,column:36}},"1":{start:{line:2,column:15},end:{line:2,column:42}},"2":{start:{line:3,column:31},end:{line:3,column:69}},"3":{start:{line:4,column:22},end:{line:4,column:51}},"4":{start:{line:7,column:0},end:{line:17,column:2}},"5":{start:{line:8,column:17},end:{line:8,column:74}},"6":{start:{line:9,column:2},end:{line:12,column:7}},"7":{start:{line:10,column:4},end:{line:12,column:7}},"8":{start:{line:13,column:2},end:{line:16,column:7}},"9":{start:{line:14,column:4},end:{line:16,column:7}},"10":{start:{line:20,column:0},end:{line:33,column:2}},"11":{start:{line:21,column:17},end:{line:24,column:3}},"12":{start:{line:25,column:2},end:{line:28,column:7}},"13":{start:{line:26,column:4},end:{line:28,column:7}},"14":{start:{line:29,column:2},end:{line:32,column:7}},"15":{start:{line:30,column:4},end:{line:32,column:7}},"16":{start:{line:36,column:0},end:{line:48,column:2}},"17":{start:{line:37,column:17},end:{line:39,column:3}},"18":{start:{line:40,column:2},end:{line:43,column:7}},"19":{start:{line:41,column:4},end:{line:43,column:7}},"20":{start:{line:44,column:2},end:{line:47,column:7}},"21":{start:{line:45,column:4},end:{line:47,column:7}},"22":{start:{line:51,column:0},end:{line:64,column:2}},"23":{start:{line:52,column:17},end:{line:55,column:3}},"24":{start:{line:56,column:2},end:{line:59,column:7}},"25":{start:{line:57,column:4},end:{line:59,column:7}},"26":{start:{line:60,column:2},end:{line:63,column:7}},"27":{start:{line:61,column:4},end:{line:63,column:7}},"28":{start:{line:68,column:0},end:{line:116,column:2}},"29":{start:{line:70,column:4},end:{line:70,column:70}},"30":{start:{line:71,column:2},end:{line:78,column:67}},"31":{start:{line:72,column:4},end:{line:78,column:67}},"32":{start:{line:80,column:14},end:{line:82,column:4}},"33":{start:{line:84,column:2},end:{line:100,column:3}},"34":{start:{line:85,column:4},end:{line:99,column:7}},"35":{start:{line:86,column:6},end:{line:98,column:7}},"36":{start:{line:87,column:16},end:{line:87,column:17}},"37":{start:{line:88,column:8},end:{line:97,column:11}},"38":{start:{line:89,column:10},end:{line:91,column:11}},"39":{start:{line:90,column:12},end:{line:90,column:47}},"40":{start:{line:92,column:10},end:{line:94,column:20}},"41":{start:{line:96,column:10},end:{line:96,column:14}},"42":{start:{line:103,column:4},end:{line:103,column:69}},"43":{start:{line:104,column:2},end:{line:105,column:76}},"44":{start:{line:105,column:4},end:{line:105,column:76}},"45":{start:{line:106,column:2},end:{line:115,column:9}},"46":{start:{line:107,column:4},end:{line:115,column:9}},"47":{start:{line:119,column:0},end:{line:134,column:2}},"48":{start:{line:120,column:17},end:{line:125,column:3}},"49":{start:{line:126,column:2},end:{line:129,column:7}},"50":{start:{line:127,column:4},end:{line:129,column:7}},"51":{start:{line:130,column:2},end:{line:133,column:7}},"52":{start:{line:131,column:4},end:{line:133,column:7}},"53":{start:{line:137,column:0},end:{line:192,column:2}},"54":{start:{line:139,column:4},end:{line:139,column:68}},"55":{start:{line:140,column:2},end:{line:150,column:1}},"56":{start:{line:141,column:0},end:{line:149,column:9}},"57":{start:{line:152,column:31},end:{line:154,column:3}},"58":{start:{line:156,column:2},end:{line:162,column:5}},"59":{start:{line:157,column:4},end:{line:161,column:59}},"60":{start:{line:164,column:31},end:{line:164,column:60}},"61":{start:{line:166,column:2},end:{line:174,column:3}},"62":{start:{line:171,column:4},end:{line:173,column:7}},"63":{start:{line:175,column:29},end:{line:178,column:3}},"64":{start:{line:179,column:2},end:{line:183,column:1}},"65":{start:{line:180,column:0},end:{line:182,column:7}},"66":{start:{line:184,column:2},end:{line:191,column:10}},"67":{start:{line:185,column:0},end:{line:191,column:9}},"68":{start:{line:195,column:0},end:{line:261,column:2}},"69":{start:{line:197,column:4},end:{line:197,column:85}},"70":{start:{line:198,column:2},end:{line:207,column:9}},"71":{start:{line:199,column:4},end:{line:207,column:9}},"72":{start:{line:208,column:31},end:{line:210,column:3}},"73":{start:{line:211,column:2},end:{line:216,column:59}},"74":{start:{line:212,column:4},end:{line:216,column:59}},"75":{start:{line:217,column:10},end:{line:217,column:11}},"76":{start:{line:218,column:2},end:{line:222,column:3}},"77":{start:{line:219,column:4},end:{line:221,column:7}},"78":{start:{line:223,column:29},end:{line:227,column:3}},"79":{start:{line:225,column:6},end:{line:225,column:47}},"80":{start:{line:229,column:2},end:{line:236,column:3}},"81":{start:{line:233,column:4},end:{line:235,column:7}},"82":{start:{line:237,column:22},end:{line:241,column:3}},"83":{start:{line:239,column:6},end:{line:239,column:47}},"84":{start:{line:242,column:29},end:{line:248,column:3}},"85":{start:{line:249,column:2},end:{line:252,column:7}},"86":{start:{line:250,column:4},end:{line:252,column:7}},"87":{start:{line:253,column:2},end:{line:260,column:9}},"88":{start:{line:254,column:4},end:{line:260,column:9}},"89":{start:{line:265,column:0},end:{line:279,column:2}},"90":{start:{line:267,column:4},end:{line:270,column:5}},"91":{start:{line:271,column:2},end:{line:274,column:7}},"92":{start:{line:272,column:4},end:{line:274,column:7}},"93":{start:{line:275,column:2},end:{line:278,column:7}},"94":{start:{line:276,column:4},end:{line:278,column:7}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:29},end:{line:7,column:30}},loc:{start:{line:7,column:55},end:{line:17,column:1}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:20,column:32},end:{line:20,column:33}},loc:{start:{line:20,column:58},end:{line:33,column:1}},line:20},"2":{name:"(anonymous_2)",decl:{start:{line:36,column:33},end:{line:36,column:34}},loc:{start:{line:36,column:59},end:{line:48,column:1}},line:36},"3":{name:"(anonymous_3)",decl:{start:{line:51,column:32},end:{line:51,column:33}},loc:{start:{line:51,column:58},end:{line:64,column:1}},line:51},"4":{name:"(anonymous_4)",decl:{start:{line:68,column:32},end:{line:68,column:33}},loc:{start:{line:68,column:58},end:{line:116,column:1}},line:68},"5":{name:"(anonymous_5)",decl:{start:{line:85,column:16},end:{line:85,column:17}},loc:{start:{line:85,column:23},end:{line:99,column:5}},line:85},"6":{name:"(anonymous_6)",decl:{start:{line:88,column:38},end:{line:88,column:39}},loc:{start:{line:88,column:45},end:{line:97,column:9}},line:88},"7":{name:"(anonymous_7)",decl:{start:{line:119,column:31},end:{line:119,column:32}},loc:{start:{line:119,column:57},end:{line:134,column:1}},line:119},"8":{name:"(anonymous_8)",decl:{start:{line:137,column:26},end:{line:137,column:27}},loc:{start:{line:137,column:52},end:{line:192,column:1}},line:137},"9":{name:"(anonymous_9)",decl:{start:{line:195,column:26},end:{line:195,column:27}},loc:{start:{line:195,column:52},end:{line:261,column:1}},line:195},"10":{name:"(anonymous_10)",decl:{start:{line:224,column:4},end:{line:224,column:5}},loc:{start:{line:224,column:11},end:{line:226,column:5}},line:224},"11":{name:"(anonymous_11)",decl:{start:{line:238,column:4},end:{line:238,column:5}},loc:{start:{line:238,column:11},end:{line:240,column:5}},line:238},"12":{name:"(anonymous_12)",decl:{start:{line:265,column:47},end:{line:265,column:48}},loc:{start:{line:265,column:73},end:{line:279,column:1}},line:265}},branchMap:{"0":{loc:{start:{line:9,column:2},end:{line:12,column:7}},type:"if",locations:[{start:{line:9,column:2},end:{line:12,column:7}},{start:{line:9,column:2},end:{line:12,column:7}}],line:9},"1":{loc:{start:{line:13,column:2},end:{line:16,column:7}},type:"if",locations:[{start:{line:13,column:2},end:{line:16,column:7}},{start:{line:13,column:2},end:{line:16,column:7}}],line:13},"2":{loc:{start:{line:25,column:2},end:{line:28,column:7}},type:"if",locations:[{start:{line:25,column:2},end:{line:28,column:7}},{start:{line:25,column:2},end:{line:28,column:7}}],line:25},"3":{loc:{start:{line:29,column:2},end:{line:32,column:7}},type:"if",locations:[{start:{line:29,column:2},end:{line:32,column:7}},{start:{line:29,column:2},end:{line:32,column:7}}],line:29},"4":{loc:{start:{line:40,column:2},end:{line:43,column:7}},type:"if",locations:[{start:{line:40,column:2},end:{line:43,column:7}},{start:{line:40,column:2},end:{line:43,column:7}}],line:40},"5":{loc:{start:{line:44,column:2},end:{line:47,column:7}},type:"if",locations:[{start:{line:44,column:2},end:{line:47,column:7}},{start:{line:44,column:2},end:{line:47,column:7}}],line:44},"6":{loc:{start:{line:45,column:22},end:{line:45,column:65}},type:"cond-expr",locations:[{start:{line:45,column:42},end:{line:45,column:59}},{start:{line:45,column:62},end:{line:45,column:65}}],line:45},"7":{loc:{start:{line:56,column:2},end:{line:59,column:7}},type:"if",locations:[{start:{line:56,column:2},end:{line:59,column:7}},{start:{line:56,column:2},end:{line:59,column:7}}],line:56},"8":{loc:{start:{line:60,column:2},end:{line:63,column:7}},type:"if",locations:[{start:{line:60,column:2},end:{line:63,column:7}},{start:{line:60,column:2},end:{line:63,column:7}}],line:60},"9":{loc:{start:{line:61,column:22},end:{line:61,column:65}},type:"cond-expr",locations:[{start:{line:61,column:42},end:{line:61,column:59}},{start:{line:61,column:62},end:{line:61,column:65}}],line:61},"10":{loc:{start:{line:71,column:2},end:{line:78,column:67}},type:"if",locations:[{start:{line:71,column:2},end:{line:78,column:67}},{start:{line:71,column:2},end:{line:78,column:67}}],line:71},"11":{loc:{start:{line:74,column:8},end:{line:76,column:15}},type:"cond-expr",locations:[{start:{line:75,column:12},end:{line:75,column:51}},{start:{line:76,column:12},end:{line:76,column:15}}],line:74},"12":{loc:{start:{line:84,column:2},end:{line:100,column:3}},type:"if",locations:[{start:{line:84,column:2},end:{line:100,column:3}},{start:{line:84,column:2},end:{line:100,column:3}}],line:84},"13":{loc:{start:{line:86,column:6},end:{line:98,column:7}},type:"if",locations:[{start:{line:86,column:6},end:{line:98,column:7}},{start:{line:86,column:6},end:{line:98,column:7}}],line:86},"14":{loc:{start:{line:89,column:10},end:{line:91,column:11}},type:"if",locations:[{start:{line:89,column:10},end:{line:91,column:11}},{start:{line:89,column:10},end:{line:91,column:11}}],line:89},"15":{loc:{start:{line:104,column:2},end:{line:105,column:76}},type:"if",locations:[{start:{line:104,column:2},end:{line:105,column:76}},{start:{line:104,column:2},end:{line:105,column:76}}],line:104},"16":{loc:{start:{line:106,column:2},end:{line:115,column:9}},type:"if",locations:[{start:{line:106,column:2},end:{line:115,column:9}},{start:{line:106,column:2},end:{line:115,column:9}}],line:106},"17":{loc:{start:{line:109,column:8},end:{line:111,column:15}},type:"cond-expr",locations:[{start:{line:110,column:12},end:{line:110,column:50}},{start:{line:111,column:12},end:{line:111,column:15}}],line:109},"18":{loc:{start:{line:126,column:2},end:{line:129,column:7}},type:"if",locations:[{start:{line:126,column:2},end:{line:129,column:7}},{start:{line:126,column:2},end:{line:129,column:7}}],line:126},"19":{loc:{start:{line:130,column:2},end:{line:133,column:7}},type:"if",locations:[{start:{line:130,column:2},end:{line:133,column:7}},{start:{line:130,column:2},end:{line:133,column:7}}],line:130},"20":{loc:{start:{line:140,column:2},end:{line:150,column:1}},type:"if",locations:[{start:{line:140,column:2},end:{line:150,column:1}},{start:{line:140,column:2},end:{line:150,column:1}}],line:140},"21":{loc:{start:{line:143,column:8},end:{line:145,column:15}},type:"cond-expr",locations:[{start:{line:144,column:12},end:{line:144,column:52}},{start:{line:145,column:12},end:{line:145,column:15}}],line:143},"22":{loc:{start:{line:156,column:2},end:{line:162,column:5}},type:"if",locations:[{start:{line:156,column:2},end:{line:162,column:5}},{start:{line:156,column:2},end:{line:162,column:5}}],line:156},"23":{loc:{start:{line:159,column:8},end:{line:159,column:79}},type:"cond-expr",locations:[{start:{line:159,column:42},end:{line:159,column:73}},{start:{line:159,column:76},end:{line:159,column:79}}],line:159},"24":{loc:{start:{line:166,column:2},end:{line:174,column:3}},type:"if",locations:[{start:{line:166,column:2},end:{line:174,column:3}},{start:{line:166,column:2},end:{line:174,column:3}}],line:166},"25":{loc:{start:{line:167,column:4},end:{line:169,column:78}},type:"binary-expr",locations:[{start:{line:167,column:4},end:{line:167,column:24}},{start:{line:168,column:4},end:{line:168,column:61}},{start:{line:169,column:4},end:{line:169,column:78}}],line:167},"26":{loc:{start:{line:179,column:2},end:{line:183,column:1}},type:"if",locations:[{start:{line:179,column:2},end:{line:183,column:1}},{start:{line:179,column:2},end:{line:183,column:1}}],line:179},"27":{loc:{start:{line:184,column:2},end:{line:191,column:10}},type:"if",locations:[{start:{line:184,column:2},end:{line:191,column:10}},{start:{line:184,column:2},end:{line:191,column:10}}],line:184},"28":{loc:{start:{line:187,column:8},end:{line:187,column:75}},type:"cond-expr",locations:[{start:{line:187,column:40},end:{line:187,column:69}},{start:{line:187,column:72},end:{line:187,column:75}}],line:187},"29":{loc:{start:{line:198,column:2},end:{line:207,column:9}},type:"if",locations:[{start:{line:198,column:2},end:{line:207,column:9}},{start:{line:198,column:2},end:{line:207,column:9}}],line:198},"30":{loc:{start:{line:201,column:8},end:{line:203,column:15}},type:"cond-expr",locations:[{start:{line:202,column:12},end:{line:202,column:52}},{start:{line:203,column:12},end:{line:203,column:15}}],line:201},"31":{loc:{start:{line:211,column:2},end:{line:216,column:59}},type:"if",locations:[{start:{line:211,column:2},end:{line:216,column:59}},{start:{line:211,column:2},end:{line:216,column:59}}],line:211},"32":{loc:{start:{line:214,column:8},end:{line:214,column:79}},type:"cond-expr",locations:[{start:{line:214,column:42},end:{line:214,column:73}},{start:{line:214,column:76},end:{line:214,column:79}}],line:214},"33":{loc:{start:{line:218,column:2},end:{line:222,column:3}},type:"if",locations:[{start:{line:218,column:2},end:{line:222,column:3}},{start:{line:218,column:2},end:{line:222,column:3}}],line:218},"34":{loc:{start:{line:229,column:2},end:{line:236,column:3}},type:"if",locations:[{start:{line:229,column:2},end:{line:236,column:3}},{start:{line:229,column:2},end:{line:236,column:3}}],line:229},"35":{loc:{start:{line:230,column:4},end:{line:231,column:60}},type:"binary-expr",locations:[{start:{line:230,column:4},end:{line:230,column:25}},{start:{line:231,column:4},end:{line:231,column:60}}],line:230},"36":{loc:{start:{line:249,column:2},end:{line:252,column:7}},type:"if",locations:[{start:{line:249,column:2},end:{line:252,column:7}},{start:{line:249,column:2},end:{line:252,column:7}}],line:249},"37":{loc:{start:{line:253,column:2},end:{line:260,column:9}},type:"if",locations:[{start:{line:253,column:2},end:{line:260,column:9}},{start:{line:253,column:2},end:{line:260,column:9}}],line:253},"38":{loc:{start:{line:256,column:8},end:{line:256,column:75}},type:"cond-expr",locations:[{start:{line:256,column:40},end:{line:256,column:69}},{start:{line:256,column:72},end:{line:256,column:75}}],line:256},"39":{loc:{start:{line:271,column:2},end:{line:274,column:7}},type:"if",locations:[{start:{line:271,column:2},end:{line:274,column:7}},{start:{line:271,column:2},end:{line:274,column:7}}],line:271},"40":{loc:{start:{line:275,column:2},end:{line:278,column:7}},type:"if",locations:[{start:{line:275,column:2},end:{line:278,column:7}},{start:{line:275,column:2},end:{line:278,column:7}}],line:275},"41":{loc:{start:{line:276,column:22},end:{line:276,column:65}},type:"cond-expr",locations:[{start:{line:276,column:42},end:{line:276,column:59}},{start:{line:276,column:62},end:{line:276,column:65}}],line:276}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1968f1b1ebc13ab07dd696d41b149583549f7e93"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_r9t17s0h2=function(){return actualCoverage;};}return actualCoverage;}cov_r9t17s0h2();const{Logger}=(cov_r9t17s0h2().s[0]++,require("log4js"));const System=(cov_r9t17s0h2().s[1]++,require("../models/System"));const customerContactService=(cov_r9t17s0h2().s[2]++,require("../services/customerContact"));const systemService=(cov_r9t17s0h2().s[3]++,require("../services/system"));//Add CustomerContact
cov_r9t17s0h2().s[4]++;exports.addCustomerContact=async function(req,res){cov_r9t17s0h2().f[0]++;const result=(cov_r9t17s0h2().s[5]++,await customerContactService.addCustomerContact(req.body));cov_r9t17s0h2().s[6]++;if(result.status=="success"){cov_r9t17s0h2().b[0][0]++;cov_r9t17s0h2().s[7]++;return res.status(201).json({data:result.data});}else{cov_r9t17s0h2().b[0][1]++;}cov_r9t17s0h2().s[8]++;if(result.status=="error"){cov_r9t17s0h2().b[1][0]++;cov_r9t17s0h2().s[9]++;return res.status(400).json({message:result.err.message});}else{cov_r9t17s0h2().b[1][1]++;}};//Get All CustomerContact
cov_r9t17s0h2().s[10]++;exports.getAllCustomerContact=async function(req,res){cov_r9t17s0h2().f[1]++;const result=(cov_r9t17s0h2().s[11]++,await customerContactService.getAllCustomerContact(req.query.page,req.query.size));cov_r9t17s0h2().s[12]++;if(result.status=="success"){cov_r9t17s0h2().b[2][0]++;cov_r9t17s0h2().s[13]++;return res.status(200).json({data:result.data});}else{cov_r9t17s0h2().b[2][1]++;}cov_r9t17s0h2().s[14]++;if(result.status=="error"){cov_r9t17s0h2().b[3][0]++;cov_r9t17s0h2().s[15]++;return res.status(400).json({message:result.err.message});}else{cov_r9t17s0h2().b[3][1]++;}};//Get CustomerContact by Id
cov_r9t17s0h2().s[16]++;exports.getCustomerContactById=async function(req,res){cov_r9t17s0h2().f[2]++;const result=(cov_r9t17s0h2().s[17]++,await customerContactService.getCustomerContactById(req.params.id));cov_r9t17s0h2().s[18]++;if(result.status=="success"){cov_r9t17s0h2().b[4][0]++;cov_r9t17s0h2().s[19]++;return res.status(200).json({data:result.data});}else{cov_r9t17s0h2().b[4][1]++;}cov_r9t17s0h2().s[20]++;if(result.status=="error"){cov_r9t17s0h2().b[5][0]++;cov_r9t17s0h2().s[21]++;return res.status(result.statusCode?(cov_r9t17s0h2().b[6][0]++,result.statusCode):(cov_r9t17s0h2().b[6][1]++,400)).json({message:result.err.message});}else{cov_r9t17s0h2().b[5][1]++;}};//Update CustomerContact
cov_r9t17s0h2().s[22]++;exports.updateCustomerContact=async function(req,res){cov_r9t17s0h2().f[3]++;const result=(cov_r9t17s0h2().s[23]++,await customerContactService.updateCustomerContact(req.body,req.params.id));cov_r9t17s0h2().s[24]++;if(result.status=="success"){cov_r9t17s0h2().b[7][0]++;cov_r9t17s0h2().s[25]++;return res.status(201).json({data:result.data});}else{cov_r9t17s0h2().b[7][1]++;}cov_r9t17s0h2().s[26]++;if(result.status=="error"){cov_r9t17s0h2().b[8][0]++;cov_r9t17s0h2().s[27]++;return res.status(result.statusCode?(cov_r9t17s0h2().b[9][0]++,result.statusCode):(cov_r9t17s0h2().b[9][1]++,400)).json({message:result.err.message});}else{cov_r9t17s0h2().b[8][1]++;}};//Still didn't do unit test to those controllers
//DeleteCustomerContact and delete the contact from the systems
cov_r9t17s0h2().s[28]++;exports.deleteCustomerContact=async function(req,res){cov_r9t17s0h2().f[4]++;const resultGetCustomerContactById=(cov_r9t17s0h2().s[29]++,await customerContactService.getCustomerContactById(req.params.id));cov_r9t17s0h2().s[30]++;if(resultGetCustomerContactById.status=="error"){cov_r9t17s0h2().b[10][0]++;cov_r9t17s0h2().s[31]++;return res.status(resultGetCustomerContactById.statusCode?(cov_r9t17s0h2().b[11][0]++,resultGetCustomerContactById.statusCode):(cov_r9t17s0h2().b[11][1]++,400)).json({message:resultGetCustomerContactById.err.message});}else{cov_r9t17s0h2().b[10][1]++;}const sys=(cov_r9t17s0h2().s[32]++,await System.find({listCustomerContact:resultGetCustomerContactById.data._id}));cov_r9t17s0h2().s[33]++;if(sys){cov_r9t17s0h2().b[12][0]++;cov_r9t17s0h2().s[34]++;sys.forEach(s=>{cov_r9t17s0h2().f[5]++;cov_r9t17s0h2().s[35]++;if(s.listCustomerContact){cov_r9t17s0h2().b[13][0]++;let i=(cov_r9t17s0h2().s[36]++,0);cov_r9t17s0h2().s[37]++;s.listCustomerContact.forEach(c=>{cov_r9t17s0h2().f[6]++;cov_r9t17s0h2().s[38]++;if(c.toString()===req.params.id.toString()){cov_r9t17s0h2().b[14][0]++;cov_r9t17s0h2().s[39]++;s.listCustomerContact.splice(i,1);}else{cov_r9t17s0h2().b[14][1]++;}cov_r9t17s0h2().s[40]++;System.findOneAndUpdate({_id:s._id},s,{new:true}).lean().exec();cov_r9t17s0h2().s[41]++;i++;});}else{cov_r9t17s0h2().b[13][1]++;}});}else{cov_r9t17s0h2().b[12][1]++;}const resultDeleteCustomerContact=(cov_r9t17s0h2().s[42]++,await customerContactService.deleteCustomerContact(req.params.id));cov_r9t17s0h2().s[43]++;if(resultDeleteCustomerContact.status=="success"){cov_r9t17s0h2().b[15][0]++;cov_r9t17s0h2().s[44]++;return res.status(201).json({data:resultDeleteCustomerContact.data});}else{cov_r9t17s0h2().b[15][1]++;}cov_r9t17s0h2().s[45]++;if(resultDeleteCustomerContact.status=="error"){cov_r9t17s0h2().b[16][0]++;cov_r9t17s0h2().s[46]++;return res.status(resultDeleteCustomerContact.statusCode?(cov_r9t17s0h2().b[17][0]++,resultDeleteCustomerContact.statusCode):(cov_r9t17s0h2().b[17][1]++,400)).json({message:resultDeleteCustomerContact.err.message});}else{cov_r9t17s0h2().b[16][1]++;}};//Get Customer Contact
cov_r9t17s0h2().s[47]++;exports.getContactByCustomer=async function(req,res){cov_r9t17s0h2().f[7]++;const result=(cov_r9t17s0h2().s[48]++,await customerContactService.getCustomerContactByCustomer(req.params.customerId,req.query.page,req.query.size,req.query.searchValue));cov_r9t17s0h2().s[49]++;if(result.status=="success"){cov_r9t17s0h2().b[18][0]++;cov_r9t17s0h2().s[50]++;return res.status(200).json({data:result.data});}else{cov_r9t17s0h2().b[18][1]++;}cov_r9t17s0h2().s[51]++;if(result.status=="error"){cov_r9t17s0h2().b[19][0]++;cov_r9t17s0h2().s[52]++;return res.status(400).json({message:result.err.message});}else{cov_r9t17s0h2().b[19][1]++;}};//addContactToSys
cov_r9t17s0h2().s[53]++;exports.addContactToSys=async function(req,res){cov_r9t17s0h2().f[8]++;const resultFindCustomerContactById=(cov_r9t17s0h2().s[54]++,await customerContactService.getCustomerContactById(req.body.id));cov_r9t17s0h2().s[55]++;if(resultFindCustomerContactById.status==='error'){cov_r9t17s0h2().b[20][0]++;cov_r9t17s0h2().s[56]++;return res.status(resultFindCustomerContactById.statusCodelistCustomerContact.find()?(cov_r9t17s0h2().b[21][0]++,resultFindCustomerContactById.statusCode):(cov_r9t17s0h2().b[21][1]++,400)).json({message:resultFindCustomerContactById.err.message});}else{cov_r9t17s0h2().b[20][1]++;}const resultFindSystemById=(cov_r9t17s0h2().s[57]++,await systemService.getSystemByIdService(req.params.systemId));cov_r9t17s0h2().s[58]++;if(resultFindSystemById.status==="error"){cov_r9t17s0h2().b[22][0]++;cov_r9t17s0h2().s[59]++;return res.status(resultFindSystemById.statusCode?(cov_r9t17s0h2().b[23][0]++,resultFindSystemById.statusCode):(cov_r9t17s0h2().b[23][1]++,400)).json({message:resultFindSystemById.err.message});}else{cov_r9t17s0h2().b[22][1]++;}const customerContactIndex=(cov_r9t17s0h2().s[60]++,resultFindSystemById.data._id);cov_r9t17s0h2().s[61]++;if((cov_r9t17s0h2().b[25][0]++,customerContactIndex)&&(cov_r9t17s0h2().b[25][1]++,resultFindSystemById.data?.listCustomerContact.length>0)&&(cov_r9t17s0h2().b[25][2]++,resultFindSystemById.data?.listCustomerContact?.find(customerContactIndex))){cov_r9t17s0h2().b[24][0]++;cov_r9t17s0h2().s[62]++;return res.status(400).json({message:'customerContact already exists in the system'});}else{cov_r9t17s0h2().b[24][1]++;}const resultUpdateSystem=(cov_r9t17s0h2().s[63]++,await systemService.updateSystemService({$push:{listCustomerContact:req.body.id}},resultFindSystemById.data._id));cov_r9t17s0h2().s[64]++;if(resultUpdateSystem.status==='success'){cov_r9t17s0h2().b[26][0]++;cov_r9t17s0h2().s[65]++;return res.status(201).json({data:resultUpdateSystem.data});}else{cov_r9t17s0h2().b[26][1]++;}cov_r9t17s0h2().s[66]++;if(resultUpdateSystem.status==='error'){cov_r9t17s0h2().b[27][0]++;cov_r9t17s0h2().s[67]++;return res.status(resultUpdateSystem.statusCode?(cov_r9t17s0h2().b[28][0]++,resultUpdateSystem.statusCode):(cov_r9t17s0h2().b[28][1]++,400)).json({message:resultUpdateSystem.err.message});}else{cov_r9t17s0h2().b[27][1]++;}};//deleteContactFromSys
cov_r9t17s0h2().s[68]++;exports.deleteContactFS=async function(req,res){cov_r9t17s0h2().f[9]++;const resultFindCustomerContactById=(cov_r9t17s0h2().s[69]++,await customerContactService.getCustomerContactById(req.params.customerContactId));cov_r9t17s0h2().s[70]++;if(resultFindCustomerContactById.status=="error"){cov_r9t17s0h2().b[29][0]++;cov_r9t17s0h2().s[71]++;return res.status(resultFindCustomerContactById.statusCode?(cov_r9t17s0h2().b[30][0]++,resultFindCustomerContactById.statusCode):(cov_r9t17s0h2().b[30][1]++,400)).json({message:resultFindCustomerContactById.err.message});}else{cov_r9t17s0h2().b[29][1]++;}const resultFindSystemById=(cov_r9t17s0h2().s[72]++,await systemService.getSystemByIdService(req.params.systemId));cov_r9t17s0h2().s[73]++;if(resultFindSystemById.status=="error"){cov_r9t17s0h2().b[31][0]++;cov_r9t17s0h2().s[74]++;return res.status(resultFindSystemById.statusCode?(cov_r9t17s0h2().b[32][0]++,resultFindSystemById.statusCode):(cov_r9t17s0h2().b[32][1]++,400)).json({message:resultFindSystemById.err.message});}else{cov_r9t17s0h2().b[31][1]++;}let i=(cov_r9t17s0h2().s[75]++,0);cov_r9t17s0h2().s[76]++;if(resultFindSystemById.data.listCustomerContact.length==0){cov_r9t17s0h2().b[33][0]++;cov_r9t17s0h2().s[77]++;return res.status(400).json({message:"listCustomerContact is empty "});}else{cov_r9t17s0h2().b[33][1]++;}let customerContactIndex=(cov_r9t17s0h2().s[78]++,resultFindSystemById.data.listCustomerContact.find(e=>{cov_r9t17s0h2().f[10]++;cov_r9t17s0h2().s[79]++;return e==req.params.customerContactId;}));cov_r9t17s0h2().s[80]++;if((cov_r9t17s0h2().b[35][0]++,!customerContactIndex)&&(cov_r9t17s0h2().b[35][1]++,resultFindSystemById.data.listCustomerContact.length>0)){cov_r9t17s0h2().b[34][0]++;cov_r9t17s0h2().s[81]++;return res.status(400).json({message:"customerContact doesn't exist in the system"});}else{cov_r9t17s0h2().b[34][1]++;}const filterArray=(cov_r9t17s0h2().s[82]++,resultFindSystemById.data.listCustomerContact.filter(e=>{cov_r9t17s0h2().f[11]++;cov_r9t17s0h2().s[83]++;return e!=req.params.customerContactId;}));const resultUpdateSystem=(cov_r9t17s0h2().s[84]++,await systemService.updateSystemService({...resultFindSystemById.data,listCustomerContact:filterArray},req.params.systemId));cov_r9t17s0h2().s[85]++;if(resultUpdateSystem.status=="success"){cov_r9t17s0h2().b[36][0]++;cov_r9t17s0h2().s[86]++;return res.status(201).json({data:resultUpdateSystem.data});}else{cov_r9t17s0h2().b[36][1]++;}cov_r9t17s0h2().s[87]++;if(resultUpdateSystem.status=="error"){cov_r9t17s0h2().b[37][0]++;cov_r9t17s0h2().s[88]++;return res.status(resultUpdateSystem.statusCode?(cov_r9t17s0h2().b[38][0]++,resultUpdateSystem.statusCode):(cov_r9t17s0h2().b[38][1]++,400)).json({message:resultUpdateSystem.err.message});}else{cov_r9t17s0h2().b[37][1]++;}};// get Unassigned Customer Contact By System
cov_r9t17s0h2().s[89]++;exports.getUnassignedCustomerContactBySystem=async function(req,res){cov_r9t17s0h2().f[12]++;const result=(cov_r9t17s0h2().s[90]++,await customerContactService.getUnassignedCustomerContactBySystem(req.params.customerId,req.params.systemId));cov_r9t17s0h2().s[91]++;if(result.status=="success"){cov_r9t17s0h2().b[39][0]++;cov_r9t17s0h2().s[92]++;return res.status(200).json({data:result.data});}else{cov_r9t17s0h2().b[39][1]++;}cov_r9t17s0h2().s[93]++;if(result.status=="error"){cov_r9t17s0h2().b[40][0]++;cov_r9t17s0h2().s[94]++;return res.status(result.statusCode?(cov_r9t17s0h2().b[41][0]++,result.statusCode):(cov_r9t17s0h2().b[41][1]++,400)).json({message:result.err.message});}else{cov_r9t17s0h2().b[40][1]++;}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImN1c3RvbWVyQ29udGFjdC5jb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbIkxvZ2dlciIsInJlcXVpcmUiLCJTeXN0ZW0iLCJjdXN0b21lckNvbnRhY3RTZXJ2aWNlIiwic3lzdGVtU2VydmljZSIsImV4cG9ydHMiLCJhZGRDdXN0b21lckNvbnRhY3QiLCJyZXEiLCJyZXMiLCJyZXN1bHQiLCJib2R5Iiwic3RhdHVzIiwianNvbiIsImRhdGEiLCJtZXNzYWdlIiwiZXJyIiwiZ2V0QWxsQ3VzdG9tZXJDb250YWN0IiwicXVlcnkiLCJwYWdlIiwic2l6ZSIsImdldEN1c3RvbWVyQ29udGFjdEJ5SWQiLCJwYXJhbXMiLCJpZCIsInN0YXR1c0NvZGUiLCJ1cGRhdGVDdXN0b21lckNvbnRhY3QiLCJkZWxldGVDdXN0b21lckNvbnRhY3QiLCJyZXN1bHRHZXRDdXN0b21lckNvbnRhY3RCeUlkIiwic3lzIiwiZmluZCIsImxpc3RDdXN0b21lckNvbnRhY3QiLCJfaWQiLCJmb3JFYWNoIiwicyIsImkiLCJjIiwidG9TdHJpbmciLCJzcGxpY2UiLCJmaW5kT25lQW5kVXBkYXRlIiwibmV3IiwibGVhbiIsImV4ZWMiLCJyZXN1bHREZWxldGVDdXN0b21lckNvbnRhY3QiLCJnZXRDb250YWN0QnlDdXN0b21lciIsImdldEN1c3RvbWVyQ29udGFjdEJ5Q3VzdG9tZXIiLCJjdXN0b21lcklkIiwic2VhcmNoVmFsdWUiLCJhZGRDb250YWN0VG9TeXMiLCJyZXN1bHRGaW5kQ3VzdG9tZXJDb250YWN0QnlJZCIsInN0YXR1c0NvZGVsaXN0Q3VzdG9tZXJDb250YWN0IiwicmVzdWx0RmluZFN5c3RlbUJ5SWQiLCJnZXRTeXN0ZW1CeUlkU2VydmljZSIsInN5c3RlbUlkIiwiY3VzdG9tZXJDb250YWN0SW5kZXgiLCJsZW5ndGgiLCJyZXN1bHRVcGRhdGVTeXN0ZW0iLCJ1cGRhdGVTeXN0ZW1TZXJ2aWNlIiwiJHB1c2giLCJkZWxldGVDb250YWN0RlMiLCJjdXN0b21lckNvbnRhY3RJZCIsImUiLCJmaWx0ZXJBcnJheSIsImZpbHRlciIsImdldFVuYXNzaWduZWRDdXN0b21lckNvbnRhY3RCeVN5c3RlbSJdLCJtYXBwaW5ncyI6IjhxaUJBZVk7eUZBZlosS0FBTSxDQUFFQSxNQUFGLDBCQUFhQyxPQUFPLENBQUMsUUFBRCxDQUFwQixDQUFOLENBQ0EsS0FBTUMsQ0FBQUEsTUFBTSx5QkFBR0QsT0FBTyxDQUFDLGtCQUFELENBQVYsQ0FBWixDQUNBLEtBQU1FLENBQUFBLHNCQUFzQix5QkFBR0YsT0FBTyxDQUFDLDZCQUFELENBQVYsQ0FBNUIsQ0FDQSxLQUFNRyxDQUFBQSxhQUFhLHlCQUFHSCxPQUFPLENBQUMsb0JBQUQsQ0FBVixDQUFuQixDQUVBO3VCQUNBSSxPQUFPLENBQUNDLGtCQUFSLENBQTZCLGVBQWdCQyxHQUFoQixDQUFxQkMsR0FBckIsQ0FBMEIsd0JBQ3JELEtBQU1DLENBQUFBLE1BQU0seUJBQUcsS0FBTU4sQ0FBQUEsc0JBQXNCLENBQUNHLGtCQUF2QixDQUEwQ0MsR0FBRyxDQUFDRyxJQUE5QyxDQUFULENBQVosQ0FEcUQsdUJBRXJELEdBQUlELE1BQU0sQ0FBQ0UsTUFBUCxFQUFpQixTQUFyQixDQUNFLHdEQUFPSCxDQUFBQSxHQUFHLENBQUNHLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQixDQUMxQkMsSUFBSSxDQUFFSixNQUFNLENBQUNJLElBRGEsQ0FBckIsQ0FBUCxDQUVHLENBSEwsZ0NBRnFELHVCQU1yRCxHQUFJSixNQUFNLENBQUNFLE1BQVAsRUFBaUIsT0FBckIsQ0FDRSx3REFBT0gsQ0FBQUEsR0FBRyxDQUFDRyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsQ0FDMUJFLE9BQU8sQ0FBRUwsTUFBTSxDQUFDTSxHQUFQLENBQVdELE9BRE0sQ0FBckIsQ0FBUCxDQUVHLENBSEwsZ0NBSUQsQ0FWRCxDQVlBO3dCQUNBVCxPQUFPLENBQUNXLHFCQUFSLENBQWdDLGVBQWdCVCxHQUFoQixDQUFxQkMsR0FBckIsQ0FBMEIsd0JBQ3hELEtBQU1DLENBQUFBLE1BQU0sMEJBQUcsS0FBTU4sQ0FBQUEsc0JBQXNCLENBQUNhLHFCQUF2QixDQUNuQlQsR0FBRyxDQUFDVSxLQUFKLENBQVVDLElBRFMsQ0FFbkJYLEdBQUcsQ0FBQ1UsS0FBSixDQUFVRSxJQUZTLENBQVQsQ0FBWixDQUR3RCx3QkFLeEQsR0FBSVYsTUFBTSxDQUFDRSxNQUFQLEVBQWlCLFNBQXJCLENBQ0UseURBQU9ILENBQUFBLEdBQUcsQ0FBQ0csTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLENBQzFCQyxJQUFJLENBQUVKLE1BQU0sQ0FBQ0ksSUFEYSxDQUFyQixDQUFQLENBRUcsQ0FITCxnQ0FMd0Qsd0JBU3hELEdBQUlKLE1BQU0sQ0FBQ0UsTUFBUCxFQUFpQixPQUFyQixDQUNFLHlEQUFPSCxDQUFBQSxHQUFHLENBQUNHLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQixDQUMxQkUsT0FBTyxDQUFFTCxNQUFNLENBQUNNLEdBQVAsQ0FBV0QsT0FETSxDQUFyQixDQUFQLENBRUcsQ0FITCxnQ0FJRCxDQWJELENBZUE7d0JBQ0FULE9BQU8sQ0FBQ2Usc0JBQVIsQ0FBaUMsZUFBZ0JiLEdBQWhCLENBQXFCQyxHQUFyQixDQUEwQix3QkFDekQsS0FBTUMsQ0FBQUEsTUFBTSwwQkFBRyxLQUFNTixDQUFBQSxzQkFBc0IsQ0FBQ2lCLHNCQUF2QixDQUNuQmIsR0FBRyxDQUFDYyxNQUFKLENBQVdDLEVBRFEsQ0FBVCxDQUFaLENBRHlELHdCQUl6RCxHQUFJYixNQUFNLENBQUNFLE1BQVAsRUFBaUIsU0FBckIsQ0FDRSx5REFBT0gsQ0FBQUEsR0FBRyxDQUFDRyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsQ0FDMUJDLElBQUksQ0FBRUosTUFBTSxDQUFDSSxJQURhLENBQXJCLENBQVAsQ0FFRyxDQUhMLGdDQUp5RCx3QkFRekQsR0FBSUosTUFBTSxDQUFDRSxNQUFQLEVBQWlCLE9BQXJCLENBQ0UseURBQU9ILENBQUFBLEdBQUcsQ0FBQ0csTUFBSixDQUFXRixNQUFNLENBQUNjLFVBQVAsNEJBQW9CZCxNQUFNLENBQUNjLFVBQTNCLDZCQUF3QyxHQUF4QyxDQUFYLEVBQXdEWCxJQUF4RCxDQUE2RCxDQUNsRUUsT0FBTyxDQUFFTCxNQUFNLENBQUNNLEdBQVAsQ0FBV0QsT0FEOEMsQ0FBN0QsQ0FBUCxDQUVHLENBSEwsZ0NBSUQsQ0FaRCxDQWNBO3dCQUNBVCxPQUFPLENBQUNtQixxQkFBUixDQUFnQyxlQUFnQmpCLEdBQWhCLENBQXFCQyxHQUFyQixDQUEwQix3QkFDeEQsS0FBTUMsQ0FBQUEsTUFBTSwwQkFBRyxLQUFNTixDQUFBQSxzQkFBc0IsQ0FBQ3FCLHFCQUF2QixDQUNuQmpCLEdBQUcsQ0FBQ0csSUFEZSxDQUVuQkgsR0FBRyxDQUFDYyxNQUFKLENBQVdDLEVBRlEsQ0FBVCxDQUFaLENBRHdELHdCQUt4RCxHQUFJYixNQUFNLENBQUNFLE1BQVAsRUFBaUIsU0FBckIsQ0FDRSx5REFBT0gsQ0FBQUEsR0FBRyxDQUFDRyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsQ0FDMUJDLElBQUksQ0FBRUosTUFBTSxDQUFDSSxJQURhLENBQXJCLENBQVAsQ0FFRyxDQUhMLGdDQUx3RCx3QkFTeEQsR0FBSUosTUFBTSxDQUFDRSxNQUFQLEVBQWlCLE9BQXJCLENBQ0UseURBQU9ILENBQUFBLEdBQUcsQ0FBQ0csTUFBSixDQUFXRixNQUFNLENBQUNjLFVBQVAsNEJBQW9CZCxNQUFNLENBQUNjLFVBQTNCLDZCQUF3QyxHQUF4QyxDQUFYLEVBQXdEWCxJQUF4RCxDQUE2RCxDQUNsRUUsT0FBTyxDQUFFTCxNQUFNLENBQUNNLEdBQVAsQ0FBV0QsT0FEOEMsQ0FBN0QsQ0FBUCxDQUVHLENBSEwsZ0NBSUQsQ0FiRCxDQWNBO0FBRUE7d0JBQ0FULE9BQU8sQ0FBQ29CLHFCQUFSLENBQWdDLGVBQWdCbEIsR0FBaEIsQ0FBcUJDLEdBQXJCLENBQTBCLHdCQUN4RCxLQUFNa0IsQ0FBQUEsNEJBQTRCLDBCQUNoQyxLQUFNdkIsQ0FBQUEsc0JBQXNCLENBQUNpQixzQkFBdkIsQ0FBOENiLEdBQUcsQ0FBQ2MsTUFBSixDQUFXQyxFQUF6RCxDQUQwQixDQUFsQyxDQUR3RCx3QkFHeEQsR0FBSUksNEJBQTRCLENBQUNmLE1BQTdCLEVBQXVDLE9BQTNDLENBQ0UsMERBQU9ILENBQUFBLEdBQUcsQ0FDUEcsTUFESSxDQUVIZSw0QkFBNEIsQ0FBQ0gsVUFBN0IsNkJBQ0lHLDRCQUE0QixDQUFDSCxVQURqQyw4QkFFSSxHQUZKLENBRkcsRUFNSlgsSUFOSSxDQU1DLENBQUVFLE9BQU8sQ0FBRVksNEJBQTRCLENBQUNYLEdBQTdCLENBQWlDRCxPQUE1QyxDQU5ELENBQVAsQ0FNK0QsQ0FQakUsaUNBU0EsS0FBTWEsQ0FBQUEsR0FBRywwQkFBRyxLQUFNekIsQ0FBQUEsTUFBTSxDQUFDMEIsSUFBUCxDQUFZLENBQzVCQyxtQkFBbUIsQ0FBRUgsNEJBQTRCLENBQUNiLElBQTdCLENBQWtDaUIsR0FEM0IsQ0FBWixDQUFULENBQVQsQ0Fad0Qsd0JBZ0J4RCxHQUFJSCxHQUFKLENBQVMsb0RBQ1BBLEdBQUcsQ0FBQ0ksT0FBSixDQUFhQyxDQUFELEVBQU8sZ0RBQ2pCLEdBQUlBLENBQUMsQ0FBQ0gsbUJBQU4sQ0FBMkIsNEJBQ3pCLEdBQUlJLENBQUFBLENBQUMsMEJBQUcsQ0FBSCxDQUFMLENBRHlCLHdCQUV6QkQsQ0FBQyxDQUFDSCxtQkFBRixDQUFzQkUsT0FBdEIsQ0FBK0JHLENBQUQsRUFBTyxnREFDbkMsR0FBSUEsQ0FBQyxDQUFDQyxRQUFGLEtBQWlCNUIsR0FBRyxDQUFDYyxNQUFKLENBQVdDLEVBQVgsQ0FBY2EsUUFBZCxFQUFyQixDQUErQyxvREFDN0NILENBQUMsQ0FBQ0gsbUJBQUYsQ0FBc0JPLE1BQXRCLENBQTZCSCxDQUE3QixDQUFnQyxDQUFoQyxFQUNELENBRkQsaUNBRG1DLHdCQUluQy9CLE1BQU0sQ0FBQ21DLGdCQUFQLENBQXdCLENBQUVQLEdBQUcsQ0FBRUUsQ0FBQyxDQUFDRixHQUFULENBQXhCLENBQXdDRSxDQUF4QyxDQUEyQyxDQUFFTSxHQUFHLENBQUUsSUFBUCxDQUEzQyxFQUNHQyxJQURILEdBRUdDLElBRkgsR0FKbUMsd0JBUW5DUCxDQUFDLEdBQ0YsQ0FURCxFQVVELENBWkQsaUNBYUQsQ0FkRCxFQWVELENBaEJELGlDQWtCQSxLQUFNUSxDQUFBQSwyQkFBMkIsMEJBQy9CLEtBQU10QyxDQUFBQSxzQkFBc0IsQ0FBQ3NCLHFCQUF2QixDQUE2Q2xCLEdBQUcsQ0FBQ2MsTUFBSixDQUFXQyxFQUF4RCxDQUR5QixDQUFqQyxDQWxDd0Qsd0JBb0N4RCxHQUFJbUIsMkJBQTJCLENBQUM5QixNQUE1QixFQUFzQyxTQUExQyxDQUNFLDBEQUFPSCxDQUFBQSxHQUFHLENBQUNHLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQixDQUFFQyxJQUFJLENBQUU0QiwyQkFBMkIsQ0FBQzVCLElBQXBDLENBQXJCLENBQVAsQ0FBd0UsQ0FEMUUsaUNBcEN3RCx3QkFzQ3hELEdBQUk0QiwyQkFBMkIsQ0FBQzlCLE1BQTVCLEVBQXNDLE9BQTFDLENBQ0UsMERBQU9ILENBQUFBLEdBQUcsQ0FDUEcsTUFESSxDQUVIOEIsMkJBQTJCLENBQUNsQixVQUE1Qiw2QkFDSWtCLDJCQUEyQixDQUFDbEIsVUFEaEMsOEJBRUksR0FGSixDQUZHLEVBTUpYLElBTkksQ0FNQyxDQUNKRSxPQUFPLENBQUUyQiwyQkFBMkIsQ0FBQzFCLEdBQTVCLENBQWdDRCxPQURyQyxDQU5ELENBQVAsQ0FRSyxDQVRQLGlDQVVELENBaERELENBa0RBO3dCQUNBVCxPQUFPLENBQUNxQyxvQkFBUixDQUErQixlQUFnQm5DLEdBQWhCLENBQXFCQyxHQUFyQixDQUEwQix3QkFDdkQsS0FBTUMsQ0FBQUEsTUFBTSwwQkFBRyxLQUFNTixDQUFBQSxzQkFBc0IsQ0FBQ3dDLDRCQUF2QixDQUNuQnBDLEdBQUcsQ0FBQ2MsTUFBSixDQUFXdUIsVUFEUSxDQUVuQnJDLEdBQUcsQ0FBQ1UsS0FBSixDQUFVQyxJQUZTLENBR25CWCxHQUFHLENBQUNVLEtBQUosQ0FBVUUsSUFIUyxDQUluQlosR0FBRyxDQUFDVSxLQUFKLENBQVU0QixXQUpTLENBQVQsQ0FBWixDQUR1RCx3QkFPdkQsR0FBSXBDLE1BQU0sQ0FBQ0UsTUFBUCxFQUFpQixTQUFyQixDQUNFLDBEQUFPSCxDQUFBQSxHQUFHLENBQUNHLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQixDQUMxQkMsSUFBSSxDQUFFSixNQUFNLENBQUNJLElBRGEsQ0FBckIsQ0FBUCxDQUVHLENBSEwsaUNBUHVELHdCQVd2RCxHQUFJSixNQUFNLENBQUNFLE1BQVAsRUFBaUIsT0FBckIsQ0FDRSwwREFBT0gsQ0FBQUEsR0FBRyxDQUFDRyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsQ0FDMUJFLE9BQU8sQ0FBRUwsTUFBTSxDQUFDTSxHQUFQLENBQVdELE9BRE0sQ0FBckIsQ0FBUCxDQUVHLENBSEwsaUNBSUQsQ0FmRCxDQWlCQTt3QkFDQVQsT0FBTyxDQUFDeUMsZUFBUixDQUEwQixlQUFnQnZDLEdBQWhCLENBQXFCQyxHQUFyQixDQUEwQix3QkFDbEQsS0FBTXVDLENBQUFBLDZCQUE2QiwwQkFDakMsS0FBTTVDLENBQUFBLHNCQUFzQixDQUFDaUIsc0JBQXZCLENBQThDYixHQUFHLENBQUNHLElBQUosQ0FBU1ksRUFBdkQsQ0FEMkIsQ0FBbkMsQ0FEa0Qsd0JBR2xELEdBQUl5Qiw2QkFBNkIsQ0FBQ3BDLE1BQTlCLEdBQXlDLE9BQTdDLENBQXNELG9EQUN4RCxNQUFPSCxDQUFBQSxHQUFHLENBQ0hHLE1BREEsQ0FFQ29DLDZCQUE2QixDQUFDQyw2QkFBOUIsQ0FBNERwQixJQUE1RCwrQkFDSW1CLDZCQUE2QixDQUFDeEIsVUFEbEMsOEJBRUksR0FGSixDQUZELEVBTUFYLElBTkEsQ0FNSyxDQUNKRSxPQUFPLENBQUVpQyw2QkFBNkIsQ0FBQ2hDLEdBQTlCLENBQWtDRCxPQUR2QyxDQU5MLENBQVAsQ0FTQyxDQVZDLGlDQVlBLEtBQU1tQyxDQUFBQSxvQkFBb0IsMEJBQUcsS0FBTTdDLENBQUFBLGFBQWEsQ0FBQzhDLG9CQUFkLENBQ2pDM0MsR0FBRyxDQUFDYyxNQUFKLENBQVc4QixRQURzQixDQUFULENBQTFCLENBZmtELHdCQW1CbEQsR0FBSUYsb0JBQW9CLENBQUN0QyxNQUFyQixHQUFnQyxPQUFwQyxDQUE0QyxvREFDMUMsTUFBT0gsQ0FBQUEsR0FBRyxDQUNQRyxNQURJLENBRUhzQyxvQkFBb0IsQ0FBQzFCLFVBQXJCLDZCQUFrQzBCLG9CQUFvQixDQUFDMUIsVUFBdkQsOEJBQW9FLEdBQXBFLENBRkcsRUFJSlgsSUFKSSxDQUlDLENBQUVFLE9BQU8sQ0FBRW1DLG9CQUFvQixDQUFDbEMsR0FBckIsQ0FBeUJELE9BQXBDLENBSkQsQ0FBUCxDQUtDLENBTkgsaUNBUUEsS0FBTXNDLENBQUFBLG9CQUFvQiwwQkFBR0gsb0JBQW9CLENBQUNwQyxJQUFyQixDQUEwQmlCLEdBQTdCLENBQTFCLENBM0JrRCx3QkE2QmxELEdBQ0UsNEJBQUFzQixvQkFBb0IsK0JBQ3BCSCxvQkFBb0IsQ0FBQ3BDLElBQXJCLEVBQTJCZ0IsbUJBQTNCLENBQStDd0IsTUFBL0MsQ0FBd0QsQ0FEcEMsQ0FBcEIsOEJBRUFKLG9CQUFvQixDQUFDcEMsSUFBckIsRUFBMkJnQixtQkFBM0IsRUFBZ0RELElBQWhELENBQXFEd0Isb0JBQXJELENBRkEsQ0FERixDQUlFLG9EQUNBLE1BQU81QyxDQUFBQSxHQUFHLENBQUNHLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQixDQUMxQkUsT0FBTyxDQUFFLDhDQURpQixDQUFyQixDQUFQLENBR0QsQ0FSRCxpQ0FTQSxLQUFNd0MsQ0FBQUEsa0JBQWtCLDBCQUFHLEtBQU1sRCxDQUFBQSxhQUFhLENBQUNtRCxtQkFBZCxDQUMvQixDQUFFQyxLQUFLLENBQUUsQ0FBRTNCLG1CQUFtQixDQUFFdEIsR0FBRyxDQUFDRyxJQUFKLENBQVNZLEVBQWhDLENBQVQsQ0FEK0IsQ0FFL0IyQixvQkFBb0IsQ0FBQ3BDLElBQXJCLENBQTBCaUIsR0FGSyxDQUFULENBQXhCLENBdENrRCx3QkEwQ2xELEdBQUl3QixrQkFBa0IsQ0FBQzNDLE1BQW5CLEdBQThCLFNBQWxDLENBQTZDLG9EQUMvQyxNQUFPSCxDQUFBQSxHQUFHLENBQUNHLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQixDQUN0QkMsSUFBSSxDQUFFeUMsa0JBQWtCLENBQUN6QyxJQURILENBQXJCLENBQVAsQ0FHQyxDQUpDLGlDQTFDa0Qsd0JBK0NsRCxHQUFJeUMsa0JBQWtCLENBQUMzQyxNQUFuQixHQUE4QixPQUFsQyxDQUEyQyxvREFDN0MsTUFBT0gsQ0FBQUEsR0FBRyxDQUNIRyxNQURBLENBRUMyQyxrQkFBa0IsQ0FBQy9CLFVBQW5CLDZCQUFnQytCLGtCQUFrQixDQUFDL0IsVUFBbkQsOEJBQWdFLEdBQWhFLENBRkQsRUFJQVgsSUFKQSxDQUlLLENBQ0pFLE9BQU8sQ0FBRXdDLGtCQUFrQixDQUFDdkMsR0FBbkIsQ0FBdUJELE9BRDVCLENBSkwsQ0FBUCxDQU1VLENBUFIsaUNBUUQsQ0F2REQsQ0F5REE7d0JBQ0FULE9BQU8sQ0FBQ29ELGVBQVIsQ0FBMEIsZUFBZ0JsRCxHQUFoQixDQUFxQkMsR0FBckIsQ0FBMEIsd0JBQ2xELEtBQU11QyxDQUFBQSw2QkFBNkIsMEJBQ2pDLEtBQU01QyxDQUFBQSxzQkFBc0IsQ0FBQ2lCLHNCQUF2QixDQUE4Q2IsR0FBRyxDQUFDYyxNQUFKLENBQVdxQyxpQkFBekQsQ0FEMkIsQ0FBbkMsQ0FEa0Qsd0JBR2xELEdBQUlYLDZCQUE2QixDQUFDcEMsTUFBOUIsRUFBd0MsT0FBNUMsQ0FDRSwwREFBT0gsQ0FBQUEsR0FBRyxDQUNQRyxNQURJLENBRUhvQyw2QkFBNkIsQ0FBQ3hCLFVBQTlCLDZCQUNJd0IsNkJBQTZCLENBQUN4QixVQURsQyw4QkFFSSxHQUZKLENBRkcsRUFNSlgsSUFOSSxDQU1DLENBQ0pFLE9BQU8sQ0FBRWlDLDZCQUE2QixDQUFDaEMsR0FBOUIsQ0FBa0NELE9BRHZDLENBTkQsQ0FBUCxDQVFLLENBVFAsaUNBVUEsS0FBTW1DLENBQUFBLG9CQUFvQiwwQkFBRyxLQUFNN0MsQ0FBQUEsYUFBYSxDQUFDOEMsb0JBQWQsQ0FDakMzQyxHQUFHLENBQUNjLE1BQUosQ0FBVzhCLFFBRHNCLENBQVQsQ0FBMUIsQ0Fia0Qsd0JBZ0JsRCxHQUFJRixvQkFBb0IsQ0FBQ3RDLE1BQXJCLEVBQStCLE9BQW5DLENBQ0UsMERBQU9ILENBQUFBLEdBQUcsQ0FDUEcsTUFESSxDQUVIc0Msb0JBQW9CLENBQUMxQixVQUFyQiw2QkFBa0MwQixvQkFBb0IsQ0FBQzFCLFVBQXZELDhCQUFvRSxHQUFwRSxDQUZHLEVBSUpYLElBSkksQ0FJQyxDQUFFRSxPQUFPLENBQUVtQyxvQkFBb0IsQ0FBQ2xDLEdBQXJCLENBQXlCRCxPQUFwQyxDQUpELENBQVAsQ0FJdUQsQ0FMekQsaUNBTUEsR0FBSW1CLENBQUFBLENBQUMsMEJBQUcsQ0FBSCxDQUFMLENBdEJrRCx3QkF1QmxELEdBQUlnQixvQkFBb0IsQ0FBQ3BDLElBQXJCLENBQTBCZ0IsbUJBQTFCLENBQThDd0IsTUFBOUMsRUFBd0QsQ0FBNUQsQ0FBK0Qsb0RBQzdELE1BQU83QyxDQUFBQSxHQUFHLENBQUNHLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQixDQUMxQkUsT0FBTyxDQUFFLCtCQURpQixDQUFyQixDQUFQLENBR0QsQ0FKRCxpQ0FLQSxHQUFJc0MsQ0FBQUEsb0JBQW9CLDBCQUFHSCxvQkFBb0IsQ0FBQ3BDLElBQXJCLENBQTBCZ0IsbUJBQTFCLENBQThDRCxJQUE5QyxDQUN4QitCLENBQUQsRUFBTyxpREFDTCxNQUFPQSxDQUFBQSxDQUFDLEVBQUlwRCxHQUFHLENBQUNjLE1BQUosQ0FBV3FDLGlCQUF2QixDQUNELENBSHdCLENBQUgsQ0FBeEIsQ0E1QmtELHdCQWtDbEQsR0FDRSw2QkFBQ04sb0JBQUQsK0JBQ0FILG9CQUFvQixDQUFDcEMsSUFBckIsQ0FBMEJnQixtQkFBMUIsQ0FBOEN3QixNQUE5QyxDQUF1RCxDQUR2RCxDQURGLENBR0Usb0RBQ0EsTUFBTzdDLENBQUFBLEdBQUcsQ0FBQ0csTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLENBQzFCRSxPQUFPLENBQUUsNkNBRGlCLENBQXJCLENBQVAsQ0FHRCxDQVBELGlDQVFBLEtBQU04QyxDQUFBQSxXQUFXLDBCQUFHWCxvQkFBb0IsQ0FBQ3BDLElBQXJCLENBQTBCZ0IsbUJBQTFCLENBQThDZ0MsTUFBOUMsQ0FDakJGLENBQUQsRUFBTyxpREFDTCxNQUFPQSxDQUFBQSxDQUFDLEVBQUlwRCxHQUFHLENBQUNjLE1BQUosQ0FBV3FDLGlCQUF2QixDQUNELENBSGlCLENBQUgsQ0FBakIsQ0FLQSxLQUFNSixDQUFBQSxrQkFBa0IsMEJBQUcsS0FBTWxELENBQUFBLGFBQWEsQ0FBQ21ELG1CQUFkLENBQy9CLENBQ0UsR0FBR04sb0JBQW9CLENBQUNwQyxJQUQxQixDQUVFZ0IsbUJBQW1CLENBQUUrQixXQUZ2QixDQUQrQixDQUsvQnJELEdBQUcsQ0FBQ2MsTUFBSixDQUFXOEIsUUFMb0IsQ0FBVCxDQUF4QixDQS9Da0Qsd0JBc0RsRCxHQUFJRyxrQkFBa0IsQ0FBQzNDLE1BQW5CLEVBQTZCLFNBQWpDLENBQ0UsMERBQU9ILENBQUFBLEdBQUcsQ0FBQ0csTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLENBQzFCQyxJQUFJLENBQUV5QyxrQkFBa0IsQ0FBQ3pDLElBREMsQ0FBckIsQ0FBUCxDQUVHLENBSEwsaUNBdERrRCx3QkEwRGxELEdBQUl5QyxrQkFBa0IsQ0FBQzNDLE1BQW5CLEVBQTZCLE9BQWpDLENBQ0UsMERBQU9ILENBQUFBLEdBQUcsQ0FDUEcsTUFESSxDQUVIMkMsa0JBQWtCLENBQUMvQixVQUFuQiw2QkFBZ0MrQixrQkFBa0IsQ0FBQy9CLFVBQW5ELDhCQUFnRSxHQUFoRSxDQUZHLEVBSUpYLElBSkksQ0FJQyxDQUNKRSxPQUFPLENBQUV3QyxrQkFBa0IsQ0FBQ3ZDLEdBQW5CLENBQXVCRCxPQUQ1QixDQUpELENBQVAsQ0FNSyxDQVBQLGlDQVFELENBbEVELENBb0VBO3dCQUVBVCxPQUFPLENBQUN5RCxvQ0FBUixDQUErQyxlQUFnQnZELEdBQWhCLENBQXFCQyxHQUFyQixDQUEwQix5QkFDdkUsS0FBTUMsQ0FBQUEsTUFBTSwwQkFDVixLQUFNTixDQUFBQSxzQkFBc0IsQ0FBQzJELG9DQUF2QixDQUNKdkQsR0FBRyxDQUFDYyxNQUFKLENBQVd1QixVQURQLENBRUpyQyxHQUFHLENBQUNjLE1BQUosQ0FBVzhCLFFBRlAsQ0FESSxDQUFaLENBRHVFLHdCQU12RSxHQUFJMUMsTUFBTSxDQUFDRSxNQUFQLEVBQWlCLFNBQXJCLENBQ0UsMERBQU9ILENBQUFBLEdBQUcsQ0FBQ0csTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLENBQzFCQyxJQUFJLENBQUVKLE1BQU0sQ0FBQ0ksSUFEYSxDQUFyQixDQUFQLENBRUcsQ0FITCxpQ0FOdUUsd0JBVXZFLEdBQUlKLE1BQU0sQ0FBQ0UsTUFBUCxFQUFpQixPQUFyQixDQUNFLDBEQUFPSCxDQUFBQSxHQUFHLENBQUNHLE1BQUosQ0FBV0YsTUFBTSxDQUFDYyxVQUFQLDZCQUFvQmQsTUFBTSxDQUFDYyxVQUEzQiw4QkFBd0MsR0FBeEMsQ0FBWCxFQUF3RFgsSUFBeEQsQ0FBNkQsQ0FDbEVFLE9BQU8sQ0FBRUwsTUFBTSxDQUFDTSxHQUFQLENBQVdELE9BRDhDLENBQTdELENBQVAsQ0FFRyxDQUhMLGlDQUlELENBZEQiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IExvZ2dlciB9ID0gcmVxdWlyZShcImxvZzRqc1wiKTtcbmNvbnN0IFN5c3RlbSA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvU3lzdGVtXCIpO1xuY29uc3QgY3VzdG9tZXJDb250YWN0U2VydmljZSA9IHJlcXVpcmUoXCIuLi9zZXJ2aWNlcy9jdXN0b21lckNvbnRhY3RcIik7XG5jb25zdCBzeXN0ZW1TZXJ2aWNlID0gcmVxdWlyZShcIi4uL3NlcnZpY2VzL3N5c3RlbVwiKTtcblxuLy9BZGQgQ3VzdG9tZXJDb250YWN0XG5leHBvcnRzLmFkZEN1c3RvbWVyQ29udGFjdCA9IGFzeW5jIGZ1bmN0aW9uIChyZXEsIHJlcykge1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBjdXN0b21lckNvbnRhY3RTZXJ2aWNlLmFkZEN1c3RvbWVyQ29udGFjdChyZXEuYm9keSk7XG4gIGlmIChyZXN1bHQuc3RhdHVzID09IFwic3VjY2Vzc1wiKVxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbih7XG4gICAgICBkYXRhOiByZXN1bHQuZGF0YSxcbiAgICB9KTtcbiAgaWYgKHJlc3VsdC5zdGF0dXMgPT0gXCJlcnJvclwiKVxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICBtZXNzYWdlOiByZXN1bHQuZXJyLm1lc3NhZ2UsXG4gICAgfSk7XG59O1xuXG4vL0dldCBBbGwgQ3VzdG9tZXJDb250YWN0XG5leHBvcnRzLmdldEFsbEN1c3RvbWVyQ29udGFjdCA9IGFzeW5jIGZ1bmN0aW9uIChyZXEsIHJlcykge1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBjdXN0b21lckNvbnRhY3RTZXJ2aWNlLmdldEFsbEN1c3RvbWVyQ29udGFjdChcbiAgICByZXEucXVlcnkucGFnZSxcbiAgICByZXEucXVlcnkuc2l6ZVxuICApO1xuICBpZiAocmVzdWx0LnN0YXR1cyA9PSBcInN1Y2Nlc3NcIilcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgZGF0YTogcmVzdWx0LmRhdGEsXG4gICAgfSk7XG4gIGlmIChyZXN1bHQuc3RhdHVzID09IFwiZXJyb3JcIilcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgbWVzc2FnZTogcmVzdWx0LmVyci5tZXNzYWdlLFxuICAgIH0pO1xufTtcblxuLy9HZXQgQ3VzdG9tZXJDb250YWN0IGJ5IElkXG5leHBvcnRzLmdldEN1c3RvbWVyQ29udGFjdEJ5SWQgPSBhc3luYyBmdW5jdGlvbiAocmVxLCByZXMpIHtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY3VzdG9tZXJDb250YWN0U2VydmljZS5nZXRDdXN0b21lckNvbnRhY3RCeUlkKFxuICAgIHJlcS5wYXJhbXMuaWRcbiAgKTtcbiAgaWYgKHJlc3VsdC5zdGF0dXMgPT0gXCJzdWNjZXNzXCIpXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgIGRhdGE6IHJlc3VsdC5kYXRhLFxuICAgIH0pO1xuICBpZiAocmVzdWx0LnN0YXR1cyA9PSBcImVycm9yXCIpXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMocmVzdWx0LnN0YXR1c0NvZGUgPyByZXN1bHQuc3RhdHVzQ29kZSA6IDQwMCkuanNvbih7XG4gICAgICBtZXNzYWdlOiByZXN1bHQuZXJyLm1lc3NhZ2UsXG4gICAgfSk7XG59O1xuXG4vL1VwZGF0ZSBDdXN0b21lckNvbnRhY3RcbmV4cG9ydHMudXBkYXRlQ3VzdG9tZXJDb250YWN0ID0gYXN5bmMgZnVuY3Rpb24gKHJlcSwgcmVzKSB7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGN1c3RvbWVyQ29udGFjdFNlcnZpY2UudXBkYXRlQ3VzdG9tZXJDb250YWN0KFxuICAgIHJlcS5ib2R5LFxuICAgIHJlcS5wYXJhbXMuaWRcbiAgKTtcbiAgaWYgKHJlc3VsdC5zdGF0dXMgPT0gXCJzdWNjZXNzXCIpXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcbiAgICAgIGRhdGE6IHJlc3VsdC5kYXRhLFxuICAgIH0pO1xuICBpZiAocmVzdWx0LnN0YXR1cyA9PSBcImVycm9yXCIpXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMocmVzdWx0LnN0YXR1c0NvZGUgPyByZXN1bHQuc3RhdHVzQ29kZSA6IDQwMCkuanNvbih7XG4gICAgICBtZXNzYWdlOiByZXN1bHQuZXJyLm1lc3NhZ2UsXG4gICAgfSk7XG59O1xuLy9TdGlsbCBkaWRuJ3QgZG8gdW5pdCB0ZXN0IHRvIHRob3NlIGNvbnRyb2xsZXJzXG5cbi8vRGVsZXRlQ3VzdG9tZXJDb250YWN0IGFuZCBkZWxldGUgdGhlIGNvbnRhY3QgZnJvbSB0aGUgc3lzdGVtc1xuZXhwb3J0cy5kZWxldGVDdXN0b21lckNvbnRhY3QgPSBhc3luYyBmdW5jdGlvbiAocmVxLCByZXMpIHtcbiAgY29uc3QgcmVzdWx0R2V0Q3VzdG9tZXJDb250YWN0QnlJZCA9XG4gICAgYXdhaXQgY3VzdG9tZXJDb250YWN0U2VydmljZS5nZXRDdXN0b21lckNvbnRhY3RCeUlkKHJlcS5wYXJhbXMuaWQpO1xuICBpZiAocmVzdWx0R2V0Q3VzdG9tZXJDb250YWN0QnlJZC5zdGF0dXMgPT0gXCJlcnJvclwiKVxuICAgIHJldHVybiByZXNcbiAgICAgIC5zdGF0dXMoXG4gICAgICAgIHJlc3VsdEdldEN1c3RvbWVyQ29udGFjdEJ5SWQuc3RhdHVzQ29kZVxuICAgICAgICAgID8gcmVzdWx0R2V0Q3VzdG9tZXJDb250YWN0QnlJZC5zdGF0dXNDb2RlXG4gICAgICAgICAgOiA0MDBcbiAgICAgIClcbiAgICAgIC5qc29uKHsgbWVzc2FnZTogcmVzdWx0R2V0Q3VzdG9tZXJDb250YWN0QnlJZC5lcnIubWVzc2FnZSB9KTtcblxuICBjb25zdCBzeXMgPSBhd2FpdCBTeXN0ZW0uZmluZCh7XG4gICAgbGlzdEN1c3RvbWVyQ29udGFjdDogcmVzdWx0R2V0Q3VzdG9tZXJDb250YWN0QnlJZC5kYXRhLl9pZCxcbiAgfSk7XG5cbiAgaWYgKHN5cykge1xuICAgIHN5cy5mb3JFYWNoKChzKSA9PiB7XG4gICAgICBpZiAocy5saXN0Q3VzdG9tZXJDb250YWN0KSB7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgcy5saXN0Q3VzdG9tZXJDb250YWN0LmZvckVhY2goKGMpID0+IHtcbiAgICAgICAgICBpZiAoYy50b1N0cmluZygpID09PSByZXEucGFyYW1zLmlkLnRvU3RyaW5nKCkpIHtcbiAgICAgICAgICAgIHMubGlzdEN1c3RvbWVyQ29udGFjdC5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFN5c3RlbS5maW5kT25lQW5kVXBkYXRlKHsgX2lkOiBzLl9pZCB9LCBzLCB7IG5ldzogdHJ1ZSB9KVxuICAgICAgICAgICAgLmxlYW4oKVxuICAgICAgICAgICAgLmV4ZWMoKTtcblxuICAgICAgICAgIGkrKztcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBjb25zdCByZXN1bHREZWxldGVDdXN0b21lckNvbnRhY3QgPVxuICAgIGF3YWl0IGN1c3RvbWVyQ29udGFjdFNlcnZpY2UuZGVsZXRlQ3VzdG9tZXJDb250YWN0KHJlcS5wYXJhbXMuaWQpO1xuICBpZiAocmVzdWx0RGVsZXRlQ3VzdG9tZXJDb250YWN0LnN0YXR1cyA9PSBcInN1Y2Nlc3NcIilcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oeyBkYXRhOiByZXN1bHREZWxldGVDdXN0b21lckNvbnRhY3QuZGF0YSB9KTtcbiAgaWYgKHJlc3VsdERlbGV0ZUN1c3RvbWVyQ29udGFjdC5zdGF0dXMgPT0gXCJlcnJvclwiKVxuICAgIHJldHVybiByZXNcbiAgICAgIC5zdGF0dXMoXG4gICAgICAgIHJlc3VsdERlbGV0ZUN1c3RvbWVyQ29udGFjdC5zdGF0dXNDb2RlXG4gICAgICAgICAgPyByZXN1bHREZWxldGVDdXN0b21lckNvbnRhY3Quc3RhdHVzQ29kZVxuICAgICAgICAgIDogNDAwXG4gICAgICApXG4gICAgICAuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6IHJlc3VsdERlbGV0ZUN1c3RvbWVyQ29udGFjdC5lcnIubWVzc2FnZSxcbiAgICAgIH0pO1xufTtcblxuLy9HZXQgQ3VzdG9tZXIgQ29udGFjdFxuZXhwb3J0cy5nZXRDb250YWN0QnlDdXN0b21lciA9IGFzeW5jIGZ1bmN0aW9uIChyZXEsIHJlcykge1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBjdXN0b21lckNvbnRhY3RTZXJ2aWNlLmdldEN1c3RvbWVyQ29udGFjdEJ5Q3VzdG9tZXIoXG4gICAgcmVxLnBhcmFtcy5jdXN0b21lcklkLFxuICAgIHJlcS5xdWVyeS5wYWdlLFxuICAgIHJlcS5xdWVyeS5zaXplLFxuICAgIHJlcS5xdWVyeS5zZWFyY2hWYWx1ZVxuICApO1xuICBpZiAocmVzdWx0LnN0YXR1cyA9PSBcInN1Y2Nlc3NcIilcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgZGF0YTogcmVzdWx0LmRhdGEsXG4gICAgfSk7XG4gIGlmIChyZXN1bHQuc3RhdHVzID09IFwiZXJyb3JcIilcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgbWVzc2FnZTogcmVzdWx0LmVyci5tZXNzYWdlLFxuICAgIH0pO1xufTtcblxuLy9hZGRDb250YWN0VG9TeXNcbmV4cG9ydHMuYWRkQ29udGFjdFRvU3lzID0gYXN5bmMgZnVuY3Rpb24gKHJlcSwgcmVzKSB7XG4gIGNvbnN0IHJlc3VsdEZpbmRDdXN0b21lckNvbnRhY3RCeUlkID1cbiAgICBhd2FpdCBjdXN0b21lckNvbnRhY3RTZXJ2aWNlLmdldEN1c3RvbWVyQ29udGFjdEJ5SWQocmVxLmJvZHkuaWQpO1xuICBpZiAocmVzdWx0RmluZEN1c3RvbWVyQ29udGFjdEJ5SWQuc3RhdHVzID09PSAnZXJyb3InKSB7XG5yZXR1cm4gcmVzXG4gICAgICAuc3RhdHVzKFxuICAgICAgICByZXN1bHRGaW5kQ3VzdG9tZXJDb250YWN0QnlJZC5zdGF0dXNDb2RlbGlzdEN1c3RvbWVyQ29udGFjdC5maW5kKClcbiAgICAgICAgICA/IHJlc3VsdEZpbmRDdXN0b21lckNvbnRhY3RCeUlkLnN0YXR1c0NvZGVcbiAgICAgICAgICA6IDQwMFxuICAgICAgKVxuICAgICAgLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiByZXN1bHRGaW5kQ3VzdG9tZXJDb250YWN0QnlJZC5lcnIubWVzc2FnZVxuICAgICAgfSk7XG59XG5cbiAgY29uc3QgcmVzdWx0RmluZFN5c3RlbUJ5SWQgPSBhd2FpdCBzeXN0ZW1TZXJ2aWNlLmdldFN5c3RlbUJ5SWRTZXJ2aWNlKFxuICAgIHJlcS5wYXJhbXMuc3lzdGVtSWRcbiAgKTtcblxuICBpZiAocmVzdWx0RmluZFN5c3RlbUJ5SWQuc3RhdHVzID09PSBcImVycm9yXCIpe1xuICAgIHJldHVybiByZXNcbiAgICAgIC5zdGF0dXMoXG4gICAgICAgIHJlc3VsdEZpbmRTeXN0ZW1CeUlkLnN0YXR1c0NvZGUgPyByZXN1bHRGaW5kU3lzdGVtQnlJZC5zdGF0dXNDb2RlIDogNDAwXG4gICAgICApXG4gICAgICAuanNvbih7IG1lc3NhZ2U6IHJlc3VsdEZpbmRTeXN0ZW1CeUlkLmVyci5tZXNzYWdlIH0pO1xuICAgIH1cblxuICBjb25zdCBjdXN0b21lckNvbnRhY3RJbmRleCA9IHJlc3VsdEZpbmRTeXN0ZW1CeUlkLmRhdGEuX2lkXG5cbiAgaWYgKFxuICAgIGN1c3RvbWVyQ29udGFjdEluZGV4ICYmXG4gICAgcmVzdWx0RmluZFN5c3RlbUJ5SWQuZGF0YT8ubGlzdEN1c3RvbWVyQ29udGFjdC5sZW5ndGggPiAwJiZcbiAgICByZXN1bHRGaW5kU3lzdGVtQnlJZC5kYXRhPy5saXN0Q3VzdG9tZXJDb250YWN0Py5maW5kKGN1c3RvbWVyQ29udGFjdEluZGV4KVxuICApIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgbWVzc2FnZTogJ2N1c3RvbWVyQ29udGFjdCBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgc3lzdGVtJ1xuICAgIH0pO1xuICB9XG4gIGNvbnN0IHJlc3VsdFVwZGF0ZVN5c3RlbSA9IGF3YWl0IHN5c3RlbVNlcnZpY2UudXBkYXRlU3lzdGVtU2VydmljZShcbiAgICB7ICRwdXNoOiB7IGxpc3RDdXN0b21lckNvbnRhY3Q6IHJlcS5ib2R5LmlkIH0gfSxcbiAgICByZXN1bHRGaW5kU3lzdGVtQnlJZC5kYXRhLl9pZFxuICApO1xuICBpZiAocmVzdWx0VXBkYXRlU3lzdGVtLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnKSB7XG5yZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oe1xuICAgICAgZGF0YTogcmVzdWx0VXBkYXRlU3lzdGVtLmRhdGFcbiAgICB9KTtcbn1cbiAgaWYgKHJlc3VsdFVwZGF0ZVN5c3RlbS5zdGF0dXMgPT09ICdlcnJvcicpIHtcbnJldHVybiByZXNcbiAgICAgIC5zdGF0dXMoXG4gICAgICAgIHJlc3VsdFVwZGF0ZVN5c3RlbS5zdGF0dXNDb2RlID8gcmVzdWx0VXBkYXRlU3lzdGVtLnN0YXR1c0NvZGUgOiA0MDBcbiAgICAgIClcbiAgICAgIC5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogcmVzdWx0VXBkYXRlU3lzdGVtLmVyci5tZXNzYWdlXG4gICAgICB9KTt9XG59O1xuXG4vL2RlbGV0ZUNvbnRhY3RGcm9tU3lzXG5leHBvcnRzLmRlbGV0ZUNvbnRhY3RGUyA9IGFzeW5jIGZ1bmN0aW9uIChyZXEsIHJlcykge1xuICBjb25zdCByZXN1bHRGaW5kQ3VzdG9tZXJDb250YWN0QnlJZCA9XG4gICAgYXdhaXQgY3VzdG9tZXJDb250YWN0U2VydmljZS5nZXRDdXN0b21lckNvbnRhY3RCeUlkKHJlcS5wYXJhbXMuY3VzdG9tZXJDb250YWN0SWQpO1xuICBpZiAocmVzdWx0RmluZEN1c3RvbWVyQ29udGFjdEJ5SWQuc3RhdHVzID09IFwiZXJyb3JcIilcbiAgICByZXR1cm4gcmVzXG4gICAgICAuc3RhdHVzKFxuICAgICAgICByZXN1bHRGaW5kQ3VzdG9tZXJDb250YWN0QnlJZC5zdGF0dXNDb2RlXG4gICAgICAgICAgPyByZXN1bHRGaW5kQ3VzdG9tZXJDb250YWN0QnlJZC5zdGF0dXNDb2RlXG4gICAgICAgICAgOiA0MDBcbiAgICAgIClcbiAgICAgIC5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogcmVzdWx0RmluZEN1c3RvbWVyQ29udGFjdEJ5SWQuZXJyLm1lc3NhZ2UsXG4gICAgICB9KTtcbiAgY29uc3QgcmVzdWx0RmluZFN5c3RlbUJ5SWQgPSBhd2FpdCBzeXN0ZW1TZXJ2aWNlLmdldFN5c3RlbUJ5SWRTZXJ2aWNlKFxuICAgIHJlcS5wYXJhbXMuc3lzdGVtSWRcbiAgKTtcbiAgaWYgKHJlc3VsdEZpbmRTeXN0ZW1CeUlkLnN0YXR1cyA9PSBcImVycm9yXCIpXG4gICAgcmV0dXJuIHJlc1xuICAgICAgLnN0YXR1cyhcbiAgICAgICAgcmVzdWx0RmluZFN5c3RlbUJ5SWQuc3RhdHVzQ29kZSA/IHJlc3VsdEZpbmRTeXN0ZW1CeUlkLnN0YXR1c0NvZGUgOiA0MDBcbiAgICAgIClcbiAgICAgIC5qc29uKHsgbWVzc2FnZTogcmVzdWx0RmluZFN5c3RlbUJ5SWQuZXJyLm1lc3NhZ2UgfSk7XG4gIGxldCBpID0gMDtcbiAgaWYgKHJlc3VsdEZpbmRTeXN0ZW1CeUlkLmRhdGEubGlzdEN1c3RvbWVyQ29udGFjdC5sZW5ndGggPT0gMCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICBtZXNzYWdlOiBcImxpc3RDdXN0b21lckNvbnRhY3QgaXMgZW1wdHkgXCIsXG4gICAgfSk7XG4gIH1cbiAgbGV0IGN1c3RvbWVyQ29udGFjdEluZGV4ID0gcmVzdWx0RmluZFN5c3RlbUJ5SWQuZGF0YS5saXN0Q3VzdG9tZXJDb250YWN0LmZpbmQoXG4gICAgKGUpID0+IHtcbiAgICAgIHJldHVybiBlID09IHJlcS5wYXJhbXMuY3VzdG9tZXJDb250YWN0SWQ7XG4gICAgfVxuICApO1xuXG4gIGlmIChcbiAgICAhY3VzdG9tZXJDb250YWN0SW5kZXggJiZcbiAgICByZXN1bHRGaW5kU3lzdGVtQnlJZC5kYXRhLmxpc3RDdXN0b21lckNvbnRhY3QubGVuZ3RoID4gMFxuICApIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgbWVzc2FnZTogXCJjdXN0b21lckNvbnRhY3QgZG9lc24ndCBleGlzdCBpbiB0aGUgc3lzdGVtXCIsXG4gICAgfSk7XG4gIH1cbiAgY29uc3QgZmlsdGVyQXJyYXkgPSByZXN1bHRGaW5kU3lzdGVtQnlJZC5kYXRhLmxpc3RDdXN0b21lckNvbnRhY3QuZmlsdGVyKFxuICAgIChlKSA9PiB7XG4gICAgICByZXR1cm4gZSAhPSByZXEucGFyYW1zLmN1c3RvbWVyQ29udGFjdElkO1xuICAgIH1cbiAgKTtcbiAgY29uc3QgcmVzdWx0VXBkYXRlU3lzdGVtID0gYXdhaXQgc3lzdGVtU2VydmljZS51cGRhdGVTeXN0ZW1TZXJ2aWNlKFxuICAgIHtcbiAgICAgIC4uLnJlc3VsdEZpbmRTeXN0ZW1CeUlkLmRhdGEsXG4gICAgICBsaXN0Q3VzdG9tZXJDb250YWN0OiBmaWx0ZXJBcnJheSxcbiAgICB9LFxuICAgIHJlcS5wYXJhbXMuc3lzdGVtSWRcbiAgKTtcbiAgaWYgKHJlc3VsdFVwZGF0ZVN5c3RlbS5zdGF0dXMgPT0gXCJzdWNjZXNzXCIpXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcbiAgICAgIGRhdGE6IHJlc3VsdFVwZGF0ZVN5c3RlbS5kYXRhLFxuICAgIH0pO1xuICBpZiAocmVzdWx0VXBkYXRlU3lzdGVtLnN0YXR1cyA9PSBcImVycm9yXCIpXG4gICAgcmV0dXJuIHJlc1xuICAgICAgLnN0YXR1cyhcbiAgICAgICAgcmVzdWx0VXBkYXRlU3lzdGVtLnN0YXR1c0NvZGUgPyByZXN1bHRVcGRhdGVTeXN0ZW0uc3RhdHVzQ29kZSA6IDQwMFxuICAgICAgKVxuICAgICAgLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiByZXN1bHRVcGRhdGVTeXN0ZW0uZXJyLm1lc3NhZ2UsXG4gICAgICB9KTtcbn07XG5cbi8vIGdldCBVbmFzc2lnbmVkIEN1c3RvbWVyIENvbnRhY3QgQnkgU3lzdGVtXG5cbmV4cG9ydHMuZ2V0VW5hc3NpZ25lZEN1c3RvbWVyQ29udGFjdEJ5U3lzdGVtID0gYXN5bmMgZnVuY3Rpb24gKHJlcSwgcmVzKSB7XG4gIGNvbnN0IHJlc3VsdCA9XG4gICAgYXdhaXQgY3VzdG9tZXJDb250YWN0U2VydmljZS5nZXRVbmFzc2lnbmVkQ3VzdG9tZXJDb250YWN0QnlTeXN0ZW0oXG4gICAgICByZXEucGFyYW1zLmN1c3RvbWVySWQsXG4gICAgICByZXEucGFyYW1zLnN5c3RlbUlkXG4gICAgKTtcbiAgaWYgKHJlc3VsdC5zdGF0dXMgPT0gXCJzdWNjZXNzXCIpXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgIGRhdGE6IHJlc3VsdC5kYXRhLFxuICAgIH0pO1xuICBpZiAocmVzdWx0LnN0YXR1cyA9PSBcImVycm9yXCIpXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMocmVzdWx0LnN0YXR1c0NvZGUgPyByZXN1bHQuc3RhdHVzQ29kZSA6IDQwMCkuanNvbih7XG4gICAgICBtZXNzYWdlOiByZXN1bHQuZXJyLm1lc3NhZ2UsXG4gICAgfSk7XG59O1xuIl19