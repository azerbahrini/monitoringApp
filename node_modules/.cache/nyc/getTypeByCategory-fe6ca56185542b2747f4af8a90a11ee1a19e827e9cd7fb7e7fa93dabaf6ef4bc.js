function cov_2fzuq1smq5(){var path="/home/azer/Desktop/jenkins/app/monitoringApp/services/client/getTypeByCategory.js";var hash="6e905cfa988bb51de035dbf8925cd34f0eb8e9ab";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/azer/Desktop/jenkins/app/monitoringApp/services/client/getTypeByCategory.js",statementMap:{"0":{start:{line:1,column:17},end:{line:1,column:49}},"1":{start:{line:2,column:15},end:{line:2,column:45}},"2":{start:{line:3,column:0},end:{line:61,column:2}},"3":{start:{line:4,column:2},end:{line:60,column:3}},"4":{start:{line:5,column:23},end:{line:5,column:65}},"5":{start:{line:6,column:22},end:{line:45,column:6}},"6":{start:{line:7,column:26},end:{line:9,column:51}},"7":{start:{line:10,column:23},end:{line:14,column:7}},"8":{start:{line:12,column:10},end:{line:12,column:42}},"9":{start:{line:15,column:21},end:{line:23,column:7}},"10":{start:{line:18,column:12},end:{line:18,column:29}},"11":{start:{line:21,column:12},end:{line:21,column:65}},"12":{start:{line:25,column:30},end:{line:33,column:8}},"13":{start:{line:26,column:33},end:{line:28,column:27}},"14":{start:{line:29,column:8},end:{line:32,column:10}},"15":{start:{line:34,column:39},end:{line:38,column:7}},"16":{start:{line:36,column:10},end:{line:36,column:21}},"17":{start:{line:39,column:37},end:{line:39,column:67}},"18":{start:{line:41,column:6},end:{line:44,column:8}},"19":{start:{line:46,column:18},end:{line:48,column:6}},"20":{start:{line:47,column:6},end:{line:47,column:17}},"21":{start:{line:49,column:17},end:{line:49,column:49}},"22":{start:{line:51,column:4},end:{line:54,column:6}},"23":{start:{line:56,column:4},end:{line:59,column:6}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:3,column:17},end:{line:3,column:18}},loc:{start:{line:3,column:29},end:{line:61,column:1}},line:3},"1":{name:"(anonymous_1)",decl:{start:{line:6,column:49},end:{line:6,column:50}},loc:{start:{line:6,column:69},end:{line:45,column:5}},line:6},"2":{name:"(anonymous_2)",decl:{start:{line:11,column:27},end:{line:11,column:28}},loc:{start:{line:11,column:37},end:{line:13,column:9}},line:11},"3":{name:"(anonymous_3)",decl:{start:{line:17,column:15},end:{line:17,column:16}},loc:{start:{line:17,column:25},end:{line:19,column:11}},line:17},"4":{name:"(anonymous_4)",decl:{start:{line:20,column:18},end:{line:20,column:19}},loc:{start:{line:20,column:31},end:{line:22,column:11}},line:20},"5":{name:"(anonymous_5)",decl:{start:{line:25,column:43},end:{line:25,column:44}},loc:{start:{line:25,column:59},end:{line:33,column:7}},line:25},"6":{name:"(anonymous_6)",decl:{start:{line:35,column:8},end:{line:35,column:9}},loc:{start:{line:35,column:17},end:{line:37,column:9}},line:35},"7":{name:"(anonymous_7)",decl:{start:{line:46,column:46},end:{line:46,column:47}},loc:{start:{line:46,column:55},end:{line:48,column:5}},line:46}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6e905cfa988bb51de035dbf8925cd34f0eb8e9ab"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2fzuq1smq5=function(){return actualCoverage;};}return actualCoverage;}cov_2fzuq1smq5();const Category=(cov_2fzuq1smq5().s[0]++,require("../../models/Category"));const System=(cov_2fzuq1smq5().s[1]++,require("../../models/System"));cov_2fzuq1smq5().s[2]++;module.exports=async()=>{cov_2fzuq1smq5().f[0]++;cov_2fzuq1smq5().s[3]++;try{const categories=(cov_2fzuq1smq5().s[4]++,await Category.find({}).select("category"));const listTypes=(cov_2fzuq1smq5().s[5]++,categories.slice(0,3).map(async category=>{cov_2fzuq1smq5().f[1]++;const systemItems=(cov_2fzuq1smq5().s[6]++,await System.find({category:category._id}).select("type").populate({path:"type",select:"type"}));let listTypeId=(cov_2fzuq1smq5().s[7]++,[...systemItems.map(elem=>{cov_2fzuq1smq5().f[2]++;cov_2fzuq1smq5().s[8]++;return elem.type._id.toString();})]);let listType=(cov_2fzuq1smq5().s[9]++,[...systemItems.map(elem=>{cov_2fzuq1smq5().f[3]++;cov_2fzuq1smq5().s[10]++;return elem.type;}).filter((type,i)=>{cov_2fzuq1smq5().f[4]++;cov_2fzuq1smq5().s[11]++;return listTypeId.indexOf(type._id.toString())===i;})]);// console.log(listType);
let listSystemAndType=(cov_2fzuq1smq5().s[12]++,listType.map(async type=>{cov_2fzuq1smq5().f[5]++;const listSystemByType=(cov_2fzuq1smq5().s[13]++,await System.find({type:type}).select("system"));cov_2fzuq1smq5().s[14]++;return{type:type,listSystem:listSystemByType};}));const listSystemAndTypePromise=(cov_2fzuq1smq5().s[15]++,Promise.all(listSystemAndType).then(res=>{cov_2fzuq1smq5().f[6]++;cov_2fzuq1smq5().s[16]++;return res;}));const listSystemAndTypeValue=(cov_2fzuq1smq5().s[17]++,await listSystemAndTypePromise);cov_2fzuq1smq5().s[18]++;return{category:category,listType:[...listSystemAndTypeValue]};}));const value=(cov_2fzuq1smq5().s[19]++,Promise.all(listTypes).then(res=>{cov_2fzuq1smq5().f[7]++;cov_2fzuq1smq5().s[20]++;return res;}));var merged=(cov_2fzuq1smq5().s[21]++,[].concat.apply([],await value));cov_2fzuq1smq5().s[22]++;return{data:merged,status:"success"};}catch(err){cov_2fzuq1smq5().s[23]++;return{err,status:"error"};}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldFR5cGVCeUNhdGVnb3J5LmpzIl0sIm5hbWVzIjpbIkNhdGVnb3J5IiwicmVxdWlyZSIsIlN5c3RlbSIsIm1vZHVsZSIsImV4cG9ydHMiLCJjYXRlZ29yaWVzIiwiZmluZCIsInNlbGVjdCIsImxpc3RUeXBlcyIsInNsaWNlIiwibWFwIiwiY2F0ZWdvcnkiLCJzeXN0ZW1JdGVtcyIsIl9pZCIsInBvcHVsYXRlIiwicGF0aCIsImxpc3RUeXBlSWQiLCJlbGVtIiwidHlwZSIsInRvU3RyaW5nIiwibGlzdFR5cGUiLCJmaWx0ZXIiLCJpIiwiaW5kZXhPZiIsImxpc3RTeXN0ZW1BbmRUeXBlIiwibGlzdFN5c3RlbUJ5VHlwZSIsImxpc3RTeXN0ZW0iLCJsaXN0U3lzdGVtQW5kVHlwZVByb21pc2UiLCJQcm9taXNlIiwiYWxsIiwidGhlbiIsInJlcyIsImxpc3RTeXN0ZW1BbmRUeXBlVmFsdWUiLCJ2YWx1ZSIsIm1lcmdlZCIsImNvbmNhdCIsImFwcGx5IiwiZGF0YSIsInN0YXR1cyIsImVyciJdLCJtYXBwaW5ncyI6IjZ4R0FlWTsyRkFmWixLQUFNQSxDQUFBQSxRQUFRLDBCQUFHQyxPQUFPLENBQUMsdUJBQUQsQ0FBVixDQUFkLENBQ0EsS0FBTUMsQ0FBQUEsTUFBTSwwQkFBR0QsT0FBTyxDQUFDLHFCQUFELENBQVYsQ0FBWixDLHdCQUNBRSxNQUFNLENBQUNDLE9BQVAsQ0FBaUIsU0FBWSxpREFDM0IsR0FBSSxDQUNGLEtBQU1DLENBQUFBLFVBQVUsMEJBQUcsS0FBTUwsQ0FBQUEsUUFBUSxDQUFDTSxJQUFULENBQWMsRUFBZCxFQUFrQkMsTUFBbEIsQ0FBeUIsVUFBekIsQ0FBVCxDQUFoQixDQUNBLEtBQU1DLENBQUFBLFNBQVMsMEJBQUdILFVBQVUsQ0FBQ0ksS0FBWCxDQUFpQixDQUFqQixDQUFvQixDQUFwQixFQUF1QkMsR0FBdkIsQ0FBMkIsS0FBT0MsQ0FBQUEsUUFBUCxFQUFvQix5QkFDL0QsS0FBTUMsQ0FBQUEsV0FBVywwQkFBRyxLQUFNVixDQUFBQSxNQUFNLENBQUNJLElBQVAsQ0FBWSxDQUFFSyxRQUFRLENBQUVBLFFBQVEsQ0FBQ0UsR0FBckIsQ0FBWixFQUN2Qk4sTUFEdUIsQ0FDaEIsTUFEZ0IsRUFFdkJPLFFBRnVCLENBRWQsQ0FBRUMsSUFBSSxDQUFFLE1BQVIsQ0FBZ0JSLE1BQU0sQ0FBRSxNQUF4QixDQUZjLENBQVQsQ0FBakIsQ0FHQSxHQUFJUyxDQUFBQSxVQUFVLDBCQUFHLENBQ2YsR0FBR0osV0FBVyxDQUFDRixHQUFaLENBQWlCTyxJQUFELEVBQVUsaURBQzNCLE1BQU9BLENBQUFBLElBQUksQ0FBQ0MsSUFBTCxDQUFVTCxHQUFWLENBQWNNLFFBQWQsRUFBUCxDQUNELENBRkUsQ0FEWSxDQUFILENBQWQsQ0FLQSxHQUFJQyxDQUFBQSxRQUFRLDBCQUFHLENBQ2IsR0FBR1IsV0FBVyxDQUNYRixHQURBLENBQ0tPLElBQUQsRUFBVSxrREFDYixNQUFPQSxDQUFBQSxJQUFJLENBQUNDLElBQVosQ0FDRCxDQUhBLEVBSUFHLE1BSkEsQ0FJTyxDQUFDSCxJQUFELENBQU9JLENBQVAsR0FBYSxrREFDbkIsTUFBT04sQ0FBQUEsVUFBVSxDQUFDTyxPQUFYLENBQW1CTCxJQUFJLENBQUNMLEdBQUwsQ0FBU00sUUFBVCxFQUFuQixJQUE0Q0csQ0FBbkQsQ0FDRCxDQU5BLENBRFUsQ0FBSCxDQUFaLENBU0Q7QUFDQyxHQUFJRSxDQUFBQSxpQkFBaUIsMkJBQUdKLFFBQVEsQ0FBQ1YsR0FBVCxDQUFhLEtBQU9RLENBQUFBLElBQVAsRUFBZ0IseUJBQ25ELEtBQU1PLENBQUFBLGdCQUFnQiwyQkFBRyxLQUFNdkIsQ0FBQUEsTUFBTSxDQUFDSSxJQUFQLENBQVksQ0FDekNZLElBQUksQ0FBRUEsSUFEbUMsQ0FBWixFQUU1QlgsTUFGNEIsQ0FFckIsUUFGcUIsQ0FBVCxDQUF0QixDQURtRCx5QkFJbkQsTUFBTyxDQUNMVyxJQUFJLENBQUVBLElBREQsQ0FFTFEsVUFBVSxDQUFFRCxnQkFGUCxDQUFQLENBSUQsQ0FSdUIsQ0FBSCxDQUFyQixDQVNBLEtBQU1FLENBQUFBLHdCQUF3QiwyQkFBR0MsT0FBTyxDQUFDQyxHQUFSLENBQVlMLGlCQUFaLEVBQStCTSxJQUEvQixDQUM5QkMsR0FBRCxFQUFTLGtEQUNQLE1BQU9BLENBQUFBLEdBQVAsQ0FDRCxDQUg4QixDQUFILENBQTlCLENBS0EsS0FBTUMsQ0FBQUEsc0JBQXNCLDJCQUFHLEtBQU1MLENBQUFBLHdCQUFULENBQTVCLENBakMrRCx5QkFtQy9ELE1BQU8sQ0FDTGhCLFFBQVEsQ0FBRUEsUUFETCxDQUVMUyxRQUFRLENBQUUsQ0FBQyxHQUFHWSxzQkFBSixDQUZMLENBQVAsQ0FJRCxDQXZDaUIsQ0FBSCxDQUFmLENBd0NBLEtBQU1DLENBQUFBLEtBQUssMkJBQUdMLE9BQU8sQ0FBQ0MsR0FBUixDQUFZckIsU0FBWixFQUF1QnNCLElBQXZCLENBQTZCQyxHQUFELEVBQVMsa0RBQ2pELE1BQU9BLENBQUFBLEdBQVAsQ0FDRCxDQUZhLENBQUgsQ0FBWCxDQUdBLEdBQUlHLENBQUFBLE1BQU0sMkJBQUcsR0FBR0MsTUFBSCxDQUFVQyxLQUFWLENBQWdCLEVBQWhCLENBQW9CLEtBQU1ILENBQUFBLEtBQTFCLENBQUgsQ0FBVixDQTdDRSx5QkErQ0YsTUFBTyxDQUNMSSxJQUFJLENBQUVILE1BREQsQ0FFTEksTUFBTSxDQUFFLFNBRkgsQ0FBUCxDQUlELENBQUMsTUFBT0MsR0FBUCxDQUFZLDBCQUNaLE1BQU8sQ0FDTEEsR0FESyxDQUVMRCxNQUFNLENBQUUsT0FGSCxDQUFQLENBSUQsQ0FDRixDQTFERCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IENhdGVnb3J5ID0gcmVxdWlyZShcIi4uLy4uL21vZGVscy9DYXRlZ29yeVwiKTtcbmNvbnN0IFN5c3RlbSA9IHJlcXVpcmUoXCIuLi8uLi9tb2RlbHMvU3lzdGVtXCIpO1xubW9kdWxlLmV4cG9ydHMgPSBhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgY2F0ZWdvcmllcyA9IGF3YWl0IENhdGVnb3J5LmZpbmQoe30pLnNlbGVjdChcImNhdGVnb3J5XCIpO1xuICAgIGNvbnN0IGxpc3RUeXBlcyA9IGNhdGVnb3JpZXMuc2xpY2UoMCwgMykubWFwKGFzeW5jIChjYXRlZ29yeSkgPT4ge1xuICAgICAgY29uc3Qgc3lzdGVtSXRlbXMgPSBhd2FpdCBTeXN0ZW0uZmluZCh7IGNhdGVnb3J5OiBjYXRlZ29yeS5faWQgfSlcbiAgICAgICAgLnNlbGVjdChcInR5cGVcIilcbiAgICAgICAgLnBvcHVsYXRlKHsgcGF0aDogXCJ0eXBlXCIsIHNlbGVjdDogXCJ0eXBlXCIgfSk7XG4gICAgICBsZXQgbGlzdFR5cGVJZCA9IFtcbiAgICAgICAgLi4uc3lzdGVtSXRlbXMubWFwKChlbGVtKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGVsZW0udHlwZS5faWQudG9TdHJpbmcoKTtcbiAgICAgICAgfSksXG4gICAgICBdO1xuICAgICAgbGV0IGxpc3RUeXBlID0gW1xuICAgICAgICAuLi5zeXN0ZW1JdGVtc1xuICAgICAgICAgIC5tYXAoKGVsZW0pID0+IHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtLnR5cGU7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZmlsdGVyKCh0eXBlLCBpKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbGlzdFR5cGVJZC5pbmRleE9mKHR5cGUuX2lkLnRvU3RyaW5nKCkpID09PSBpO1xuICAgICAgICAgIH0pLFxuICAgICAgXTtcbiAgICAgLy8gY29uc29sZS5sb2cobGlzdFR5cGUpO1xuICAgICAgbGV0IGxpc3RTeXN0ZW1BbmRUeXBlID0gbGlzdFR5cGUubWFwKGFzeW5jICh0eXBlKSA9PiB7XG4gICAgICAgIGNvbnN0IGxpc3RTeXN0ZW1CeVR5cGUgPSBhd2FpdCBTeXN0ZW0uZmluZCh7XG4gICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgfSkuc2VsZWN0KFwic3lzdGVtXCIpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgICAgbGlzdFN5c3RlbTogbGlzdFN5c3RlbUJ5VHlwZSxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgICAgY29uc3QgbGlzdFN5c3RlbUFuZFR5cGVQcm9taXNlID0gUHJvbWlzZS5hbGwobGlzdFN5c3RlbUFuZFR5cGUpLnRoZW4oXG4gICAgICAgIChyZXMpID0+IHtcbiAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgY29uc3QgbGlzdFN5c3RlbUFuZFR5cGVWYWx1ZSA9IGF3YWl0IGxpc3RTeXN0ZW1BbmRUeXBlUHJvbWlzZTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY2F0ZWdvcnk6IGNhdGVnb3J5LFxuICAgICAgICBsaXN0VHlwZTogWy4uLmxpc3RTeXN0ZW1BbmRUeXBlVmFsdWVdLFxuICAgICAgfTtcbiAgICB9KTtcbiAgICBjb25zdCB2YWx1ZSA9IFByb21pc2UuYWxsKGxpc3RUeXBlcykudGhlbigocmVzKSA9PiB7XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH0pO1xuICAgIHZhciBtZXJnZWQgPSBbXS5jb25jYXQuYXBwbHkoW10sIGF3YWl0IHZhbHVlKTtcblxuICAgIHJldHVybiB7XG4gICAgICBkYXRhOiBtZXJnZWQsXG4gICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiB7XG4gICAgICBlcnIsXG4gICAgICBzdGF0dXM6IFwiZXJyb3JcIixcbiAgICB9O1xuICB9XG59O1xuIl19