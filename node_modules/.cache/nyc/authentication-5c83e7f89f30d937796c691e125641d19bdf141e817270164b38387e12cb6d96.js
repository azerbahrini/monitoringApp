function cov_1h5jb2iik2(){var path="/home/azer/Desktop/jenkins/app/monitoringApp/middleware/authentication.js";var hash="2ca235648c32882caa804c78e28277afb97aad66";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/azer/Desktop/jenkins/app/monitoringApp/middleware/authentication.js",statementMap:{"0":{start:{line:1,column:12},end:{line:1,column:35}},"1":{start:{line:2,column:0},end:{line:2,column:27}},"2":{start:{line:3,column:15},end:{line:3,column:42}},"3":{start:{line:5,column:0},end:{line:76,column:2}},"4":{start:{line:8,column:22},end:{line:8,column:54}},"5":{start:{line:9,column:23},end:{line:9,column:56}},"6":{start:{line:12,column:2},end:{line:14,column:3}},"7":{start:{line:13,column:4},end:{line:13,column:80}},"8":{start:{line:17,column:2},end:{line:75,column:3}},"9":{start:{line:18,column:4},end:{line:71,column:7}},"10":{start:{line:19,column:6},end:{line:70,column:7}},"11":{start:{line:20,column:8},end:{line:52,column:9}},"12":{start:{line:21,column:10},end:{line:49,column:12}},"13":{start:{line:22,column:12},end:{line:48,column:13}},"14":{start:{line:23,column:14},end:{line:23,column:77}},"15":{start:{line:27,column:38},end:{line:31,column:17}},"16":{start:{line:32,column:41},end:{line:34,column:18}},"17":{start:{line:36,column:42},end:{line:38,column:18}},"18":{start:{line:39,column:16},end:{line:41,column:18}},"19":{start:{line:42,column:16},end:{line:42,column:51}},"20":{start:{line:43,column:16},end:{line:43,column:53}},"21":{start:{line:44,column:16},end:{line:44,column:22}},"22":{start:{line:51,column:10},end:{line:51,column:73}},"23":{start:{line:56,column:33},end:{line:60,column:11}},"24":{start:{line:61,column:36},end:{line:63,column:12}},"25":{start:{line:64,column:10},end:{line:64,column:34}},"26":{start:{line:65,column:10},end:{line:65,column:47}},"27":{start:{line:66,column:10},end:{line:66,column:16}},"28":{start:{line:73,column:4},end:{line:73,column:70}},"29":{start:{line:74,column:4},end:{line:74,column:61}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:5,column:17},end:{line:5,column:18}},loc:{start:{line:5,column:37},end:{line:76,column:1}},line:5},"1":{name:"(anonymous_1)",decl:{start:{line:18,column:51},end:{line:18,column:52}},loc:{start:{line:18,column:71},end:{line:71,column:5}},line:18},"2":{name:"(anonymous_2)",decl:{start:{line:21,column:58},end:{line:21,column:59}},loc:{start:{line:21,column:92},end:{line:49,column:11}},line:21}},branchMap:{"0":{loc:{start:{line:12,column:2},end:{line:14,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:14,column:3}},{start:{line:12,column:2},end:{line:14,column:3}}],line:12},"1":{loc:{start:{line:12,column:6},end:{line:12,column:35}},type:"binary-expr",locations:[{start:{line:12,column:6},end:{line:12,column:18}},{start:{line:12,column:22},end:{line:12,column:35}}],line:12},"2":{loc:{start:{line:19,column:6},end:{line:70,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:70,column:7}},{start:{line:19,column:6},end:{line:70,column:7}}],line:19},"3":{loc:{start:{line:20,column:8},end:{line:52,column:9}},type:"if",locations:[{start:{line:20,column:8},end:{line:52,column:9}},{start:{line:20,column:8},end:{line:52,column:9}}],line:20},"4":{loc:{start:{line:22,column:12},end:{line:48,column:13}},type:"if",locations:[{start:{line:22,column:12},end:{line:48,column:13}},{start:{line:22,column:12},end:{line:48,column:13}}],line:22}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2ca235648c32882caa804c78e28277afb97aad66"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1h5jb2iik2=function(){return actualCoverage;};}return actualCoverage;}cov_1h5jb2iik2();const jwt=(cov_1h5jb2iik2().s[0]++,require('jsonwebtoken'));cov_1h5jb2iik2().s[1]++;require('dotenv').config();const logger=(cov_1h5jb2iik2().s[2]++,require('../config/logger'));cov_1h5jb2iik2().s[3]++;module.exports=(req,res,next)=>{cov_1h5jb2iik2().f[0]++;// Get tokens from header
const accessToken=(cov_1h5jb2iik2().s[4]++,req.header('x-auth-accessToken'));const refreshToken=(cov_1h5jb2iik2().s[5]++,req.header('x-auth-refreshToken'));// Check if not token
cov_1h5jb2iik2().s[6]++;if((cov_1h5jb2iik2().b[1][0]++,!accessToken)||(cov_1h5jb2iik2().b[1][1]++,!refreshToken)){cov_1h5jb2iik2().b[0][0]++;cov_1h5jb2iik2().s[7]++;return res.status(401).json({message:'No Token, authentication denied'});}else{cov_1h5jb2iik2().b[0][1]++;}// Verify Tokens
cov_1h5jb2iik2().s[8]++;try{cov_1h5jb2iik2().s[9]++;jwt.verify(accessToken,process.env.JWTSECRET,(error,decoded)=>{cov_1h5jb2iik2().f[1]++;cov_1h5jb2iik2().s[10]++;if(error){cov_1h5jb2iik2().b[2][0]++;cov_1h5jb2iik2().s[11]++;if(error.name==='TokenExpiredError'){cov_1h5jb2iik2().b[3][0]++;cov_1h5jb2iik2().s[12]++;jwt.verify(refreshToken,process.env.JWTSECRET,(errorRefresh,decodedRefresh)=>{cov_1h5jb2iik2().f[2]++;cov_1h5jb2iik2().s[13]++;if(errorRefresh){cov_1h5jb2iik2().b[4][0]++;cov_1h5jb2iik2().s[14]++;return res.status(401).json({message:'Token is not valid'});}else{cov_1h5jb2iik2().b[4][1]++;// if (decoded.user.ip === req.ip) {
//Generate access token
const payloadAccess=(cov_1h5jb2iik2().s[15]++,{user:{id:decodedRefresh.user.id}});const accessTokenValue=(cov_1h5jb2iik2().s[16]++,jwt.sign(payloadAccess,process.env.JWTSECRET,{expiresIn:'10h'}));//Generate refresh token
const refreshTokenValue=(cov_1h5jb2iik2().s[17]++,jwt.sign(payloadAccess,process.env.JWTSECRET,{expiresIn:'2h'}));cov_1h5jb2iik2().s[18]++;req.user={id:decoded.user.id};cov_1h5jb2iik2().s[19]++;req.accessToken=accessTokenValue;cov_1h5jb2iik2().s[20]++;req.refreshToken=refreshTokenValue;cov_1h5jb2iik2().s[21]++;next();// } else {
//   return res.status(401).json({ message: 'Token is not valid' });
// }
}});}else{cov_1h5jb2iik2().b[3][1]++;cov_1h5jb2iik2().s[22]++;return res.status(401).json({message:'Token is not valid'});}}else{cov_1h5jb2iik2().b[2][1]++;// if (decoded.user.ip === req.ip) { 
//Generate refresh token
const payloadRefresh=(cov_1h5jb2iik2().s[23]++,{user:{id:decoded.user.id}});const refreshTokenValue=(cov_1h5jb2iik2().s[24]++,jwt.sign(payloadRefresh,process.env.JWTSECRET,{expiresIn:'2h'}));cov_1h5jb2iik2().s[25]++;req.user=decoded.user;cov_1h5jb2iik2().s[26]++;req.refreshToken=refreshTokenValue;cov_1h5jb2iik2().s[27]++;next();// }else {
//   return res.status(401).json({ message: 'Token is not valid' });
// }
}});}catch(err){cov_1h5jb2iik2().s[28]++;logger.error('something wrong with auth middleware',err.message);cov_1h5jb2iik2().s[29]++;return res.status(500).json({message:'Server Error'});}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhlbnRpY2F0aW9uLmpzIl0sIm5hbWVzIjpbImp3dCIsInJlcXVpcmUiLCJjb25maWciLCJsb2dnZXIiLCJtb2R1bGUiLCJleHBvcnRzIiwicmVxIiwicmVzIiwibmV4dCIsImFjY2Vzc1Rva2VuIiwiaGVhZGVyIiwicmVmcmVzaFRva2VuIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJ2ZXJpZnkiLCJwcm9jZXNzIiwiZW52IiwiSldUU0VDUkVUIiwiZXJyb3IiLCJkZWNvZGVkIiwibmFtZSIsImVycm9yUmVmcmVzaCIsImRlY29kZWRSZWZyZXNoIiwicGF5bG9hZEFjY2VzcyIsInVzZXIiLCJpZCIsImFjY2Vzc1Rva2VuVmFsdWUiLCJzaWduIiwiZXhwaXJlc0luIiwicmVmcmVzaFRva2VuVmFsdWUiLCJwYXlsb2FkUmVmcmVzaCIsImVyciJdLCJtYXBwaW5ncyI6Imc1SEFlWTsyRkFmWixLQUFNQSxDQUFBQSxHQUFHLDBCQUFHQyxPQUFPLENBQUMsY0FBRCxDQUFWLENBQVQsQyx3QkFDQUEsT0FBTyxDQUFDLFFBQUQsQ0FBUCxDQUFrQkMsTUFBbEIsR0FDQSxLQUFNQyxDQUFBQSxNQUFNLDBCQUFHRixPQUFPLENBQUMsa0JBQUQsQ0FBVixDQUFaLEMsd0JBRUFHLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixDQUFDQyxHQUFELENBQU1DLEdBQU4sQ0FBV0MsSUFBWCxHQUFvQix5QkFFbkM7QUFDQSxLQUFNQyxDQUFBQSxXQUFXLDBCQUFHSCxHQUFHLENBQUNJLE1BQUosQ0FBVyxvQkFBWCxDQUFILENBQWpCLENBQ0EsS0FBTUMsQ0FBQUEsWUFBWSwwQkFBR0wsR0FBRyxDQUFDSSxNQUFKLENBQVcscUJBQVgsQ0FBSCxDQUFsQixDQUVBO0FBTm1DLHdCQU9uQyxHQUFJLDZCQUFDRCxXQUFELCtCQUFnQixDQUFDRSxZQUFqQixDQUFKLENBQW1DLG9EQUNqQyxNQUFPSixDQUFBQSxHQUFHLENBQUNLLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixD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LElBQWhCLENBQXFCLENBQUVDLE9BQU8sQ0FBRSxjQUFYLENBQXJCLENBQVAsQ0FDRCxDQUNGLENBdkVEIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XG5yZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKTtcbmNvbnN0IGxvZ2dlciA9IHJlcXVpcmUoJy4uL2NvbmZpZy9sb2dnZXInKTtcblxubW9kdWxlLmV4cG9ydHMgPSAocmVxLCByZXMsIG5leHQpID0+IHtcblxuICAvLyBHZXQgdG9rZW5zIGZyb20gaGVhZGVyXG4gIGNvbnN0IGFjY2Vzc1Rva2VuID0gcmVxLmhlYWRlcigneC1hdXRoLWFjY2Vzc1Rva2VuJyk7XG4gIGNvbnN0IHJlZnJlc2hUb2tlbiA9IHJlcS5oZWFkZXIoJ3gtYXV0aC1yZWZyZXNoVG9rZW4nKTtcblxuICAvLyBDaGVjayBpZiBub3QgdG9rZW5cbiAgaWYgKCFhY2Nlc3NUb2tlbiB8fCAhcmVmcmVzaFRva2VuKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ05vIFRva2VuLCBhdXRoZW50aWNhdGlvbiBkZW5pZWQnIH0pO1xuICB9XG5cbiAgLy8gVmVyaWZ5IFRva2Vuc1xuICB0cnkge1xuICAgIGp3dC52ZXJpZnkoYWNjZXNzVG9rZW4sIHByb2Nlc3MuZW52LkpXVFNFQ1JFVCwgKGVycm9yLCBkZWNvZGVkKSA9PiB7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdUb2tlbkV4cGlyZWRFcnJvcicpIHtcbiAgICAgICAgICBqd3QudmVyaWZ5KHJlZnJlc2hUb2tlbiwgcHJvY2Vzcy5lbnYuSldUU0VDUkVULCAoZXJyb3JSZWZyZXNoLCBkZWNvZGVkUmVmcmVzaCkgPT4ge1xuICAgICAgICAgICAgaWYgKGVycm9yUmVmcmVzaCkge1xuICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVG9rZW4gaXMgbm90IHZhbGlkJyB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIGlmIChkZWNvZGVkLnVzZXIuaXAgPT09IHJlcS5pcCkge1xuICAgICAgICAgICAgICAgIC8vR2VuZXJhdGUgYWNjZXNzIHRva2VuXG4gICAgICAgICAgICAgICAgY29uc3QgcGF5bG9hZEFjY2VzcyA9IHtcbiAgICAgICAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGRlY29kZWRSZWZyZXNoLnVzZXIuaWRcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuVmFsdWUgPSBqd3Quc2lnbihwYXlsb2FkQWNjZXNzLCBwcm9jZXNzLmVudi5KV1RTRUNSRVQsIHtcbiAgICAgICAgICAgICAgICAgIGV4cGlyZXNJbjogJzEwaCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvL0dlbmVyYXRlIHJlZnJlc2ggdG9rZW5cbiAgICAgICAgICAgICAgICBjb25zdCByZWZyZXNoVG9rZW5WYWx1ZSA9IGp3dC5zaWduKHBheWxvYWRBY2Nlc3MsIHByb2Nlc3MuZW52LkpXVFNFQ1JFVCwge1xuICAgICAgICAgICAgICAgICAgZXhwaXJlc0luOiAnMmgnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmVxLnVzZXIgPSB7XG4gICAgICAgICAgICAgICAgICBpZDogZGVjb2RlZC51c2VyLmlkXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXEuYWNjZXNzVG9rZW4gPSBhY2Nlc3NUb2tlblZhbHVlO1xuICAgICAgICAgICAgICAgIHJlcS5yZWZyZXNoVG9rZW4gPSByZWZyZXNoVG9rZW5WYWx1ZTtcbiAgICAgICAgICAgICAgICBuZXh0KClcbiAgICAgICAgICAgICAgLy8gfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVG9rZW4gaXMgbm90IHZhbGlkJyB9KTtcbiAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1Rva2VuIGlzIG5vdCB2YWxpZCcgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgLy8gaWYgKGRlY29kZWQudXNlci5pcCA9PT0gcmVxLmlwKSB7IFxuICAgICAgICAgIC8vR2VuZXJhdGUgcmVmcmVzaCB0b2tlblxuICAgICAgICAgIGNvbnN0IHBheWxvYWRSZWZyZXNoID0ge1xuICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICBpZDogZGVjb2RlZC51c2VyLmlkXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgICBjb25zdCByZWZyZXNoVG9rZW5WYWx1ZSA9IGp3dC5zaWduKHBheWxvYWRSZWZyZXNoLCBwcm9jZXNzLmVudi5KV1RTRUNSRVQsIHtcbiAgICAgICAgICAgIGV4cGlyZXNJbjogJzJoJ1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJlcS51c2VyID0gZGVjb2RlZC51c2VyO1xuICAgICAgICAgIHJlcS5yZWZyZXNoVG9rZW4gPSByZWZyZXNoVG9rZW5WYWx1ZTtcbiAgICAgICAgICBuZXh0KClcbiAgICAgICAgLy8gfWVsc2Uge1xuICAgICAgICAvLyAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdUb2tlbiBpcyBub3QgdmFsaWQnIH0pO1xuICAgICAgICAvLyB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGxvZ2dlci5lcnJvcignc29tZXRoaW5nIHdyb25nIHdpdGggYXV0aCBtaWRkbGV3YXJlJywgZXJyLm1lc3NhZ2UpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdTZXJ2ZXIgRXJyb3InIH0pO1xuICB9XG59O1xuIl19