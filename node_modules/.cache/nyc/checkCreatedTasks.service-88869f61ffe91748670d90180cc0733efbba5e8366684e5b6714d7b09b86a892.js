function cov_jw25bvhqs(){var path="/home/azer/Desktop/jenkins/app/monitoringApp/services/task/checkCreatedTasks.service.js";var hash="7963796a6b79e754d3340061508b8fcec93f1890";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/azer/Desktop/jenkins/app/monitoringApp/services/task/checkCreatedTasks.service.js",statementMap:{"0":{start:{line:2,column:13},end:{line:2,column:41}},"1":{start:{line:3,column:15},end:{line:3,column:32}},"2":{start:{line:4,column:17},end:{line:4,column:43}},"3":{start:{line:6,column:0},end:{line:46,column:2}},"4":{start:{line:7,column:2},end:{line:45,column:3}},"5":{start:{line:8,column:18},end:{line:8,column:45}},"6":{start:{line:9,column:16},end:{line:9,column:41}},"7":{start:{line:10,column:26},end:{line:10,column:28}},"8":{start:{line:11,column:29},end:{line:11,column:31}},"9":{start:{line:12,column:23},end:{line:18,column:5}},"10":{start:{line:19,column:28},end:{line:29,column:18}},"11":{start:{line:30,column:4},end:{line:40,column:7}},"12":{start:{line:31,column:18},end:{line:31,column:23}},"13":{start:{line:32,column:6},end:{line:38,column:9}},"14":{start:{line:33,column:8},end:{line:37,column:9}},"15":{start:{line:35,column:10},end:{line:35,column:23}},"16":{start:{line:36,column:10},end:{line:36,column:113}},"17":{start:{line:39,column:6},end:{line:39,column:46}},"18":{start:{line:42,column:4},end:{line:42,column:102}},"19":{start:{line:44,column:4},end:{line:44,column:36}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:17},end:{line:6,column:18}},loc:{start:{line:6,column:95},end:{line:46,column:1}},line:6},"1":{name:"(anonymous_1)",decl:{start:{line:30,column:27},end:{line:30,column:28}},loc:{start:{line:30,column:38},end:{line:40,column:5}},line:30},"2":{name:"(anonymous_2)",decl:{start:{line:32,column:30},end:{line:32,column:31}},loc:{start:{line:32,column:38},end:{line:38,column:7}},line:32}},branchMap:{"0":{loc:{start:{line:12,column:23},end:{line:18,column:5}},type:"cond-expr",locations:[{start:{line:12,column:49},end:{line:14,column:5}},{start:{line:14,column:6},end:{line:18,column:5}}],line:12},"1":{loc:{start:{line:33,column:8},end:{line:37,column:9}},type:"if",locations:[{start:{line:33,column:8},end:{line:37,column:9}},{start:{line:33,column:8},end:{line:37,column:9}}],line:33},"2":{loc:{start:{line:33,column:12},end:{line:34,column:102}},type:"binary-expr",locations:[{start:{line:33,column:12},end:{line:33,column:62}},{start:{line:34,column:8},end:{line:34,column:102}}],line:33},"3":{loc:{start:{line:39,column:6},end:{line:39,column:45}},type:"binary-expr",locations:[{start:{line:39,column:6},end:{line:39,column:12}},{start:{line:39,column:16},end:{line:39,column:45}}],line:39},"4":{loc:{start:{line:42,column:19},end:{line:42,column:80}},type:"cond-expr",locations:[{start:{line:42,column:45},end:{line:42,column:60}},{start:{line:42,column:61},end:{line:42,column:80}}],line:42}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7963796a6b79e754d3340061508b8fcec93f1890"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_jw25bvhqs=function(){return actualCoverage;};}return actualCoverage;}cov_jw25bvhqs();//Model Object
const Task=(cov_jw25bvhqs().s[0]++,require("../../models/Task"));const moment=(cov_jw25bvhqs().s[1]++,require('moment'));const momentTz=(cov_jw25bvhqs().s[2]++,require('moment-timezone'));cov_jw25bvhqs().s[3]++;module.exports=async(generatedTasks,memberId,startDate,endDate,timeZone,serviceType)=>{cov_jw25bvhqs().f[0]++;cov_jw25bvhqs().s[4]++;try{const start=(cov_jw25bvhqs().s[5]++,new Date(moment(startDate)));const end=(cov_jw25bvhqs().s[6]++,new Date(moment(endDate)));let notCreatedTasks=(cov_jw25bvhqs().s[7]++,[]);let createdTasksfiltred=(cov_jw25bvhqs().s[8]++,[]);const conditions=(cov_jw25bvhqs().s[9]++,serviceType==="virtual"?(cov_jw25bvhqs().b[0][0]++,{estimatedStart:{$gte:start,$lt:end}}):(cov_jw25bvhqs().b[0][1]++,{estimatedStart:{$gte:start,$lt:end},assignee:memberId,state:{$in:["Pending","In progress"]}}));const createdTasksAll=(cov_jw25bvhqs().s[10]++,await Task.find(conditions).populate([{path:"system",select:"name",populate:{path:"customer",select:"label"}}]).lean().exec());cov_jw25bvhqs().s[11]++;generatedTasks.forEach(element=>{cov_jw25bvhqs().f[1]++;let exist=(cov_jw25bvhqs().s[12]++,false);cov_jw25bvhqs().s[13]++;createdTasksAll.forEach(item=>{cov_jw25bvhqs().f[2]++;cov_jw25bvhqs().s[14]++;if((cov_jw25bvhqs().b[2][0]++,element?.map?.toString()===item?.map?.toString())&&(cov_jw25bvhqs().b[2][1]++,moment(element?.estimatedStart).utc().format()===moment(item?.estimatedStart).utc().format())){cov_jw25bvhqs().b[1][0]++;cov_jw25bvhqs().s[15]++;exist=true;cov_jw25bvhqs().s[16]++;createdTasksfiltred.push({...item,estimatedStart:momentTz(item.estimatedStart).tz(timeZone).format()});}else{cov_jw25bvhqs().b[1][1]++;}});cov_jw25bvhqs().s[17]++;(cov_jw25bvhqs().b[3][0]++,!exist)&&(cov_jw25bvhqs().b[3][1]++,notCreatedTasks.push(element));});cov_jw25bvhqs().s[18]++;return{data:serviceType==="virtual"?(cov_jw25bvhqs().b[4][0]++,notCreatedTasks):(cov_jw25bvhqs().b[4][1]++,createdTasksfiltred),status:"success"};}catch(err){cov_jw25bvhqs().s[19]++;return{err,status:"error"};}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoZWNrQ3JlYXRlZFRhc2tzLnNlcnZpY2UuanMiXSwibmFtZXMiOlsiVGFzayIsInJlcXVpcmUiLCJtb21lbnQiLCJtb21lbnRUeiIsIm1vZHVsZSIsImV4cG9ydHMiLCJnZW5lcmF0ZWRUYXNrcyIsIm1lbWJlcklkIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsInRpbWVab25lIiwic2VydmljZVR5cGUiLCJzdGFydCIsIkRhdGUiLCJlbmQiLCJub3RDcmVhdGVkVGFza3MiLCJjcmVhdGVkVGFza3NmaWx0cmVkIiwiY29uZGl0aW9ucyIsImVzdGltYXRlZFN0YXJ0IiwiJGd0ZSIsIiRsdCIsImFzc2lnbmVlIiwic3RhdGUiLCIkaW4iLCJjcmVhdGVkVGFza3NBbGwiLCJmaW5kIiwicG9wdWxhdGUiLCJwYXRoIiwic2VsZWN0IiwibGVhbiIsImV4ZWMiLCJmb3JFYWNoIiwiZWxlbWVudCIsImV4aXN0IiwiaXRlbSIsIm1hcCIsInRvU3RyaW5nIiwidXRjIiwiZm9ybWF0IiwicHVzaCIsInR6IiwiZGF0YSIsInN0YXR1cyIsImVyciJdLCJtYXBwaW5ncyI6IjYwR0FlWTt5RkFmWjtBQUNBLEtBQU1BLENBQUFBLElBQUkseUJBQUdDLE9BQU8sQ0FBQyxtQkFBRCxDQUFWLENBQVYsQ0FDQSxLQUFNQyxDQUFBQSxNQUFNLHlCQUFHRCxPQUFPLENBQUMsUUFBRCxDQUFWLENBQVosQ0FDQSxLQUFNRSxDQUFBQSxRQUFRLHlCQUFHRixPQUFPLENBQUMsaUJBQUQsQ0FBVixDQUFkLEMsdUJBRUFHLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixNQUFPQyxjQUFQLENBQXVCQyxRQUF2QixDQUFpQ0MsU0FBakMsQ0FBNENDLE9BQTVDLENBQW9EQyxRQUFwRCxDQUE4REMsV0FBOUQsR0FBOEUsK0NBQzdGLEdBQUksQ0FDRixLQUFNQyxDQUFBQSxLQUFLLHlCQUFHLEdBQUlDLENBQUFBLElBQUosQ0FBU1gsTUFBTSxDQUFDTSxTQUFELENBQWYsQ0FBSCxDQUFYLENBQ0EsS0FBTU0sQ0FBQUEsR0FBRyx5QkFBRyxHQUFJRCxDQUFBQSxJQUFKLENBQVNYLE1BQU0sQ0FBQ08sT0FBRCxDQUFmLENBQUgsQ0FBVCxDQUNBLEdBQUlNLENBQUFBLGVBQWUseUJBQUcsRUFBSCxDQUFuQixDQUNBLEdBQUlDLENBQUFBLG1CQUFtQix5QkFBRSxFQUFGLENBQXZCLENBQ0EsS0FBTUMsQ0FBQUEsVUFBVSx5QkFBR04sV0FBVyxHQUFLLFNBQWhCLDRCQUEwQixDQUMzQ08sY0FBYyxDQUFFLENBQUVDLElBQUksQ0FBRVAsS0FBUixDQUFlUSxHQUFHLENBQUVOLEdBQXBCLENBRDJCLENBQTFCLDZCQUVqQixDQUNBSSxjQUFjLENBQUUsQ0FBRUMsSUFBSSxDQUFFUCxLQUFSLENBQWVRLEdBQUcsQ0FBRU4sR0FBcEIsQ0FEaEIsQ0FFQU8sUUFBUSxDQUFFZCxRQUZWLENBR0FlLEtBQUssQ0FBRSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxTQUFELENBQVcsYUFBWCxDQUFMLENBSFAsQ0FGaUIsQ0FBSCxDQUFoQixDQU9BLEtBQU1DLENBQUFBLGVBQWUsMEJBQUcsS0FBTXhCLENBQUFBLElBQUksQ0FBQ3lCLElBQUwsQ0FBVVIsVUFBVixFQUM3QlMsUUFENkIsQ0FFNUIsQ0FDRSxDQUNFQyxJQUFJLENBQUUsUUFEUixDQUVFQyxNQUFNLENBQUUsTUFGVixDQUdFRixRQUFRLENBQUUsQ0FBRUMsSUFBSSxDQUFFLFVBQVIsQ0FBb0JDLE1BQU0sQ0FBRSxPQUE1QixDQUhaLENBREYsQ0FGNEIsRUFVN0JDLElBVjZCLEdBVXRCQyxJQVZzQixFQUFULENBQXJCLENBWkUsd0JBdUJGeEIsY0FBYyxDQUFDeUIsT0FBZixDQUF1QkMsT0FBTyxFQUFJLHdCQUNoQyxHQUFJQyxDQUFBQSxLQUFLLDBCQUFHLEtBQUgsQ0FBVCxDQURnQyx3QkFFaENULGVBQWUsQ0FBQ08sT0FBaEIsQ0FBd0JHLElBQUksRUFBSSxnREFDOUIsR0FBSSwyQkFBQUYsT0FBTyxFQUFFRyxHQUFULEVBQWNDLFFBQWQsS0FBNkJGLElBQUksRUFBRUMsR0FBTixFQUFXQyxRQUFYLEVBQTdCLDhCQUNKbEMsTUFBTSxDQUFDOEIsT0FBTyxFQUFFZCxjQUFWLENBQU4sQ0FBZ0NtQixHQUFoQyxHQUFzQ0MsTUFBdEMsS0FBbURwQyxNQUFNLENBQUNnQyxJQUFJLEVBQUVoQixjQUFQLENBQU4sQ0FBNkJtQixHQUE3QixHQUFtQ0MsTUFBbkMsRUFEL0MsQ0FBSixDQUNnRyxtREFDOUZMLEtBQUssQ0FBRyxJQUFSLENBRDhGLHdCQUU5RmpCLG1CQUFtQixDQUFDdUIsSUFBcEIsQ0FBeUIsQ0FBQyxHQUFHTCxJQUFKLENBQVNoQixjQUFjLENBQUNmLFFBQVEsQ0FBQytCLElBQUksQ0FBQ2hCLGNBQU4sQ0FBUixDQUE4QnNCLEVBQTlCLENBQWlDOUIsUUFBakMsRUFBMkM0QixNQUEzQyxFQUF4QixDQUF6QixFQUNELENBSkQsZ0NBS0QsQ0FORCxFQUZnQyx3QkFTaEMsNEJBQUNMLEtBQUQsOEJBQVVsQixlQUFlLENBQUN3QixJQUFoQixDQUFxQlAsT0FBckIsQ0FBVixFQUNELENBVkQsRUF2QkUsd0JBbUNGLE1BQU8sQ0FBRVMsSUFBSSxDQUFFOUIsV0FBVyxHQUFLLFNBQWhCLDRCQUEwQkksZUFBMUIsNkJBQTBDQyxtQkFBMUMsQ0FBUixDQUF1RTBCLE1BQU0sQ0FBRSxTQUEvRSxDQUFQLENBQ0QsQ0FBQyxNQUFPQyxHQUFQLENBQVkseUJBQ1osTUFBTyxDQUFFQSxHQUFGLENBQU9ELE1BQU0sQ0FBRSxPQUFmLENBQVAsQ0FDRCxDQUNGLENBeENEIiwic291cmNlc0NvbnRlbnQiOlsiLy9Nb2RlbCBPYmplY3RcbmNvbnN0IFRhc2sgPSByZXF1aXJlKFwiLi4vLi4vbW9kZWxzL1Rhc2tcIik7XG5jb25zdCBtb21lbnQgPSByZXF1aXJlKCdtb21lbnQnKTtcbmNvbnN0IG1vbWVudFR6ID0gcmVxdWlyZSgnbW9tZW50LXRpbWV6b25lJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gYXN5bmMgKGdlbmVyYXRlZFRhc2tzLCBtZW1iZXJJZCwgc3RhcnREYXRlLCBlbmREYXRlLHRpbWVab25lLCBzZXJ2aWNlVHlwZSkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHN0YXJ0ID0gbmV3IERhdGUobW9tZW50KHN0YXJ0RGF0ZSkpO1xuICAgIGNvbnN0IGVuZCA9IG5ldyBEYXRlKG1vbWVudChlbmREYXRlKSk7XG4gICAgbGV0IG5vdENyZWF0ZWRUYXNrcyA9IFtdO1xuICAgIGxldCBjcmVhdGVkVGFza3NmaWx0cmVkPSBbXTtcbiAgICBjb25zdCBjb25kaXRpb25zID0gc2VydmljZVR5cGUgPT09IFwidmlydHVhbFwiP3tcbiAgICAgIGVzdGltYXRlZFN0YXJ0OiB7ICRndGU6IHN0YXJ0LCAkbHQ6IGVuZCB9LFxuICAgIH06e1xuICAgICAgZXN0aW1hdGVkU3RhcnQ6IHsgJGd0ZTogc3RhcnQsICRsdDogZW5kIH0sXG4gICAgICBhc3NpZ25lZTogbWVtYmVySWQsXG4gICAgICBzdGF0ZTogeyRpbjpbXCJQZW5kaW5nXCIsXCJJbiBwcm9ncmVzc1wiXX1cbiAgICB9O1xuICAgIGNvbnN0IGNyZWF0ZWRUYXNrc0FsbCA9IGF3YWl0IFRhc2suZmluZChjb25kaXRpb25zKVxuICAgIC5wb3B1bGF0ZShcbiAgICAgIFtcbiAgICAgICAge1xuICAgICAgICAgIHBhdGg6IFwic3lzdGVtXCIsXG4gICAgICAgICAgc2VsZWN0OiBcIm5hbWVcIixcbiAgICAgICAgICBwb3B1bGF0ZTogeyBwYXRoOiBcImN1c3RvbWVyXCIsIHNlbGVjdDogXCJsYWJlbFwiIH0sXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICApXG4gICAgLmxlYW4oKS5leGVjKCk7XG4gICAgZ2VuZXJhdGVkVGFza3MuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgIGxldCBleGlzdCA9IGZhbHNlO1xuICAgICAgY3JlYXRlZFRhc2tzQWxsLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgIGlmIChlbGVtZW50Py5tYXA/LnRvU3RyaW5nKCkgPT09IGl0ZW0/Lm1hcD8udG9TdHJpbmcoKSAmJiBcbiAgICAgICAgbW9tZW50KGVsZW1lbnQ/LmVzdGltYXRlZFN0YXJ0KS51dGMoKS5mb3JtYXQoKSA9PT0gbW9tZW50KGl0ZW0/LmVzdGltYXRlZFN0YXJ0KS51dGMoKS5mb3JtYXQoKSkge1xuICAgICAgICAgIGV4aXN0ID0gdHJ1ZTtcbiAgICAgICAgICBjcmVhdGVkVGFza3NmaWx0cmVkLnB1c2goey4uLml0ZW0sZXN0aW1hdGVkU3RhcnQ6bW9tZW50VHooaXRlbS5lc3RpbWF0ZWRTdGFydCkudHoodGltZVpvbmUpLmZvcm1hdCgpfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgIWV4aXN0ICYmIG5vdENyZWF0ZWRUYXNrcy5wdXNoKGVsZW1lbnQpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHsgZGF0YTogc2VydmljZVR5cGUgPT09IFwidmlydHVhbFwiP25vdENyZWF0ZWRUYXNrczpjcmVhdGVkVGFza3NmaWx0cmVkLCBzdGF0dXM6IFwic3VjY2Vzc1wiIH07XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiB7IGVyciwgc3RhdHVzOiBcImVycm9yXCIgfTtcbiAgfVxufTtcbiJdfQ==