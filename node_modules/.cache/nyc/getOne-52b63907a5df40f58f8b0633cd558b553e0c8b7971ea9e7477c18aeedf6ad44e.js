function cov_hmv2ixb77(){var path="/home/azer/Desktop/jenkins/app/monitoringApp/services/map/getOne.js";var hash="9e1633151753394402a2f524727909a34449bf89";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/azer/Desktop/jenkins/app/monitoringApp/services/map/getOne.js",statementMap:{"0":{start:{line:1,column:12},end:{line:1,column:68}},"1":{start:{line:2,column:21},end:{line:2,column:59}},"2":{start:{line:3,column:24},end:{line:3,column:62}},"3":{start:{line:4,column:15},end:{line:4,column:32}},"4":{start:{line:6,column:0},end:{line:34,column:2}},"5":{start:{line:7,column:2},end:{line:33,column:3}},"6":{start:{line:8,column:14},end:{line:10,column:6}},"7":{start:{line:11,column:23},end:{line:11,column:31}},"8":{start:{line:12,column:29},end:{line:12,column:167}},"9":{start:{line:14,column:4},end:{line:22,column:5}},"10":{start:{line:23,column:4},end:{line:29,column:5}},"11":{start:{line:24,column:6},end:{line:28,column:8}},"12":{start:{line:30,column:4},end:{line:30,column:53}},"13":{start:{line:32,column:4},end:{line:32,column:36}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:17},end:{line:6,column:18}},loc:{start:{line:6,column:41},end:{line:34,column:1}},line:6}},branchMap:{"0":{loc:{start:{line:23,column:4},end:{line:29,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:29,column:5}},{start:{line:23,column:4},end:{line:29,column:5}}],line:23}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9e1633151753394402a2f524727909a34449bf89"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_hmv2ixb77=function(){return actualCoverage;};}return actualCoverage;}cov_hmv2ixb77();const MAP=(cov_hmv2ixb77().s[0]++,require("../../models/MonitoringActivityPlannification"));const minsToString=(cov_hmv2ixb77().s[1]++,require("../../utils/minutesToString"));const stringToMinutes=(cov_hmv2ixb77().s[2]++,require("../../utils/stringToMinutes"));const moment=(cov_hmv2ixb77().s[3]++,require('moment'));cov_hmv2ixb77().s[4]++;module.exports=async(id,timeZone)=>{cov_hmv2ixb77().f[0]++;cov_hmv2ixb77().s[5]++;try{let map=(cov_hmv2ixb77().s[6]++,await MAP.findOne({_id:id,active:true}).populate([{path:"monitoringAct",select:["_id","activity","description"]}]));let newMapFormat=(cov_hmv2ixb77().s[7]++,map._doc);let convertedStartTime=(cov_hmv2ixb77().s[8]++,stringToMinutes(moment(moment.tz(Math.floor(map.startTime/60)+':'+map.startTime%60,'HH:mm','UTC')).tz(timeZone).format('HH:mm')));cov_hmv2ixb77().s[9]++;newMapFormat={...newMapFormat,periodicity:minsToString(map.periodicity),_periodicity:minsToString(map.periodicity,false).replace('h ',':').replace('m',''),startTime:minsToString(convertedStartTime,true),_startTime:moment(minsToString(convertedStartTime,true),["h:mm A"]).format("HH:mm"),estimation:minsToString(map.estimation),_estimation:minsToString(map.estimation,false).replace('h ',':').replace('m','')};cov_hmv2ixb77().s[10]++;if(!map){cov_hmv2ixb77().b[0][0]++;cov_hmv2ixb77().s[11]++;return{err:{message:"MAP not found"},status:"error",statusCode:404};}else{cov_hmv2ixb77().b[0][1]++;}cov_hmv2ixb77().s[12]++;return{data:newMapFormat,status:"success"};}catch(err){cov_hmv2ixb77().s[13]++;return{err,status:"error"};}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldE9uZS5qcyJdLCJuYW1lcyI6WyJNQVAiLCJyZXF1aXJlIiwibWluc1RvU3RyaW5nIiwic3RyaW5nVG9NaW51dGVzIiwibW9tZW50IiwibW9kdWxlIiwiZXhwb3J0cyIsImlkIiwidGltZVpvbmUiLCJtYXAiLCJmaW5kT25lIiwiX2lkIiwiYWN0aXZlIiwicG9wdWxhdGUiLCJwYXRoIiwic2VsZWN0IiwibmV3TWFwRm9ybWF0IiwiX2RvYyIsImNvbnZlcnRlZFN0YXJ0VGltZSIsInR6IiwiTWF0aCIsImZsb29yIiwic3RhcnRUaW1lIiwiZm9ybWF0IiwicGVyaW9kaWNpdHkiLCJfcGVyaW9kaWNpdHkiLCJyZXBsYWNlIiwiX3N0YXJ0VGltZSIsImVzdGltYXRpb24iLCJfZXN0aW1hdGlvbiIsImVyciIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJzdGF0dXNDb2RlIiwiZGF0YSJdLCJtYXBwaW5ncyI6Iml5REFlWTt5RkFmWixLQUFNQSxDQUFBQSxHQUFHLHlCQUFHQyxPQUFPLENBQUMsK0NBQUQsQ0FBVixDQUFULENBQ0EsS0FBTUMsQ0FBQUEsWUFBWSx5QkFBR0QsT0FBTyxDQUFDLDZCQUFELENBQVYsQ0FBbEIsQ0FDQSxLQUFNRSxDQUFBQSxlQUFlLHlCQUFHRixPQUFPLENBQUMsNkJBQUQsQ0FBVixDQUFyQixDQUNBLEtBQU1HLENBQUFBLE1BQU0seUJBQUdILE9BQU8sQ0FBQyxRQUFELENBQVYsQ0FBWixDLHVCQUVBSSxNQUFNLENBQUNDLE9BQVAsQ0FBaUIsTUFBT0MsRUFBUCxDQUFXQyxRQUFYLEdBQXdCLCtDQUN2QyxHQUFJLENBQ0YsR0FBSUMsQ0FBQUEsR0FBRyx5QkFBRyxLQUFNVCxDQUFBQSxHQUFHLENBQUNVLE9BQUosQ0FBWSxDQUFFQyxHQUFHLENBQUVKLEVBQVAsQ0FBV0ssTUFBTSxDQUFFLElBQW5CLENBQVosRUFBdUNDLFFBQXZDLENBQWdELENBQzlELENBQUVDLElBQUksQ0FBRSxlQUFSLENBQXlCQyxNQUFNLENBQUUsQ0FBQyxLQUFELENBQVEsVUFBUixDQUFvQixhQUFwQixDQUFqQyxDQUQ4RCxDQUFoRCxDQUFULENBQVAsQ0FHQSxHQUFJQyxDQUFBQSxZQUFZLHlCQUFHUCxHQUFHLENBQUNRLElBQVAsQ0FBaEIsQ0FDQSxHQUFJQyxDQUFBQSxrQkFBa0IseUJBQUdmLGVBQWUsQ0FBQ0MsTUFBTSxDQUFDQSxNQUFNLENBQUNlLEVBQVAsQ0FBVUMsSUFBSSxDQUFDQyxLQUFMLENBQVdaLEdBQUcsQ0FBQ2EsU0FBSixDQUFnQixFQUEzQixFQUFpQyxHQUFqQyxDQUF1Q2IsR0FBRyxDQUFDYSxTQUFKLENBQWdCLEVBQWpFLENBQXFFLE9BQXJFLENBQThFLEtBQTlFLENBQUQsQ0FBTixDQUE2RkgsRUFBN0YsQ0FBZ0dYLFFBQWhHLEVBQTBHZSxNQUExRyxDQUFpSCxPQUFqSCxDQUFELENBQWxCLENBQXRCLENBTEUsdUJBT0ZQLFlBQVksQ0FBRyxDQUNiLEdBQUdBLFlBRFUsQ0FFYlEsV0FBVyxDQUFFdEIsWUFBWSxDQUFDTyxHQUFHLENBQUNlLFdBQUwsQ0FGWixDQUdiQyxZQUFZLENBQUV2QixZQUFZLENBQUNPLEdBQUcsQ0FBQ2UsV0FBTCxDQUFpQixLQUFqQixDQUFaLENBQW9DRSxPQUFwQyxDQUE0QyxJQUE1QyxDQUFrRCxHQUFsRCxFQUF1REEsT0FBdkQsQ0FBK0QsR0FBL0QsQ0FBcUUsRUFBckUsQ0FIRCxDQUliSixTQUFTLENBQUVwQixZQUFZLENBQUNnQixrQkFBRCxDQUFxQixJQUFyQixDQUpWLENBS2JTLFVBQVUsQ0FBRXZCLE1BQU0sQ0FBQ0YsWUFBWSxDQUFDZ0Isa0JBQUQsQ0FBb0IsSUFBcEIsQ0FBYixDQUF3QyxDQUFDLFFBQUQsQ0FBeEMsQ0FBTixDQUEwREssTUFBMUQsQ0FBaUUsT0FBakUsQ0FMQyxDQU1iSyxVQUFVLENBQUUxQixZQUFZLENBQUNPLEdBQUcsQ0FBQ21CLFVBQUwsQ0FOWCxDQU9iQyxXQUFXLENBQUczQixZQUFZLENBQUNPLEdBQUcsQ0FBQ21CLFVBQUwsQ0FBZ0IsS0FBaEIsQ0FBWixDQUFtQ0YsT0FBbkMsQ0FBMkMsSUFBM0MsQ0FBaUQsR0FBakQsRUFBc0RBLE9BQXRELENBQThELEdBQTlELENBQW9FLEVBQXBFLENBUEQsQ0FBZixDQVBFLHdCQWdCRixHQUFJLENBQUNqQixHQUFMLENBQVUsbURBQ1IsTUFBTyxDQUNMcUIsR0FBRyxDQUFFLENBQUVDLE9BQU8sQ0FBRSxlQUFYLENBREEsQ0FFTEMsTUFBTSxDQUFFLE9BRkgsQ0FHTEMsVUFBVSxDQUFFLEdBSFAsQ0FBUCxDQUtELENBTkQsZ0NBaEJFLHdCQXVCRixNQUFPLENBQUVDLElBQUksQ0FBRWxCLFlBQVIsQ0FBc0JnQixNQUFNLENBQUUsU0FBOUIsQ0FBUCxDQUNELENBQUMsTUFBT0YsR0FBUCxDQUFZLHlCQUNaLE1BQU8sQ0FBRUEsR0FBRixDQUFPRSxNQUFNLENBQUUsT0FBZixDQUFQLENBQ0QsQ0FDRixDQTVCRCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IE1BUCA9IHJlcXVpcmUoXCIuLi8uLi9tb2RlbHMvTW9uaXRvcmluZ0FjdGl2aXR5UGxhbm5pZmljYXRpb25cIik7XG5jb25zdCBtaW5zVG9TdHJpbmcgPSByZXF1aXJlKFwiLi4vLi4vdXRpbHMvbWludXRlc1RvU3RyaW5nXCIpO1xuY29uc3Qgc3RyaW5nVG9NaW51dGVzID0gcmVxdWlyZShcIi4uLy4uL3V0aWxzL3N0cmluZ1RvTWludXRlc1wiKTtcbmNvbnN0IG1vbWVudCA9IHJlcXVpcmUoJ21vbWVudCcpXG5cbm1vZHVsZS5leHBvcnRzID0gYXN5bmMgKGlkLCB0aW1lWm9uZSkgPT4ge1xuICB0cnkge1xuICAgIGxldCBtYXAgPSBhd2FpdCBNQVAuZmluZE9uZSh7IF9pZDogaWQsIGFjdGl2ZTogdHJ1ZSB9KS5wb3B1bGF0ZShbXG4gICAgICB7IHBhdGg6IFwibW9uaXRvcmluZ0FjdFwiLCBzZWxlY3Q6IFtcIl9pZFwiLCBcImFjdGl2aXR5XCIsIFwiZGVzY3JpcHRpb25cIl0gfSxcbiAgICBdKTtcbiAgICBsZXQgbmV3TWFwRm9ybWF0ID0gbWFwLl9kb2M7XG4gICAgbGV0IGNvbnZlcnRlZFN0YXJ0VGltZSA9IHN0cmluZ1RvTWludXRlcyhtb21lbnQobW9tZW50LnR6KE1hdGguZmxvb3IobWFwLnN0YXJ0VGltZSAvIDYwKSArICc6JyArIG1hcC5zdGFydFRpbWUgJSA2MCwgJ0hIOm1tJywgJ1VUQycpKS50eih0aW1lWm9uZSkuZm9ybWF0KCdISDptbScpKTtcblxuICAgIG5ld01hcEZvcm1hdCA9IHtcbiAgICAgIC4uLm5ld01hcEZvcm1hdCxcbiAgICAgIHBlcmlvZGljaXR5OiBtaW5zVG9TdHJpbmcobWFwLnBlcmlvZGljaXR5KSxcbiAgICAgIF9wZXJpb2RpY2l0eToobWluc1RvU3RyaW5nKG1hcC5wZXJpb2RpY2l0eSxmYWxzZSkucmVwbGFjZSgnaCAnLCAnOicpLnJlcGxhY2UoJ20nICwgJycpKSxcbiAgICAgIHN0YXJ0VGltZTogbWluc1RvU3RyaW5nKGNvbnZlcnRlZFN0YXJ0VGltZSwgdHJ1ZSksXG4gICAgICBfc3RhcnRUaW1lOiBtb21lbnQobWluc1RvU3RyaW5nKGNvbnZlcnRlZFN0YXJ0VGltZSx0cnVlKSwgW1wiaDptbSBBXCJdKS5mb3JtYXQoXCJISDptbVwiKSxcbiAgICAgIGVzdGltYXRpb246IG1pbnNUb1N0cmluZyhtYXAuZXN0aW1hdGlvbiksXG4gICAgICBfZXN0aW1hdGlvbjogKG1pbnNUb1N0cmluZyhtYXAuZXN0aW1hdGlvbixmYWxzZSkucmVwbGFjZSgnaCAnLCAnOicpLnJlcGxhY2UoJ20nICwgJycpKVxuICAgIH1cbiAgICBpZiAoIW1hcCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZXJyOiB7IG1lc3NhZ2U6IFwiTUFQIG5vdCBmb3VuZFwiIH0sXG4gICAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgICBzdGF0dXNDb2RlOiA0MDQsXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4geyBkYXRhOiBuZXdNYXBGb3JtYXQsIHN0YXR1czogXCJzdWNjZXNzXCIgfTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIHsgZXJyLCBzdGF0dXM6IFwiZXJyb3JcIiB9O1xuICB9XG59O1xuIl19