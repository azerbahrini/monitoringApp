function cov_2omlkjby0x(){var path="/home/azer/Desktop/jenkins/app/monitoringApp/services/task/virtualTasksGenerator.js";var hash="1df61492cb270464eb5378f6ccccabf9b314140f";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/azer/Desktop/jenkins/app/monitoringApp/services/task/virtualTasksGenerator.js",statementMap:{"0":{start:{line:1,column:15},end:{line:1,column:32}},"1":{start:{line:3,column:0},end:{line:49,column:2}},"2":{start:{line:4,column:2},end:{line:48,column:3}},"3":{start:{line:5,column:27},end:{line:5,column:29}},"4":{start:{line:6,column:27},end:{line:6,column:51}},"5":{start:{line:7,column:25},end:{line:7,column:47}},"6":{start:{line:9,column:4},end:{line:44,column:7}},"7":{start:{line:11,column:20},end:{line:11,column:35}},"8":{start:{line:12,column:26},end:{line:12,column:49}},"9":{start:{line:13,column:26},end:{line:13,column:47}},"10":{start:{line:14,column:21},end:{line:14,column:39}},"11":{start:{line:15,column:20},end:{line:15,column:55}},"12":{start:{line:16,column:26},end:{line:16,column:64}},"13":{start:{line:18,column:24},end:{line:18,column:90}},"14":{start:{line:19,column:31},end:{line:19,column:61}},"15":{start:{line:21,column:26},end:{line:21,column:44}},"16":{start:{line:22,column:24},end:{line:22,column:48}},"17":{start:{line:24,column:6},end:{line:42,column:7}},"18":{start:{line:26,column:8},end:{line:40,column:9}},"19":{start:{line:27,column:23},end:{line:38,column:11}},"20":{start:{line:39,column:10},end:{line:39,column:36}},"21":{start:{line:41,column:8},end:{line:41,column:47}},"22":{start:{line:45,column:4},end:{line:45,column:55}},"23":{start:{line:47,column:4},end:{line:47,column:36}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:3,column:17},end:{line:3,column:18}},loc:{start:{line:3,column:63},end:{line:49,column:1}},line:3},"1":{name:"(anonymous_1)",decl:{start:{line:9,column:17},end:{line:9,column:18}},loc:{start:{line:9,column:24},end:{line:44,column:5}},line:9}},branchMap:{"0":{loc:{start:{line:11,column:20},end:{line:11,column:35}},type:"binary-expr",locations:[{start:{line:11,column:20},end:{line:11,column:27}},{start:{line:11,column:31},end:{line:11,column:35}}],line:11},"1":{loc:{start:{line:12,column:26},end:{line:12,column:49}},type:"binary-expr",locations:[{start:{line:12,column:26},end:{line:12,column:41}},{start:{line:12,column:45},end:{line:12,column:49}}],line:12},"2":{loc:{start:{line:13,column:26},end:{line:13,column:47}},type:"binary-expr",locations:[{start:{line:13,column:26},end:{line:13,column:39}},{start:{line:13,column:43},end:{line:13,column:47}}],line:13},"3":{loc:{start:{line:14,column:21},end:{line:14,column:39}},type:"binary-expr",locations:[{start:{line:14,column:21},end:{line:14,column:31}},{start:{line:14,column:35},end:{line:14,column:39}}],line:14},"4":{loc:{start:{line:15,column:20},end:{line:15,column:55}},type:"binary-expr",locations:[{start:{line:15,column:20},end:{line:15,column:47}},{start:{line:15,column:51},end:{line:15,column:55}}],line:15},"5":{loc:{start:{line:16,column:26},end:{line:16,column:64}},type:"binary-expr",locations:[{start:{line:16,column:26},end:{line:16,column:56}},{start:{line:16,column:60},end:{line:16,column:64}}],line:16},"6":{loc:{start:{line:24,column:13},end:{line:24,column:80}},type:"binary-expr",locations:[{start:{line:24,column:13},end:{line:24,column:46}},{start:{line:24,column:50},end:{line:24,column:80}}],line:24},"7":{loc:{start:{line:26,column:8},end:{line:40,column:9}},type:"if",locations:[{start:{line:26,column:8},end:{line:40,column:9}},{start:{line:26,column:8},end:{line:40,column:9}}],line:26},"8":{loc:{start:{line:26,column:12},end:{line:26,column:85}},type:"binary-expr",locations:[{start:{line:26,column:12},end:{line:26,column:48}},{start:{line:26,column:52},end:{line:26,column:85}}],line:26},"9":{loc:{start:{line:36,column:22},end:{line:36,column:34}},type:"binary-expr",locations:[{start:{line:36,column:22},end:{line:36,column:26}},{start:{line:36,column:30},end:{line:36,column:34}}],line:36}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"1df61492cb270464eb5378f6ccccabf9b314140f"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2omlkjby0x=function(){return actualCoverage;};}return actualCoverage;}cov_2omlkjby0x();const moment=(cov_2omlkjby0x().s[0]++,require('moment'));cov_2omlkjby0x().s[1]++;module.exports=(maps,startDate,endDate,user,timeZone)=>{cov_2omlkjby0x().f[0]++;cov_2omlkjby0x().s[2]++;try{const generatedTasks=(cov_2omlkjby0x().s[3]++,[]);const startTimeStamp=(cov_2omlkjby0x().s[4]++,moment(startDate).unix());const endTimeStamp=(cov_2omlkjby0x().s[5]++,moment(endDate).unix());cov_2omlkjby0x().s[6]++;maps.forEach(map=>{cov_2omlkjby0x().f[1]++;const mapId=(cov_2omlkjby0x().s[7]++,(cov_2omlkjby0x().b[0][0]++,map._id)??(cov_2omlkjby0x().b[0][1]++,null));const periodicity=(cov_2omlkjby0x().s[8]++,(cov_2omlkjby0x().b[1][0]++,map.periodicity)??(cov_2omlkjby0x().b[1][1]++,null));const firstReport=(cov_2omlkjby0x().s[9]++,(cov_2omlkjby0x().b[2][0]++,map.startTime)??(cov_2omlkjby0x().b[2][1]++,null));const system=(cov_2omlkjby0x().s[10]++,(cov_2omlkjby0x().b[3][0]++,map.system)??(cov_2omlkjby0x().b[3][1]++,null));const title=(cov_2omlkjby0x().s[11]++,(cov_2omlkjby0x().b[4][0]++,map.monitoringAct?.activity)??(cov_2omlkjby0x().b[4][1]++,null));const description=(cov_2omlkjby0x().s[12]++,(cov_2omlkjby0x().b[5][0]++,map.monitoringAct?.description)??(cov_2omlkjby0x().b[5][1]++,null));const taskStart=(cov_2omlkjby0x().s[13]++,moment().utc().startOf('day').add(firstReport,'minutes').format());let taskStartTimeStamp=(cov_2omlkjby0x().s[14]++,moment(taskStart).utc().unix());const task24start=(cov_2omlkjby0x().s[15]++,taskStartTimeStamp);const task24End=(cov_2omlkjby0x().s[16]++,task24start+60*60*24);cov_2omlkjby0x().s[17]++;while((cov_2omlkjby0x().b[6][0]++,taskStartTimeStamp>=task24start)&&(cov_2omlkjby0x().b[6][1]++,taskStartTimeStamp<task24End)){cov_2omlkjby0x().s[18]++;if((cov_2omlkjby0x().b[8][0]++,taskStartTimeStamp>=startTimeStamp)&&(cov_2omlkjby0x().b[8][1]++,taskStartTimeStamp<endTimeStamp)){cov_2omlkjby0x().b[7][0]++;const task=(cov_2omlkjby0x().s[19]++,{title,description,type:'Monitoring',map:mapId,globalStatus:'Good',estimatedStart:moment.unix(taskStartTimeStamp).tz(timeZone).format(),timeSpent:0,state:'Pending',assignee:(cov_2omlkjby0x().b[9][0]++,user)??(cov_2omlkjby0x().b[9][1]++,null),system});cov_2omlkjby0x().s[20]++;generatedTasks.push(task);}else{cov_2omlkjby0x().b[7][1]++;}cov_2omlkjby0x().s[21]++;taskStartTimeStamp+=periodicity*60;}});cov_2omlkjby0x().s[22]++;return{data:generatedTasks,status:'success'};}catch(err){cov_2omlkjby0x().s[23]++;return{err,status:'error'};}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZpcnR1YWxUYXNrc0dlbmVyYXRvci5qcyJdLCJuYW1lcyI6WyJtb21lbnQiLCJyZXF1aXJlIiwibW9kdWxlIiwiZXhwb3J0cyIsIm1hcHMiLCJzdGFydERhdGUiLCJlbmREYXRlIiwidXNlciIsInRpbWVab25lIiwiZ2VuZXJhdGVkVGFza3MiLCJzdGFydFRpbWVTdGFtcCIsInVuaXgiLCJlbmRUaW1lU3RhbXAiLCJmb3JFYWNoIiwibWFwIiwibWFwSWQiLCJfaWQiLCJwZXJpb2RpY2l0eSIsImZpcnN0UmVwb3J0Iiwic3RhcnRUaW1lIiwic3lzdGVtIiwidGl0bGUiLCJtb25pdG9yaW5nQWN0IiwiYWN0aXZpdHkiLCJkZXNjcmlwdGlvbiIsInRhc2tTdGFydCIsInV0YyIsInN0YXJ0T2YiLCJhZGQiLCJmb3JtYXQiLCJ0YXNrU3RhcnRUaW1lU3RhbXAiLCJ0YXNrMjRzdGFydCIsInRhc2syNEVuZCIsInRhc2siLCJ0eXBlIiwiZ2xvYmFsU3RhdHVzIiwiZXN0aW1hdGVkU3RhcnQiLCJ0eiIsInRpbWVTcGVudCIsInN0YXRlIiwiYXNzaWduZWUiLCJwdXNoIiwiZGF0YSIsInN0YXR1cyIsImVyciJdLCJtYXBwaW5ncyI6InErSUFlWTsyRkFmWixLQUFNQSxDQUFBQSxNQUFNLDBCQUFHQyxPQUFPLENBQUMsUUFBRCxDQUFWLENBQVosQyx3QkFFQUMsTUFBTSxDQUFDQyxPQUFQLENBQWlCLENBQUNDLElBQUQsQ0FBT0MsU0FBUCxDQUFrQkMsT0FBbEIsQ0FBMkJDLElBQTNCLENBQWlDQyxRQUFqQyxHQUE4QyxpREFDN0QsR0FBSSxDQUNGLEtBQU1DLENBQUFBLGNBQWMsMEJBQUcsRUFBSCxDQUFwQixDQUNBLEtBQU1DLENBQUFBLGNBQWMsMEJBQUdWLE1BQU0sQ0FBQ0ssU0FBRCxDQUFOLENBQWtCTSxJQUFsQixFQUFILENBQXBCLENBQ0EsS0FBTUMsQ0FBQUEsWUFBWSwwQkFBR1osTUFBTSxDQUFDTSxPQUFELENBQU4sQ0FBZ0JLLElBQWhCLEVBQUgsQ0FBbEIsQ0FIRSx3QkFLRlAsSUFBSSxDQUFDUyxPQUFMLENBQWFDLEdBQUcsRUFBSSx5QkFFbEIsS0FBTUMsQ0FBQUEsS0FBSywwQkFBRyw0QkFBQUQsR0FBRyxDQUFDRSxHQUFKLCtCQUFXLElBQVgsQ0FBSCxDQUFYLENBQ0EsS0FBTUMsQ0FBQUEsV0FBVywwQkFBRyw0QkFBQUgsR0FBRyxDQUFDRyxXQUFKLCtCQUFtQixJQUFuQixDQUFILENBQWpCLENBQ0EsS0FBTUMsQ0FBQUEsV0FBVywwQkFBRyw0QkFBQUosR0FBRyxDQUFDSyxTQUFKLCtCQUFpQixJQUFqQixDQUFILENBQWpCLENBQ0EsS0FBTUMsQ0FBQUEsTUFBTSwyQkFBRyw0QkFBQU4sR0FBRyxDQUFDTSxNQUFKLCtCQUFjLElBQWQsQ0FBSCxDQUFaLENBQ0EsS0FBTUMsQ0FBQUEsS0FBSywyQkFBRyw0QkFBQVAsR0FBRyxDQUFDUSxhQUFKLEVBQW1CQyxRQUFuQiwrQkFBK0IsSUFBL0IsQ0FBSCxDQUFYLENBQ0EsS0FBTUMsQ0FBQUEsV0FBVywyQkFBRyw0QkFBQVYsR0FBRyxDQUFDUSxhQUFKLEVBQW1CRSxXQUFuQiwrQkFBa0MsSUFBbEMsQ0FBSCxDQUFqQixDQUVBLEtBQU1DLENBQUFBLFNBQVMsMkJBQUd6QixNQUFNLEdBQUcwQixHQUFULEdBQWVDLE9BQWYsQ0FBdUIsS0FBdkIsRUFBOEJDLEdBQTlCLENBQWtDVixXQUFsQyxDQUErQyxTQUEvQyxFQUEwRFcsTUFBMUQsRUFBSCxDQUFmLENBQ0EsR0FBSUMsQ0FBQUEsa0JBQWtCLDJCQUFHOUIsTUFBTSxDQUFDeUIsU0FBRCxDQUFOLENBQWtCQyxHQUFsQixHQUF3QmYsSUFBeEIsRUFBSCxDQUF0QixDQUVBLEtBQU1vQixDQUFBQSxXQUFXLDJCQUFHRCxrQkFBSCxDQUFqQixDQUNBLEtBQU1FLENBQUFBLFNBQVMsMkJBQUdELFdBQVcsQ0FBSSxHQUFHLEVBQUgsQ0FBTSxFQUF4QixDQUFmLENBYmtCLHlCQWVsQixNQUFPLDRCQUFBRCxrQkFBa0IsRUFBSUMsV0FBdEIsK0JBQXFDRCxrQkFBa0IsQ0FBR0UsU0FBMUQsQ0FBUCxDQUEyRSwwQkFFekUsR0FBSSw0QkFBQUYsa0JBQWtCLEVBQUlwQixjQUF0QiwrQkFBd0NvQixrQkFBa0IsQ0FBR2xCLFlBQTdELENBQUosQ0FBOEUsNEJBQzVFLEtBQU1xQixDQUFBQSxJQUFJLDJCQUFHLENBQ1haLEtBRFcsQ0FFWEcsV0FGVyxDQUdYVSxJQUFJLENBQUUsWUFISyxDQUlYcEIsR0FBRyxDQUFFQyxLQUpNLENBS1hvQixZQUFZLENBQUUsTUFMSCxDQU1YQyxjQUFjLENBQUVwQyxNQUFNLENBQUNXLElBQVAsQ0FBWW1CLGtCQUFaLEVBQWdDTyxFQUFoQyxDQUFtQzdCLFFBQW5DLEVBQTZDcUIsTUFBN0MsRUFOTCxDQU9YUyxTQUFTLENBQUUsQ0FQQSxDQVFYQyxLQUFLLENBQUUsU0FSSSxDQVNYQyxRQUFRLENBQUUsNEJBQUFqQyxJQUFJLCtCQUFJLElBQUosQ0FUSCxDQVVYYSxNQVZXLENBQUgsQ0FBVixDQUQ0RSx5QkFhNUVYLGNBQWMsQ0FBQ2dDLElBQWYsQ0FBb0JSLElBQXBCLEVBQ0QsQ0FkRCxpQ0FGeUUseUJBaUJ6RUgsa0JBQWtCLEVBQUliLFdBQVcsQ0FBRyxFQUFwQyxDQUNELENBRUYsQ0FuQ0QsRUFMRSx5QkF5Q0YsTUFBTyxDQUFFeUIsSUFBSSxDQUFFakMsY0FBUixDQUF3QmtDLE1BQU0sQ0FBRSxTQUFoQyxDQUFQLENBQ0QsQ0FBQyxNQUFPQyxHQUFQLENBQVksMEJBQ1osTUFBTyxDQUFFQSxHQUFGLENBQU9ELE1BQU0sQ0FBRSxPQUFmLENBQVAsQ0FDRCxDQUNGLENBOUNEIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKG1hcHMsIHN0YXJ0RGF0ZSwgZW5kRGF0ZSwgdXNlciwgdGltZVpvbmUpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBnZW5lcmF0ZWRUYXNrcyA9IFtdO1xuICAgIGNvbnN0IHN0YXJ0VGltZVN0YW1wID0gbW9tZW50KHN0YXJ0RGF0ZSkudW5peCgpO1xuICAgIGNvbnN0IGVuZFRpbWVTdGFtcCA9IG1vbWVudChlbmREYXRlKS51bml4KCk7XG5cbiAgICBtYXBzLmZvckVhY2gobWFwID0+IHtcblxuICAgICAgY29uc3QgbWFwSWQgPSBtYXAuX2lkID8/IG51bGw7XG4gICAgICBjb25zdCBwZXJpb2RpY2l0eSA9IG1hcC5wZXJpb2RpY2l0eSA/PyBudWxsO1xuICAgICAgY29uc3QgZmlyc3RSZXBvcnQgPSBtYXAuc3RhcnRUaW1lID8/IG51bGw7XG4gICAgICBjb25zdCBzeXN0ZW0gPSBtYXAuc3lzdGVtID8/IG51bGw7XG4gICAgICBjb25zdCB0aXRsZSA9IG1hcC5tb25pdG9yaW5nQWN0Py5hY3Rpdml0eSA/PyBudWxsO1xuICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBtYXAubW9uaXRvcmluZ0FjdD8uZGVzY3JpcHRpb24gPz8gbnVsbDtcblxuICAgICAgY29uc3QgdGFza1N0YXJ0ID0gbW9tZW50KCkudXRjKCkuc3RhcnRPZignZGF5JykuYWRkKGZpcnN0UmVwb3J0LCAnbWludXRlcycpLmZvcm1hdCgpO1xuICAgICAgbGV0IHRhc2tTdGFydFRpbWVTdGFtcCA9IG1vbWVudCh0YXNrU3RhcnQpLnV0YygpLnVuaXgoKTtcblxuICAgICAgY29uc3QgdGFzazI0c3RhcnQgPSB0YXNrU3RhcnRUaW1lU3RhbXA7XG4gICAgICBjb25zdCB0YXNrMjRFbmQgPSB0YXNrMjRzdGFydCArICg2MCo2MCoyNCk7XG5cbiAgICAgIHdoaWxlICh0YXNrU3RhcnRUaW1lU3RhbXAgPj0gdGFzazI0c3RhcnQgJiYgdGFza1N0YXJ0VGltZVN0YW1wIDwgdGFzazI0RW5kKXtcblxuICAgICAgICBpZiAodGFza1N0YXJ0VGltZVN0YW1wID49IHN0YXJ0VGltZVN0YW1wICYmIHRhc2tTdGFydFRpbWVTdGFtcCA8IGVuZFRpbWVTdGFtcCl7XG4gICAgICAgICAgY29uc3QgdGFzayA9IHtcbiAgICAgICAgICAgIHRpdGxlLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgICAgICB0eXBlOiAnTW9uaXRvcmluZycsXG4gICAgICAgICAgICBtYXA6IG1hcElkLFxuICAgICAgICAgICAgZ2xvYmFsU3RhdHVzOiAnR29vZCcsXG4gICAgICAgICAgICBlc3RpbWF0ZWRTdGFydDogbW9tZW50LnVuaXgodGFza1N0YXJ0VGltZVN0YW1wKS50eih0aW1lWm9uZSkuZm9ybWF0KCksXG4gICAgICAgICAgICB0aW1lU3BlbnQ6IDAsXG4gICAgICAgICAgICBzdGF0ZTogJ1BlbmRpbmcnLFxuICAgICAgICAgICAgYXNzaWduZWU6IHVzZXIgPz8gbnVsbCxcbiAgICAgICAgICAgIHN5c3RlbVxuICAgICAgICAgIH1cbiAgICAgICAgICBnZW5lcmF0ZWRUYXNrcy5wdXNoKHRhc2spO1xuICAgICAgICB9XG4gICAgICAgIHRhc2tTdGFydFRpbWVTdGFtcCArPSBwZXJpb2RpY2l0eSAqIDYwO1xuICAgICAgfVxuXG4gICAgfSk7XG4gICAgcmV0dXJuIHsgZGF0YTogZ2VuZXJhdGVkVGFza3MsIHN0YXR1czogJ3N1Y2Nlc3MnIH07XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiB7IGVyciwgc3RhdHVzOiAnZXJyb3InIH07XG4gIH1cbn07XG4iXX0=