function cov_1uvmqman2x(){var path="/home/azer/Desktop/jenkins/app/monitoringApp/services/system/getAllCategoriesByCustomerId.js";var hash="5202d3b489cc388901662696912e3c23eb61a6b1";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/azer/Desktop/jenkins/app/monitoringApp/services/system/getAllCategoriesByCustomerId.js",statementMap:{"0":{start:{line:1,column:15},end:{line:1,column:45}},"1":{start:{line:4,column:2},end:{line:4,column:69}},"2":{start:{line:4,column:39},end:{line:4,column:56}},"3":{start:{line:6,column:0},end:{line:48,column:2}},"4":{start:{line:7,column:2},end:{line:47,column:3}},"5":{start:{line:8,column:14},end:{line:8,column:16}},"6":{start:{line:9,column:29},end:{line:20,column:6}},"7":{start:{line:22,column:4},end:{line:28,column:5}},"8":{start:{line:23,column:6},end:{line:27,column:8}},"9":{start:{line:30,column:4},end:{line:37,column:5}},"10":{start:{line:30,column:17},end:{line:30,column:18}},"11":{start:{line:31,column:6},end:{line:36,column:7}},"12":{start:{line:32,column:8},end:{line:35,column:11}},"13":{start:{line:39,column:23},end:{line:39,column:50}},"14":{start:{line:41,column:4},end:{line:44,column:6}},"15":{start:{line:46,column:4},end:{line:46,column:36}}},fnMap:{"0":{name:"getUniqueListBy",decl:{start:{line:3,column:9},end:{line:3,column:24}},loc:{start:{line:3,column:35},end:{line:5,column:1}},line:3},"1":{name:"(anonymous_1)",decl:{start:{line:4,column:29},end:{line:4,column:30}},loc:{start:{line:4,column:39},end:{line:4,column:56}},line:4},"2":{name:"(anonymous_2)",decl:{start:{line:6,column:17},end:{line:6,column:18}},loc:{start:{line:6,column:40},end:{line:48,column:1}},line:6}},branchMap:{"0":{loc:{start:{line:22,column:4},end:{line:28,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:28,column:5}},{start:{line:22,column:4},end:{line:28,column:5}}],line:22},"1":{loc:{start:{line:31,column:6},end:{line:36,column:7}},type:"if",locations:[{start:{line:31,column:6},end:{line:36,column:7}},{start:{line:31,column:6},end:{line:36,column:7}}],line:31}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5202d3b489cc388901662696912e3c23eb61a6b1"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1uvmqman2x=function(){return actualCoverage;};}return actualCoverage;}cov_1uvmqman2x();const System=(cov_1uvmqman2x().s[0]++,require("../../models/System"));function getUniqueListBy(arr,key){cov_1uvmqman2x().f[0]++;cov_1uvmqman2x().s[1]++;return[...new Map(arr.map(item=>{cov_1uvmqman2x().f[1]++;cov_1uvmqman2x().s[2]++;return[item[key],item];})).values()];}cov_1uvmqman2x().s[3]++;module.exports=async customer_Id=>{cov_1uvmqman2x().f[2]++;cov_1uvmqman2x().s[4]++;try{let tab=(cov_1uvmqman2x().s[5]++,[]);const systemCategories=(cov_1uvmqman2x().s[6]++,await System.find({customer:customer_Id,category:{$exists:true},isActive:true},{category:1,_id:0}).populate({path:"category",model:"category",select:{_id:1,category:1}}));cov_1uvmqman2x().s[7]++;if(systemCategories.length===0){cov_1uvmqman2x().b[0][0]++;cov_1uvmqman2x().s[8]++;return{err:{message:"No Category exist match this criteria !"},status:"error",statusCode:404};}else{cov_1uvmqman2x().b[0][1]++;}cov_1uvmqman2x().s[9]++;for(let i=(cov_1uvmqman2x().s[10]++,0);i<systemCategories.length;i++){cov_1uvmqman2x().s[11]++;if(systemCategories[i].category){cov_1uvmqman2x().b[1][0]++;cov_1uvmqman2x().s[12]++;tab.push({_id:systemCategories[i].category._id,category:systemCategories[i].category.category});}else{cov_1uvmqman2x().b[1][1]++;}}const uniqueList=(cov_1uvmqman2x().s[13]++,getUniqueListBy(tab,"_id"));cov_1uvmqman2x().s[14]++;return{data:uniqueList,status:"success"};}catch(err){cov_1uvmqman2x().s[15]++;return{err,status:"error"};}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldEFsbENhdGVnb3JpZXNCeUN1c3RvbWVySWQuanMiXSwibmFtZXMiOlsiU3lzdGVtIiwicmVxdWlyZSIsImdldFVuaXF1ZUxpc3RCeSIsImFyciIsImtleSIsIk1hcCIsIm1hcCIsIml0ZW0iLCJ2YWx1ZXMiLCJtb2R1bGUiLCJleHBvcnRzIiwiY3VzdG9tZXJfSWQiLCJ0YWIiLCJzeXN0ZW1DYXRlZ29yaWVzIiwiZmluZCIsImN1c3RvbWVyIiwiY2F0ZWdvcnkiLCIkZXhpc3RzIiwiaXNBY3RpdmUiLCJfaWQiLCJwb3B1bGF0ZSIsInBhdGgiLCJtb2RlbCIsInNlbGVjdCIsImxlbmd0aCIsImVyciIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJzdGF0dXNDb2RlIiwiaSIsInB1c2giLCJ1bmlxdWVMaXN0IiwiZGF0YSJdLCJtYXBwaW5ncyI6Imc4RUFlWTsyRkFmWixLQUFNQSxDQUFBQSxNQUFNLDBCQUFHQyxPQUFPLENBQUMscUJBQUQsQ0FBVixDQUFaLENBRUEsUUFBU0MsQ0FBQUEsZUFBVCxDQUF5QkMsR0FBekIsQ0FBOEJDLEdBQTlCLENBQW1DLGlEQUNqQyxNQUFPLENBQUMsR0FBRyxHQUFJQyxDQUFBQSxHQUFKLENBQVFGLEdBQUcsQ0FBQ0csR0FBSixDQUFTQyxJQUFELEVBQVUsd0RBQUNBLElBQUksQ0FBQ0gsR0FBRCxDQUFMLENBQVlHLElBQVosRUFBaUIsQ0FBbkMsQ0FBUixFQUE4Q0MsTUFBOUMsRUFBSixDQUFQLENBQ0QsQyx3QkFDREMsTUFBTSxDQUFDQyxPQUFQLENBQWlCLEtBQU9DLENBQUFBLFdBQVAsRUFBdUIsaURBQ3RDLEdBQUksQ0FDRixHQUFJQyxDQUFBQSxHQUFHLDBCQUFHLEVBQUgsQ0FBUCxDQUNBLEtBQU1DLENBQUFBLGdCQUFnQiwwQkFBRyxLQUFNYixDQUFBQSxNQUFNLENBQUNjLElBQVAsQ0FDN0IsQ0FDRUMsUUFBUSxDQUFFSixXQURaLENBRUVLLFFBQVEsQ0FBRSxDQUFFQyxPQUFPLENBQUUsSUFBWCxDQUZaLENBR0VDLFFBQVEsQ0FBQyxJQUhYLENBRDZCLENBTTdCLENBQUVGLFFBQVEsQ0FBRSxDQUFaLENBQWVHLEdBQUcsQ0FBRSxDQUFwQixDQU42QixFQU83QkMsUUFQNkIsQ0FPcEIsQ0FDVEMsSUFBSSxDQUFFLFVBREcsQ0FFVEMsS0FBSyxDQUFFLFVBRkUsQ0FHVEMsTUFBTSxDQUFFLENBQUVKLEdBQUcsQ0FBRSxDQUFQLENBQVVILFFBQVEsQ0FBRSxDQUFwQixDQUhDLENBUG9CLENBQVQsQ0FBdEIsQ0FGRSx3QkFlRixHQUFJSCxnQkFBZ0IsQ0FBQ1csTUFBakIsR0FBNEIsQ0FBaEMsQ0FBbUMsb0RBQ2pDLE1BQU8sQ0FDTEMsR0FBRyxDQUFFLENBQUVDLE9BQU8sQ0FBRSx5Q0FBWCxDQURBLENBRUxDLE1BQU0sQ0FBRSxPQUZILENBR0xDLFVBQVUsQ0FBRSxHQUhQLENBQVAsQ0FLRCxDQU5ELGlDQWZFLHdCQXVCRixJQUFLLEdBQUlDLENBQUFBLENBQUMsMkJBQUcsQ0FBSCxDQUFWLENBQWdCQSxDQUFDLENBQUdoQixnQkFBZ0IsQ0FBQ1csTUFBckMsQ0FBNkNLLENBQUMsRUFBOUMsQ0FBa0QsMEJBQ2hELEdBQUloQixnQkFBZ0IsQ0FBQ2dCLENBQUQsQ0FBaEIsQ0FBb0JiLFFBQXhCLENBQWtDLHFEQUNoQ0osR0FBRyxDQUFDa0IsSUFBSixDQUFTLENBQ1BYLEdBQUcsQ0FBRU4sZ0JBQWdCLENBQUNnQixDQUFELENBQWhCLENBQW9CYixRQUFwQixDQUE2QkcsR0FEM0IsQ0FFUEgsUUFBUSxDQUFFSCxnQkFBZ0IsQ0FBQ2dCLENBQUQsQ0FBaEIsQ0FBb0JiLFFBQXBCLENBQTZCQSxRQUZoQyxDQUFULEVBSUQsQ0FMRCxpQ0FNRCxDQUVELEtBQU1lLENBQUFBLFVBQVUsMkJBQUc3QixlQUFlLENBQUNVLEdBQUQsQ0FBTSxLQUFOLENBQWxCLENBQWhCLENBaENFLHlCQWtDRixNQUFPLENBQ0xvQixJQUFJLENBQUVELFVBREQsQ0FFTEosTUFBTSxDQUFFLFNBRkgsQ0FBUCxDQUlELENBQUMsTUFBT0YsR0FBUCxDQUFZLDBCQUNaLE1BQU8sQ0FBRUEsR0FBRixDQUFPRSxNQUFNLENBQUUsT0FBZixDQUFQLENBQ0QsQ0FDRixDQTFDRCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFN5c3RlbSA9IHJlcXVpcmUoXCIuLi8uLi9tb2RlbHMvU3lzdGVtXCIpO1xuXG5mdW5jdGlvbiBnZXRVbmlxdWVMaXN0QnkoYXJyLCBrZXkpIHtcbiAgcmV0dXJuIFsuLi5uZXcgTWFwKGFyci5tYXAoKGl0ZW0pID0+IFtpdGVtW2tleV0sIGl0ZW1dKSkudmFsdWVzKCldO1xufVxubW9kdWxlLmV4cG9ydHMgPSBhc3luYyAoY3VzdG9tZXJfSWQpID0+IHtcbiAgdHJ5IHtcbiAgICBsZXQgdGFiID0gW107XG4gICAgY29uc3Qgc3lzdGVtQ2F0ZWdvcmllcyA9IGF3YWl0IFN5c3RlbS5maW5kKFxuICAgICAge1xuICAgICAgICBjdXN0b21lcjogY3VzdG9tZXJfSWQsXG4gICAgICAgIGNhdGVnb3J5OiB7ICRleGlzdHM6IHRydWUgfSxcbiAgICAgICAgaXNBY3RpdmU6dHJ1ZVxuICAgICAgfSxcbiAgICAgIHsgY2F0ZWdvcnk6IDEsIF9pZDogMCB9XG4gICAgKS5wb3B1bGF0ZSh7XG4gICAgICBwYXRoOiBcImNhdGVnb3J5XCIsXG4gICAgICBtb2RlbDogXCJjYXRlZ29yeVwiLFxuICAgICAgc2VsZWN0OiB7IF9pZDogMSwgY2F0ZWdvcnk6IDEgfSxcbiAgICB9KTtcblxuICAgIGlmIChzeXN0ZW1DYXRlZ29yaWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZXJyOiB7IG1lc3NhZ2U6IFwiTm8gQ2F0ZWdvcnkgZXhpc3QgbWF0Y2ggdGhpcyBjcml0ZXJpYSAhXCIgfSxcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIHN0YXR1c0NvZGU6IDQwNCxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzeXN0ZW1DYXRlZ29yaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoc3lzdGVtQ2F0ZWdvcmllc1tpXS5jYXRlZ29yeSkge1xuICAgICAgICB0YWIucHVzaCh7XG4gICAgICAgICAgX2lkOiBzeXN0ZW1DYXRlZ29yaWVzW2ldLmNhdGVnb3J5Ll9pZCxcbiAgICAgICAgICBjYXRlZ29yeTogc3lzdGVtQ2F0ZWdvcmllc1tpXS5jYXRlZ29yeS5jYXRlZ29yeSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdW5pcXVlTGlzdCA9IGdldFVuaXF1ZUxpc3RCeSh0YWIsIFwiX2lkXCIpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGE6IHVuaXF1ZUxpc3QsXG4gICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiLFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiB7IGVyciwgc3RhdHVzOiBcImVycm9yXCIgfTtcbiAgfVxufTtcbiJdfQ==