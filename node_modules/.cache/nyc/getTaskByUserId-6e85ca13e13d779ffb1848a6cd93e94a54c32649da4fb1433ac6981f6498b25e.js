function cov_29vvmuxp3l(){var path="/home/azer/Desktop/jenkins/app/monitoringApp/services/task/getTaskByUserId.js";var hash="908d2cbb9accd243c51001507d27cc76a207df8a";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/azer/Desktop/jenkins/app/monitoringApp/services/task/getTaskByUserId.js",statementMap:{"0":{start:{line:1,column:17},end:{line:1,column:36}},"1":{start:{line:2,column:13},end:{line:2,column:41}},"2":{start:{line:3,column:15},end:{line:3,column:32}},"3":{start:{line:4,column:0},end:{line:178,column:2}},"4":{start:{line:13,column:2},end:{line:177,column:3}},"5":{start:{line:14,column:20},end:{line:14,column:43}},"6":{start:{line:15,column:24},end:{line:38,column:5}},"7":{start:{line:40,column:4},end:{line:63,column:7}},"8":{start:{line:41,column:6},end:{line:62,column:9}},"9":{start:{line:65,column:20},end:{line:162,column:6}},"10":{start:{line:164,column:4},end:{line:166,column:7}},"11":{start:{line:165,column:6},end:{line:165,column:78}},"12":{start:{line:167,column:4},end:{line:173,column:5}},"13":{start:{line:168,column:6},end:{line:172,column:8}},"14":{start:{line:174,column:4},end:{line:174,column:48}},"15":{start:{line:176,column:4},end:{line:176,column:36}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:4,column:17},end:{line:4,column:18}},loc:{start:{line:12,column:5},end:{line:178,column:1}},line:12},"1":{name:"(anonymous_1)",decl:{start:{line:40,column:17},end:{line:40,column:18}},loc:{start:{line:40,column:37},end:{line:63,column:5}},line:40},"2":{name:"(anonymous_2)",decl:{start:{line:164,column:16},end:{line:164,column:17}},loc:{start:{line:164,column:26},end:{line:166,column:5}},line:164}},branchMap:{"0":{loc:{start:{line:167,column:4},end:{line:173,column:5}},type:"if",locations:[{start:{line:167,column:4},end:{line:173,column:5}},{start:{line:167,column:4},end:{line:173,column:5}}],line:167}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"908d2cbb9accd243c51001507d27cc76a207df8a"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_29vvmuxp3l=function(){return actualCoverage;};}return actualCoverage;}cov_29vvmuxp3l();const mongoose=(cov_29vvmuxp3l().s[0]++,require("mongoose"));const Task=(cov_29vvmuxp3l().s[1]++,require("../../models/Task"));const moment=(cov_29vvmuxp3l().s[2]++,require('moment'));cov_29vvmuxp3l().s[3]++;module.exports=async(userId,searchValue,type,state,startDate,endDate,timeZone)=>{cov_29vvmuxp3l().f[0]++;cov_29vvmuxp3l().s[4]++;try{const myArray=(cov_29vvmuxp3l().s[5]++,searchValue?.split(" "));const searchArray=(cov_29vvmuxp3l().s[6]++,[{$or:[{title:{$regex:"",$options:"i"}},{customerName:{$regex:"",$options:"i"}},{systemName:{$regex:"",$options:"i"}}]}]);cov_29vvmuxp3l().s[7]++;myArray?.map(searchFragment=>{cov_29vvmuxp3l().f[1]++;cov_29vvmuxp3l().s[8]++;searchArray.push({$or:[{title:{$regex:searchFragment,$options:"i"}},{customerName:{$regex:searchFragment,$options:"i"}},{systemName:{$regex:searchFragment,$options:"i"}}]});});const taskDoc=(cov_29vvmuxp3l().s[9]++,await Task.aggregate([{$match:{assignee:mongoose.Types.ObjectId(userId)}},{$lookup:{from:"users",localField:"assignee",foreignField:"_id",as:"populatedUser"}},{$set:{assigneeName:{$concat:[{$arrayElemAt:["$populatedUser.firstName",0]}," ",{$arrayElemAt:["$populatedUser.lastName",0]}]}}},{$match:{state:{$in:JSON.parse(state)},type:{$in:JSON.parse(type)}}},{$lookup:{from:"systems",localField:"system",foreignField:"_id",as:"populatedSystem"}},{$set:{systemName:{$arrayElemAt:["$populatedSystem.name",0]}}},{$lookup:{from:"customers",localField:"populatedSystem.customer",foreignField:"_id",as:"populatedCustomer"}},{$set:{customerName:{$arrayElemAt:["$populatedCustomer.label",0]}}},{$match:{$and:searchArray}},{$match:{$and:[{estimatedStart:{$lte:new Date(moment(endDate).utc())}},{estimatedStart:{$gte:new Date(moment(startDate).utc())}}]}},{$project:{populatedUser:0,populatedSystem:0,populatedCustomer:0}}]));cov_29vvmuxp3l().s[10]++;taskDoc.map(task=>{cov_29vvmuxp3l().f[2]++;cov_29vvmuxp3l().s[11]++;task.estimatedStart=moment(task.estimatedStart).tz(timeZone).format();});cov_29vvmuxp3l().s[12]++;if(taskDoc.length===0){cov_29vvmuxp3l().b[0][0]++;cov_29vvmuxp3l().s[13]++;return{error:{message:"No Tasks found"},status:"no data",statusCode:204};}else{cov_29vvmuxp3l().b[0][1]++;}cov_29vvmuxp3l().s[14]++;return{data:taskDoc,status:"success"};}catch(err){cov_29vvmuxp3l().s[15]++;return{err,status:"error"};}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldFRhc2tCeVVzZXJJZC5qcyJdLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJUYXNrIiwibW9tZW50IiwibW9kdWxlIiwiZXhwb3J0cyIsInVzZXJJZCIsInNlYXJjaFZhbHVlIiwidHlwZSIsInN0YXRlIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsInRpbWVab25lIiwibXlBcnJheSIsInNwbGl0Iiwic2VhcmNoQXJyYXkiLCIkb3IiLCJ0aXRsZSIsIiRyZWdleCIsIiRvcHRpb25zIiwiY3VzdG9tZXJOYW1lIiwic3lzdGVtTmFtZSIsIm1hcCIsInNlYXJjaEZyYWdtZW50IiwicHVzaCIsInRhc2tEb2MiLCJhZ2dyZWdhdGUiLCIkbWF0Y2giLCJhc3NpZ25lZSIsIlR5cGVzIiwiT2JqZWN0SWQiLCIkbG9va3VwIiwiZnJvbSIsImxvY2FsRmllbGQiLCJmb3JlaWduRmllbGQiLCJhcyIsIiRzZXQiLCJhc3NpZ25lZU5hbWUiLCIkY29uY2F0IiwiJGFycmF5RWxlbUF0IiwiJGluIiwiSlNPTiIsInBhcnNlIiwiJGFuZCIsImVzdGltYXRlZFN0YXJ0IiwiJGx0ZSIsIkRhdGUiLCJ1dGMiLCIkZ3RlIiwiJHByb2plY3QiLCJwb3B1bGF0ZWRVc2VyIiwicG9wdWxhdGVkU3lzdGVtIiwicG9wdWxhdGVkQ3VzdG9tZXIiLCJ0YXNrIiwidHoiLCJmb3JtYXQiLCJsZW5ndGgiLCJlcnJvciIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJzdGF0dXNDb2RlIiwiZGF0YSIsImVyciJdLCJtYXBwaW5ncyI6Imt3RUFlWTsyRkFmWixLQUFNQSxDQUFBQSxRQUFRLDBCQUFHQyxPQUFPLENBQUMsVUFBRCxDQUFWLENBQWQsQ0FDQSxLQUFNQyxDQUFBQSxJQUFJLDBCQUFHRCxPQUFPLENBQUMsbUJBQUQsQ0FBVixDQUFWLENBQ0EsS0FBTUUsQ0FBQUEsTUFBTSwwQkFBR0YsT0FBTyxDQUFDLFFBQUQsQ0FBVixDQUFaLEMsd0JBQ0FHLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixN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QWlLRixNQUFPLENBQUVDLElBQUksQ0FBRXBDLE9BQVIsQ0FBaUJrQyxNQUFNLENBQUUsU0FBekIsQ0FBUCxDQUNELENBQUMsTUFBT0csR0FBUCxDQUFZLDBCQUNaLE1BQU8sQ0FBRUEsR0FBRixDQUFPSCxNQUFNLENBQUUsT0FBZixDQUFQLENBQ0QsQ0FDRixDQTlLRCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZShcIm1vbmdvb3NlXCIpO1xuY29uc3QgVGFzayA9IHJlcXVpcmUoXCIuLi8uLi9tb2RlbHMvVGFza1wiKTtcbmNvbnN0IG1vbWVudCA9IHJlcXVpcmUoJ21vbWVudCcpO1xubW9kdWxlLmV4cG9ydHMgPSBhc3luYyAoXG4gIHVzZXJJZCxcbiAgc2VhcmNoVmFsdWUsXG4gIHR5cGUsXG4gIHN0YXRlLFxuICBzdGFydERhdGUsXG4gIGVuZERhdGUsXG4gIHRpbWVab25lXG4pID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBteUFycmF5ID0gc2VhcmNoVmFsdWU/LnNwbGl0KFwiIFwiKTtcbiAgICBjb25zdCBzZWFyY2hBcnJheSA9IFtcbiAgICAgIHtcbiAgICAgICAgJG9yOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGl0bGU6IHtcbiAgICAgICAgICAgICAgJHJlZ2V4OiBcIlwiLFxuICAgICAgICAgICAgICAkb3B0aW9uczogXCJpXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgY3VzdG9tZXJOYW1lOiB7XG4gICAgICAgICAgICAgICRyZWdleDogXCJcIixcbiAgICAgICAgICAgICAgJG9wdGlvbnM6IFwiaVwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHN5c3RlbU5hbWU6IHtcbiAgICAgICAgICAgICAgJHJlZ2V4OiBcIlwiLFxuICAgICAgICAgICAgICAkb3B0aW9uczogXCJpXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgIF07XG5cbiAgICBteUFycmF5Py5tYXAoKHNlYXJjaEZyYWdtZW50KSA9PiB7XG4gICAgICBzZWFyY2hBcnJheS5wdXNoKHtcbiAgICAgICAgJG9yOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGl0bGU6IHtcbiAgICAgICAgICAgICAgJHJlZ2V4OiBzZWFyY2hGcmFnbWVudCxcbiAgICAgICAgICAgICAgJG9wdGlvbnM6IFwiaVwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGN1c3RvbWVyTmFtZToge1xuICAgICAgICAgICAgICAkcmVnZXg6IHNlYXJjaEZyYWdtZW50LFxuICAgICAgICAgICAgICAkb3B0aW9uczogXCJpXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgc3lzdGVtTmFtZToge1xuICAgICAgICAgICAgICAkcmVnZXg6IHNlYXJjaEZyYWdtZW50LFxuICAgICAgICAgICAgICAkb3B0aW9uczogXCJpXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHRhc2tEb2MgPSBhd2FpdCBUYXNrLmFnZ3JlZ2F0ZShbXG4gICAgICB7XG4gICAgICAgICRtYXRjaDoge1xuICAgICAgICAgIGFzc2lnbmVlOiBtb25nb29zZS5UeXBlcy5PYmplY3RJZCh1c2VySWQpLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgJGxvb2t1cDoge1xuICAgICAgICAgIGZyb206IFwidXNlcnNcIixcbiAgICAgICAgICBsb2NhbEZpZWxkOiBcImFzc2lnbmVlXCIsXG4gICAgICAgICAgZm9yZWlnbkZpZWxkOiBcIl9pZFwiLFxuICAgICAgICAgIGFzOiBcInBvcHVsYXRlZFVzZXJcIixcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgICRzZXQ6IHtcbiAgICAgICAgICBhc3NpZ25lZU5hbWU6IHtcbiAgICAgICAgICAgICRjb25jYXQ6IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICRhcnJheUVsZW1BdDogW1wiJHBvcHVsYXRlZFVzZXIuZmlyc3ROYW1lXCIsIDBdLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBcIiBcIixcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICRhcnJheUVsZW1BdDogW1wiJHBvcHVsYXRlZFVzZXIubGFzdE5hbWVcIiwgMF0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICAkbWF0Y2g6IHtcbiAgICAgICAgICAgICAgc3RhdGU6IHtcbiAgICAgICAgICAgICAgICAkaW46IEpTT04ucGFyc2Uoc3RhdGUpLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgIHR5cGU6ICB7XG4gICAgICAgICAgICAgICRpbjogSlNPTi5wYXJzZSh0eXBlKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICAkbG9va3VwOiB7XG4gICAgICAgICAgZnJvbTogXCJzeXN0ZW1zXCIsXG4gICAgICAgICAgbG9jYWxGaWVsZDogXCJzeXN0ZW1cIixcbiAgICAgICAgICBmb3JlaWduRmllbGQ6IFwiX2lkXCIsXG4gICAgICAgICAgYXM6IFwicG9wdWxhdGVkU3lzdGVtXCIsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICAkc2V0OiB7XG4gICAgICAgICAgc3lzdGVtTmFtZToge1xuICAgICAgICAgICAgJGFycmF5RWxlbUF0OiBbXCIkcG9wdWxhdGVkU3lzdGVtLm5hbWVcIiwgMF0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgICRsb29rdXA6IHtcbiAgICAgICAgICBmcm9tOiBcImN1c3RvbWVyc1wiLFxuICAgICAgICAgIGxvY2FsRmllbGQ6IFwicG9wdWxhdGVkU3lzdGVtLmN1c3RvbWVyXCIsXG4gICAgICAgICAgZm9yZWlnbkZpZWxkOiBcIl9pZFwiLFxuICAgICAgICAgIGFzOiBcInBvcHVsYXRlZEN1c3RvbWVyXCIsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICAkc2V0OiB7XG4gICAgICAgICAgY3VzdG9tZXJOYW1lOiB7XG4gICAgICAgICAgICAkYXJyYXlFbGVtQXQ6IFtcIiRwb3B1bGF0ZWRDdXN0b21lci5sYWJlbFwiLCAwXSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgJG1hdGNoOiB7XG4gICAgICAgICAgJGFuZDogc2VhcmNoQXJyYXksXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICAkbWF0Y2g6IHtcbiAgICAgICAgICAkYW5kOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGVzdGltYXRlZFN0YXJ0OiB7XG4gICAgICAgICAgICAgICAgJGx0ZTogbmV3IERhdGUobW9tZW50KGVuZERhdGUpLnV0YygpKSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGVzdGltYXRlZFN0YXJ0OiB7XG4gICAgICAgICAgICAgICAgJGd0ZTogbmV3IERhdGUobW9tZW50KHN0YXJ0RGF0ZSkudXRjKCkpLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgJHByb2plY3Q6IHtcbiAgICAgICAgICBwb3B1bGF0ZWRVc2VyOiAwLFxuICAgICAgICAgIHBvcHVsYXRlZFN5c3RlbTogMCxcbiAgICAgICAgICBwb3B1bGF0ZWRDdXN0b21lcjogMCxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgXSk7XG5cbiAgICB0YXNrRG9jLm1hcCgodGFzaykgPT4ge1xuICAgICAgdGFzay5lc3RpbWF0ZWRTdGFydCA9IG1vbWVudCh0YXNrLmVzdGltYXRlZFN0YXJ0KS50eih0aW1lWm9uZSkuZm9ybWF0KCk7XG4gICAgfSk7XG4gICAgaWYgKCB0YXNrRG9jLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZXJyb3I6IHsgbWVzc2FnZTogXCJObyBUYXNrcyBmb3VuZFwiIH0sXG4gICAgICAgIHN0YXR1czogXCJubyBkYXRhXCIsXG4gICAgICAgIHN0YXR1c0NvZGU6IDIwNCxcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7IGRhdGE6IHRhc2tEb2MsIHN0YXR1czogXCJzdWNjZXNzXCIgfTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIHsgZXJyLCBzdGF0dXM6IFwiZXJyb3JcIiB9O1xuICB9XG59O1xuIl19