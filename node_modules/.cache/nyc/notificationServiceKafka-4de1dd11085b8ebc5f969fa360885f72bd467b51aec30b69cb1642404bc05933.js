function cov_10y79e2tf6(){var path="/home/azer/Desktop/jenkins/app/monitoringApp/kafka/notificationServiceKafka.js";var hash="dbfc7b8dcfa128d0839a29b8b43908f988add34f";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/azer/Desktop/jenkins/app/monitoringApp/kafka/notificationServiceKafka.js",statementMap:{"0":{start:{line:1,column:18},end:{line:1,column:36}},"1":{start:{line:2,column:15},end:{line:2,column:42}},"2":{start:{line:4,column:14},end:{line:7,column:2}},"3":{start:{line:9,column:17},end:{line:9,column:33}},"4":{start:{line:11,column:14},end:{line:11,column:27}},"5":{start:{line:13,column:0},end:{line:28,column:1}},"6":{start:{line:14,column:4},end:{line:27,column:5}},"7":{start:{line:15,column:8},end:{line:26,column:9}},"8":{start:{line:16,column:12},end:{line:16,column:36}},"9":{start:{line:17,column:12},end:{line:22,column:14}},"10":{start:{line:23,column:12},end:{line:23,column:52}},"11":{start:{line:25,column:12},end:{line:25,column:60}},"12":{start:{line:30,column:0},end:{line:38,column:2}},"13":{start:{line:40,column:0},end:{line:66,column:2}},"14":{start:{line:44,column:4},end:{line:65,column:5}},"15":{start:{line:45,column:8},end:{line:60,column:9}},"16":{start:{line:46,column:12},end:{line:46,column:37}},"17":{start:{line:47,column:12},end:{line:52,column:15}},"18":{start:{line:55,column:12},end:{line:58,column:14}},"19":{start:{line:59,column:12},end:{line:59,column:24}},"20":{start:{line:62,column:8},end:{line:64,column:10}},"21":{start:{line:68,column:0},end:{line:81,column:1}},"22":{start:{line:69,column:4},end:{line:80,column:5}},"23":{start:{line:70,column:8},end:{line:70,column:32}},"24":{start:{line:71,column:12},end:{line:76,column:14}},"25":{start:{line:77,column:12},end:{line:77,column:52}},"26":{start:{line:79,column:8},end:{line:79,column:70}},"27":{start:{line:83,column:0},end:{line:98,column:1}},"28":{start:{line:84,column:4},end:{line:97,column:5}},"29":{start:{line:85,column:8},end:{line:96,column:9}},"30":{start:{line:86,column:12},end:{line:86,column:36}},"31":{start:{line:87,column:12},end:{line:92,column:14}},"32":{start:{line:93,column:12},end:{line:93,column:71}},"33":{start:{line:95,column:12},end:{line:95,column:60}},"34":{start:{line:100,column:0},end:{line:115,column:1}},"35":{start:{line:101,column:4},end:{line:114,column:5}},"36":{start:{line:102,column:8},end:{line:113,column:9}},"37":{start:{line:103,column:12},end:{line:103,column:36}},"38":{start:{line:104,column:12},end:{line:109,column:14}},"39":{start:{line:110,column:12},end:{line:110,column:69}},"40":{start:{line:112,column:12},end:{line:112,column:60}},"41":{start:{line:117,column:0},end:{line:130,column:1}},"42":{start:{line:118,column:4},end:{line:129,column:5}},"43":{start:{line:119,column:8},end:{line:128,column:9}},"44":{start:{line:120,column:12},end:{line:120,column:36}},"45":{start:{line:121,column:12},end:{line:124,column:14}},"46":{start:{line:125,column:12},end:{line:125,column:61}},"47":{start:{line:127,column:12},end:{line:127,column:76}},"48":{start:{line:132,column:0},end:{line:145,column:1}},"49":{start:{line:133,column:4},end:{line:144,column:5}},"50":{start:{line:134,column:8},end:{line:143,column:9}},"51":{start:{line:135,column:12},end:{line:135,column:36}},"52":{start:{line:136,column:12},end:{line:139,column:14}},"53":{start:{line:140,column:12},end:{line:140,column:62}},"54":{start:{line:142,column:12},end:{line:142,column:77}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:13,column:20},end:{line:13,column:21}},loc:{start:{line:13,column:54},end:{line:28,column:1}},line:13},"1":{name:"(anonymous_1)",decl:{start:{line:40,column:34},end:{line:40,column:35}},loc:{start:{line:43,column:6},end:{line:66,column:1}},line:43},"2":{name:"(anonymous_2)",decl:{start:{line:68,column:29},end:{line:68,column:30}},loc:{start:{line:68,column:76},end:{line:81,column:1}},line:68},"3":{name:"(anonymous_3)",decl:{start:{line:83,column:26},end:{line:83,column:27}},loc:{start:{line:83,column:67},end:{line:98,column:1}},line:83},"4":{name:"(anonymous_4)",decl:{start:{line:100,column:37},end:{line:100,column:38}},loc:{start:{line:100,column:83},end:{line:115,column:1}},line:100},"5":{name:"(anonymous_5)",decl:{start:{line:117,column:23},end:{line:117,column:24}},loc:{start:{line:117,column:60},end:{line:130,column:1}},line:117},"6":{name:"(anonymous_6)",decl:{start:{line:132,column:24},end:{line:132,column:25}},loc:{start:{line:132,column:62},end:{line:145,column:1}},line:132}},branchMap:{"0":{loc:{start:{line:13,column:29},end:{line:13,column:41}},type:"default-arg",locations:[{start:{line:13,column:35},end:{line:13,column:41}}],line:13},"1":{loc:{start:{line:14,column:4},end:{line:27,column:5}},type:"if",locations:[{start:{line:14,column:4},end:{line:27,column:5}},{start:{line:14,column:4},end:{line:27,column:5}}],line:14},"2":{loc:{start:{line:44,column:4},end:{line:65,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:65,column:5}},{start:{line:44,column:4},end:{line:65,column:5}}],line:44},"3":{loc:{start:{line:68,column:36},end:{line:68,column:50}},type:"default-arg",locations:[{start:{line:68,column:42},end:{line:68,column:50}}],line:68},"4":{loc:{start:{line:83,column:35},end:{line:83,column:53}},type:"default-arg",locations:[{start:{line:83,column:41},end:{line:83,column:53}}],line:83},"5":{loc:{start:{line:84,column:4},end:{line:97,column:5}},type:"if",locations:[{start:{line:84,column:4},end:{line:97,column:5}},{start:{line:84,column:4},end:{line:97,column:5}}],line:84},"6":{loc:{start:{line:100,column:46},end:{line:100,column:69}},type:"default-arg",locations:[{start:{line:100,column:52},end:{line:100,column:69}}],line:100},"7":{loc:{start:{line:101,column:4},end:{line:114,column:5}},type:"if",locations:[{start:{line:101,column:4},end:{line:114,column:5}},{start:{line:101,column:4},end:{line:114,column:5}}],line:101},"8":{loc:{start:{line:117,column:32},end:{line:117,column:47}},type:"default-arg",locations:[{start:{line:117,column:38},end:{line:117,column:47}}],line:117},"9":{loc:{start:{line:118,column:4},end:{line:129,column:5}},type:"if",locations:[{start:{line:118,column:4},end:{line:129,column:5}},{start:{line:118,column:4},end:{line:129,column:5}}],line:118},"10":{loc:{start:{line:132,column:33},end:{line:132,column:49}},type:"default-arg",locations:[{start:{line:132,column:39},end:{line:132,column:49}}],line:132},"11":{loc:{start:{line:133,column:4},end:{line:144,column:5}},type:"if",locations:[{start:{line:133,column:4},end:{line:144,column:5}},{start:{line:133,column:4},end:{line:144,column:5}}],line:133}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},b:{"0":[0],"1":[0,0],"2":[0,0],"3":[0],"4":[0],"5":[0,0],"6":[0],"7":[0,0],"8":[0],"9":[0,0],"10":[0],"11":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"dbfc7b8dcfa128d0839a29b8b43908f988add34f"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_10y79e2tf6=function(){return actualCoverage;};}return actualCoverage;}cov_10y79e2tf6();const{Kafka}=(cov_10y79e2tf6().s[0]++,require('kafkajs'));const logger=(cov_10y79e2tf6().s[1]++,require('../config/logger'));const kafka=(cov_10y79e2tf6().s[2]++,new Kafka({clientId:'coreNotificationClient',brokers:[process.env.REMOTE_KAFKA_SERVER]}));const producer=(cov_10y79e2tf6().s[3]++,kafka.producer());const TOPIC=(cov_10y79e2tf6().s[4]++,"notif_topic");cov_10y79e2tf6().s[5]++;exports.taskNotif=async({key=(cov_10y79e2tf6().b[0][0]++,"Task"),task})=>{cov_10y79e2tf6().f[0]++;cov_10y79e2tf6().s[6]++;if(task){cov_10y79e2tf6().b[1][0]++;cov_10y79e2tf6().s[7]++;try{cov_10y79e2tf6().s[8]++;await producer.connect();cov_10y79e2tf6().s[9]++;await producer.send({topic:'notif_topic',messages:[{key,value:JSON.stringify(task)}]});cov_10y79e2tf6().s[10]++;console.log('Notif sent Successfully !');}catch(error){cov_10y79e2tf6().s[11]++;console.log('Error while sending notif',error);}}else{cov_10y79e2tf6().b[1][1]++;}};cov_10y79e2tf6().s[12]++;exports.ITOperationNotificationStatus={CREATE:"created",UPDATE:"updated",FINISH:"finished",REMIND:"reminder",CANCEL:"canceled",POSTPONE:"postponed",EXTEND:"extended"};cov_10y79e2tf6().s[13]++;exports.ITOperationNotification=async({status,ITOperationNotification})=>{cov_10y79e2tf6().f[1]++;cov_10y79e2tf6().s[14]++;if(ITOperationNotification){cov_10y79e2tf6().b[2][0]++;cov_10y79e2tf6().s[15]++;try{cov_10y79e2tf6().s[16]++;await producer.connect();cov_10y79e2tf6().s[17]++;await producer.send({topic:TOPIC,messages:[{key:"ITOperation",value:JSON.stringify(ITOperationNotification),headers:{"it-operation-type":status}}]});}catch(error){cov_10y79e2tf6().s[18]++;console.error("Error on sending an `ITOperationNotification` notification %O",error);cov_10y79e2tf6().s[19]++;throw error;}}else{cov_10y79e2tf6().b[2][1]++;cov_10y79e2tf6().s[20]++;console.error("IT operation notification is not provided. Please provide an `ITOperationNotification` object.");}};cov_10y79e2tf6().s[21]++;exports.systemNotification=async({key=(cov_10y79e2tf6().b[3][0]++,"System"),systemGlobalStatus})=>{cov_10y79e2tf6().f[2]++;cov_10y79e2tf6().s[22]++;try{cov_10y79e2tf6().s[23]++;await producer.connect();cov_10y79e2tf6().s[24]++;await producer.send({topic:'notif_topic',messages:[{key,value:JSON.stringify(systemGlobalStatus)}]});cov_10y79e2tf6().s[25]++;console.log('Notif sent Successfully !');}catch(error){cov_10y79e2tf6().s[26]++;console.log('Error while sending system notification',error);}};cov_10y79e2tf6().s[27]++;exports.teamLeaderNotif=async({key=(cov_10y79e2tf6().b[4][0]++,'TeamLeader'),shift})=>{cov_10y79e2tf6().f[3]++;cov_10y79e2tf6().s[28]++;if(shift){cov_10y79e2tf6().b[5][0]++;cov_10y79e2tf6().s[29]++;try{cov_10y79e2tf6().s[30]++;await producer.connect();cov_10y79e2tf6().s[31]++;await producer.send({topic:'notif_topic',messages:[{key,value:JSON.stringify(shift)}]});cov_10y79e2tf6().s[32]++;console.log('assign team leader Notif sent Successfully !');}catch(error){cov_10y79e2tf6().s[33]++;console.log('Error while sending notif',error);}}else{cov_10y79e2tf6().b[5][1]++;}};cov_10y79e2tf6().s[34]++;exports.remindUnassignedShiftNotif=async({key=(cov_10y79e2tf6().b[6][0]++,'ShiftUnassigned'),shift})=>{cov_10y79e2tf6().f[4]++;cov_10y79e2tf6().s[35]++;if(shift){cov_10y79e2tf6().b[7][0]++;cov_10y79e2tf6().s[36]++;try{cov_10y79e2tf6().s[37]++;await producer.connect();cov_10y79e2tf6().s[38]++;await producer.send({topic:'notif_topic',messages:[{key,value:JSON.stringify(shift)}]});cov_10y79e2tf6().s[39]++;console.log('Shift Unassigned Notif sent Successfully !');}catch(error){cov_10y79e2tf6().s[40]++;console.log('Error while sending notif',error);}}else{cov_10y79e2tf6().b[7][1]++;}};cov_10y79e2tf6().s[41]++;exports.commentNotif=async({key=(cov_10y79e2tf6().b[8][0]++,'Comment'),data})=>{cov_10y79e2tf6().f[5]++;cov_10y79e2tf6().s[42]++;if(data){cov_10y79e2tf6().b[9][0]++;cov_10y79e2tf6().s[43]++;try{cov_10y79e2tf6().s[44]++;await producer.connect();cov_10y79e2tf6().s[45]++;await producer.send({topic:TOPIC,messages:[{key,value:JSON.stringify(data)}]});cov_10y79e2tf6().s[46]++;logger.debug('Comment Notif sent Successfully !');}catch(error){cov_10y79e2tf6().s[47]++;logger.error('Error while sending comment notification',error);}}else{cov_10y79e2tf6().b[9][1]++;}};cov_10y79e2tf6().s[48]++;exports.newsFeedNotif=async({key=(cov_10y79e2tf6().b[10][0]++,'Newsfeed'),data})=>{cov_10y79e2tf6().f[6]++;cov_10y79e2tf6().s[49]++;if(data){cov_10y79e2tf6().b[11][0]++;cov_10y79e2tf6().s[50]++;try{cov_10y79e2tf6().s[51]++;await producer.connect();cov_10y79e2tf6().s[52]++;await producer.send({topic:TOPIC,messages:[{key,value:JSON.stringify(data)}]});cov_10y79e2tf6().s[53]++;logger.debug('Newsfeed Notif sent Successfully !');}catch(error){cov_10y79e2tf6().s[54]++;logger.error('Error while sending Newsfeed notification',error);}}else{cov_10y79e2tf6().b[11][1]++;}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vdGlmaWNhdGlvblNlcnZpY2VLYWZrYS5qcyJdLCJuYW1lcyI6WyJLYWZrYSIsInJlcXVpcmUiLCJsb2dnZXIiLCJrYWZrYSIsImNsaWVudElkIiwiYnJva2VycyIsInByb2Nlc3MiLCJlbnYiLCJSRU1PVEVfS0FGS0FfU0VSVkVSIiwicHJvZHVjZXIiLCJUT1BJQyIsImV4cG9ydHMiLCJ0YXNrTm90aWYiLCJrZXkiLCJ0YXNrIiwiY29ubmVjdCIsInNlbmQiLCJ0b3BpYyIsIm1lc3NhZ2VzIiwidmFsdWUiLCJKU09OIiwic3RyaW5naWZ5IiwiY29uc29sZSIsImxvZyIsImVycm9yIiwiSVRPcGVyYXRpb25Ob3RpZmljYXRpb25TdGF0dXMiLCJDUkVBVEUiLCJVUERBVEUiLCJGSU5JU0giLCJSRU1JTkQiLCJDQU5DRUwiLCJQT1NUUE9ORSIsIkVYVEVORCIsIklUT3BlcmF0aW9uTm90aWZpY2F0aW9uIiwic3RhdHVzIiwiaGVhZGVycyIsInN5c3RlbU5vdGlmaWNhdGlvbiIsInN5c3RlbUdsb2JhbFN0YXR1cyIsInRlYW1MZWFkZXJOb3RpZiIsInNoaWZ0IiwicmVtaW5kVW5hc3NpZ25lZFNoaWZ0Tm90aWYiLCJjb21tZW50Tm90aWYiLCJkYXRhIiwiZGVidWciLCJuZXdzRmVlZE5vdGlmIl0sIm1hcHBpbmdzIjoiaXdPQWVZOzJGQWZaLEtBQU0sQ0FBRUEsS0FBRiwyQkFBWUMsT0FBTyxDQUFDLFNBQUQsQ0FBbkIsQ0FBTixDQUNBLEtBQU1DLENBQUFBLE1BQU0sMEJBQUdELE9BQU8sQ0FBQyxrQkFBRCxDQUFWLENBQVosQ0FFQSxLQUFNRSxDQUFBQSxLQUFLLDBCQUFHLEdBQUlILENBQUFBLEtBQUosQ0FBVSxDQUNwQkksUUFBUSxDQUFFLHdCQURVLENBRXBCQyxPQUFPLENBQUUsQ0FBQ0MsT0FBTyxDQUFDQyxHQUFSLENBQVlDLG1CQUFiLENBRlcsQ0FBVixDQUFILENBQVgsQ0FLQSxLQUFNQyxDQUFBQSxRQUFRLDBCQUFHTixLQUFLLENBQUNNLFFB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QVlILENBYkQiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IEthZmthIH0gPSByZXF1aXJlKCdrYWZrYWpzJyk7XG5jb25zdCBsb2dnZXIgPSByZXF1aXJlKCcuLi9jb25maWcvbG9nZ2VyJyk7XG5cbmNvbnN0IGthZmthID0gbmV3IEthZmthKHtcbiAgICBjbGllbnRJZDogJ2NvcmVOb3RpZmljYXRpb25DbGllbnQnLFxuICAgIGJyb2tlcnM6IFtwcm9jZXNzLmVudi5SRU1PVEVfS0FGS0FfU0VSVkVSXVxufSlcblxuY29uc3QgcHJvZHVjZXIgPSBrYWZrYS5wcm9kdWNlcigpXG5cbmNvbnN0IFRPUElDID0gXCJub3RpZl90b3BpY1wiXG5cbmV4cG9ydHMudGFza05vdGlmID0gYXN5bmMgKHsga2V5ID0gXCJUYXNrXCIsIHRhc2sgfSkgPT4ge1xuICAgIGlmKHRhc2spe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgcHJvZHVjZXIuY29ubmVjdCgpXG4gICAgICAgICAgICBhd2FpdCBwcm9kdWNlci5zZW5kKHtcbiAgICAgICAgICAgICAgICB0b3BpYzogJ25vdGlmX3RvcGljJyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgICAgICAgICAgICB7IGtleSwgdmFsdWU6IEpTT04uc3RyaW5naWZ5KHRhc2spIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTm90aWYgc2VudCBTdWNjZXNzZnVsbHkgIScpXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3Igd2hpbGUgc2VuZGluZyBub3RpZicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0cy5JVE9wZXJhdGlvbk5vdGlmaWNhdGlvblN0YXR1cyA9IHtcbiAgICBDUkVBVEU6IFwiY3JlYXRlZFwiLFxuICAgIFVQREFURTogXCJ1cGRhdGVkXCIsXG4gICAgRklOSVNIOiBcImZpbmlzaGVkXCIsXG4gICAgUkVNSU5EOiBcInJlbWluZGVyXCIsXG4gICAgQ0FOQ0VMOiBcImNhbmNlbGVkXCIsXG4gICAgUE9TVFBPTkU6IFwicG9zdHBvbmVkXCIsXG4gICAgRVhURU5EOiBcImV4dGVuZGVkXCIsXG59O1xuXG5leHBvcnRzLklUT3BlcmF0aW9uTm90aWZpY2F0aW9uID0gYXN5bmMgKHtcbiAgICBzdGF0dXMsXG4gICAgSVRPcGVyYXRpb25Ob3RpZmljYXRpb24sXG59KSA9PiB7XG4gICAgaWYgKElUT3BlcmF0aW9uTm90aWZpY2F0aW9uKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9kdWNlci5jb25uZWN0KCk7XG4gICAgICAgICAgICBhd2FpdCBwcm9kdWNlci5zZW5kKHtcbiAgICAgICAgICAgICAgICB0b3BpYzogVE9QSUMsXG4gICAgICAgICAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgeyBrZXk6IFwiSVRPcGVyYXRpb25cIiwgdmFsdWU6IEpTT04uc3RyaW5naWZ5KElUT3BlcmF0aW9uTm90aWZpY2F0aW9uKSwgaGVhZGVyczogeyBcIml0LW9wZXJhdGlvbi10eXBlXCI6IHN0YXR1cyB9IH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICAgIFwiRXJyb3Igb24gc2VuZGluZyBhbiBgSVRPcGVyYXRpb25Ob3RpZmljYXRpb25gIG5vdGlmaWNhdGlvbiAlT1wiLFxuICAgICAgICAgICAgICAgIGVycm9yXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgXCJJVCBvcGVyYXRpb24gbm90aWZpY2F0aW9uIGlzIG5vdCBwcm92aWRlZC4gUGxlYXNlIHByb3ZpZGUgYW4gYElUT3BlcmF0aW9uTm90aWZpY2F0aW9uYCBvYmplY3QuXCJcbiAgICAgICAgKTtcbiAgICB9XG59O1xuXG5leHBvcnRzLnN5c3RlbU5vdGlmaWNhdGlvbiA9IGFzeW5jKHtrZXkgPSBcIlN5c3RlbVwiLCBzeXN0ZW1HbG9iYWxTdGF0dXN9KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgcHJvZHVjZXIuY29ubmVjdCgpXG4gICAgICAgICAgICBhd2FpdCBwcm9kdWNlci5zZW5kKHtcbiAgICAgICAgICAgICAgICB0b3BpYzogJ25vdGlmX3RvcGljJyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgICAgICAgICAgICB7IGtleSwgdmFsdWU6IEpTT04uc3RyaW5naWZ5KHN5c3RlbUdsb2JhbFN0YXR1cykgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdOb3RpZiBzZW50IFN1Y2Nlc3NmdWxseSAhJylcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3Igd2hpbGUgc2VuZGluZyBzeXN0ZW0gbm90aWZpY2F0aW9uJywgZXJyb3IpO1xuICAgIH1cbn1cblxuZXhwb3J0cy50ZWFtTGVhZGVyTm90aWYgPSBhc3luYyAoeyBrZXkgPSAnVGVhbUxlYWRlcicsIHNoaWZ0IH0pID0+IHtcbiAgICBpZihzaGlmdCl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9kdWNlci5jb25uZWN0KClcbiAgICAgICAgICAgIGF3YWl0IHByb2R1Y2VyLnNlbmQoe1xuICAgICAgICAgICAgICAgIHRvcGljOiAnbm90aWZfdG9waWMnLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAgICAgICAgICAgIHsga2V5LCB2YWx1ZTogSlNPTi5zdHJpbmdpZnkoc2hpZnQpIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnYXNzaWduIHRlYW0gbGVhZGVyIE5vdGlmIHNlbnQgU3VjY2Vzc2Z1bGx5ICEnKVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIHdoaWxlIHNlbmRpbmcgbm90aWYnLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydHMucmVtaW5kVW5hc3NpZ25lZFNoaWZ0Tm90aWYgPSBhc3luYyAoeyBrZXkgPSAnU2hpZnRVbmFzc2lnbmVkJywgc2hpZnQgfSkgPT4ge1xuICAgIGlmKHNoaWZ0KXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHByb2R1Y2VyLmNvbm5lY3QoKVxuICAgICAgICAgICAgYXdhaXQgcHJvZHVjZXIuc2VuZCh7XG4gICAgICAgICAgICAgICAgdG9waWM6ICdub3RpZl90b3BpYycsXG4gICAgICAgICAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgeyBrZXksIHZhbHVlOiBKU09OLnN0cmluZ2lmeShzaGlmdCkgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTaGlmdCBVbmFzc2lnbmVkIE5vdGlmIHNlbnQgU3VjY2Vzc2Z1bGx5ICEnKVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIHdoaWxlIHNlbmRpbmcgbm90aWYnLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydHMuY29tbWVudE5vdGlmID0gYXN5bmMgKHsga2V5ID0gJ0NvbW1lbnQnLCBkYXRhIH0pID0+IHtcbiAgICBpZiAoZGF0YSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9kdWNlci5jb25uZWN0KClcbiAgICAgICAgICAgIGF3YWl0IHByb2R1Y2VyLnNlbmQoe1xuICAgICAgICAgICAgICAgIHRvcGljOiBUT1BJQyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlczogW3sga2V5LCB2YWx1ZTogSlNPTi5zdHJpbmdpZnkoZGF0YSkgfV1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0NvbW1lbnQgTm90aWYgc2VudCBTdWNjZXNzZnVsbHkgIScpXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHdoaWxlIHNlbmRpbmcgY29tbWVudCBub3RpZmljYXRpb24nLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydHMubmV3c0ZlZWROb3RpZiA9IGFzeW5jICh7IGtleSA9ICdOZXdzZmVlZCcsIGRhdGEgfSkgPT4ge1xuICAgIGlmIChkYXRhKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHByb2R1Y2VyLmNvbm5lY3QoKVxuICAgICAgICAgICAgYXdhaXQgcHJvZHVjZXIuc2VuZCh7XG4gICAgICAgICAgICAgICAgdG9waWM6IFRPUElDLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBbeyBrZXksIHZhbHVlOiBKU09OLnN0cmluZ2lmeShkYXRhKSB9XVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnTmV3c2ZlZWQgTm90aWYgc2VudCBTdWNjZXNzZnVsbHkgIScpXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHdoaWxlIHNlbmRpbmcgTmV3c2ZlZWQgbm90aWZpY2F0aW9uJywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxufSJdfQ==