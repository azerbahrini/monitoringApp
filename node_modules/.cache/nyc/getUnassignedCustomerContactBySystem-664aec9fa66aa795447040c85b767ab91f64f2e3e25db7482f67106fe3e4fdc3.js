function cov_25gdrnh72l(){var path="/home/azer/Desktop/jenkins/app/monitoringApp/services/customerContact/getUnassignedCustomerContactBySystem.js";var hash="5b6c81e611344144214e353394bac1834b556784";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/azer/Desktop/jenkins/app/monitoringApp/services/customerContact/getUnassignedCustomerContactBySystem.js",statementMap:{"0":{start:{line:1,column:24},end:{line:1,column:63}},"1":{start:{line:2,column:15},end:{line:2,column:45}},"2":{start:{line:3,column:23},end:{line:3,column:70}},"3":{start:{line:6,column:17},end:{line:9,column:3}},"4":{start:{line:8,column:6},end:{line:8,column:70}},"5":{start:{line:8,column:36},end:{line:8,column:69}},"6":{start:{line:10,column:2},end:{line:15,column:6}},"7":{start:{line:10,column:31},end:{line:15,column:3}},"8":{start:{line:17,column:0},end:{line:45,column:2}},"9":{start:{line:18,column:2},end:{line:44,column:3}},"10":{start:{line:19,column:31},end:{line:19,column:33}},"11":{start:{line:20,column:27},end:{line:20,column:57}},"12":{start:{line:21,column:29},end:{line:26,column:13}},"13":{start:{line:27,column:4},end:{line:27,column:80}},"14":{start:{line:28,column:4},end:{line:33,column:5}},"15":{start:{line:29,column:6},end:{line:32,column:8}},"16":{start:{line:34,column:4},end:{line:37,column:6}},"17":{start:{line:39,column:4},end:{line:39,column:23}},"18":{start:{line:40,column:4},end:{line:43,column:6}}},fnMap:{"0":{name:"getUnassigned",decl:{start:{line:5,column:9},end:{line:5,column:22}},loc:{start:{line:5,column:35},end:{line:16,column:1}},line:5},"1":{name:"(anonymous_1)",decl:{start:{line:7,column:4},end:{line:7,column:5}},loc:{start:{line:8,column:6},end:{line:8,column:70}},line:8},"2":{name:"(anonymous_2)",decl:{start:{line:8,column:18},end:{line:8,column:19}},loc:{start:{line:8,column:36},end:{line:8,column:69}},line:8},"3":{name:"(anonymous_3)",decl:{start:{line:10,column:20},end:{line:10,column:21}},loc:{start:{line:10,column:31},end:{line:15,column:3}},line:10},"4":{name:"(anonymous_4)",decl:{start:{line:17,column:17},end:{line:17,column:18}},loc:{start:{line:17,column:49},end:{line:45,column:1}},line:17}},branchMap:{"0":{loc:{start:{line:28,column:4},end:{line:33,column:5}},type:"if",locations:[{start:{line:28,column:4},end:{line:33,column:5}},{start:{line:28,column:4},end:{line:33,column:5}}],line:28}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5b6c81e611344144214e353394bac1834b556784"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_25gdrnh72l=function(){return actualCoverage;};}return actualCoverage;}cov_25gdrnh72l();const CustomerContact=(cov_25gdrnh72l().s[0]++,require("../../models/CustomerContact"));const System=(cov_25gdrnh72l().s[1]++,require("../../models/System"));const getContactList=(cov_25gdrnh72l().s[2]++,require("../../services/system/getContactList"));function getUnassigned(tab1,tab2){cov_25gdrnh72l().f[0]++;const output=(cov_25gdrnh72l().s[3]++,tab1?.filter(({_id:id1})=>{cov_25gdrnh72l().f[1]++;cov_25gdrnh72l().s[4]++;return!tab2?.some(({_id:id2})=>{cov_25gdrnh72l().f[2]++;cov_25gdrnh72l().s[5]++;return id2.toString()===id1.toString();});}));cov_25gdrnh72l().s[6]++;return output.map(item=>{cov_25gdrnh72l().f[3]++;cov_25gdrnh72l().s[7]++;return{_id:item._id,lastName:item.lastName,mail:item.mail,phoneNumber:item.phoneNumber};});}cov_25gdrnh72l().s[8]++;module.exports=async(customerId,systemId)=>{cov_25gdrnh72l().f[4]++;cov_25gdrnh72l().s[9]++;try{let unssignedListContact=(cov_25gdrnh72l().s[10]++,[]);const systemContacts=(cov_25gdrnh72l().s[11]++,await getContactList(systemId));const customerContacts=(cov_25gdrnh72l().s[12]++,await CustomerContact.find({customer:customerId,isActive:true}).lean().exec());cov_25gdrnh72l().s[13]++;unssignedListContact=getUnassigned(customerContacts,systemContacts.data);cov_25gdrnh72l().s[14]++;if(unssignedListContact.length===0){cov_25gdrnh72l().b[0][0]++;cov_25gdrnh72l().s[15]++;return{data:"All Customer Contact are assigned to system",status:"success"};}else{cov_25gdrnh72l().b[0][1]++;}cov_25gdrnh72l().s[16]++;return{data:unssignedListContact,status:"success"};}catch(err){cov_25gdrnh72l().s[17]++;console.error(err);cov_25gdrnh72l().s[18]++;return{err,status:"error"};}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldFVuYXNzaWduZWRDdXN0b21lckNvbnRhY3RCeVN5c3RlbS5qcyJdLCJuYW1lcyI6WyJDdXN0b21lckNvbnRhY3QiLCJyZXF1aXJlIiwiU3lzdGVtIiwiZ2V0Q29udGFjdExpc3QiLCJnZXRVbmFzc2lnbmVkIiwidGFiMSIsInRhYjIiLCJvdXRwdXQiLCJmaWx0ZXIiLCJfaWQiLCJpZDEiLCJzb21lIiwiaWQyIiwidG9TdHJpbmciLCJtYXAiLCJpdGVtIiwibGFzdE5hbWUiLCJtYWlsIiwicGhvbmVOdW1iZXIiLCJtb2R1bGUiLCJleHBvcnRzIiwiY3VzdG9tZXJJZCIsInN5c3RlbUlkIiwidW5zc2lnbmVkTGlzdENvbnRhY3QiLCJzeXN0ZW1Db250YWN0cyIsImN1c3RvbWVyQ29udGFjdHMiLCJmaW5kIiwiY3VzdG9tZXIiLCJpc0FjdGl2ZSIsImxlYW4iLCJleGVjIiwiZGF0YSIsImxlbmd0aCIsInN0YXR1cyIsImVyciIsImNvbnNvbGUiLCJlcnJvciJdLCJtYXBwaW5ncyI6InN3RkFlWTsyRkFmWixLQUFNQSxDQUFBQSxlQUFlLDBCQUFHQyxPQUFPLENBQUMsOEJBQUQsQ0FBVixDQUFyQixDQUNBLEtBQU1DLENBQUFBLE1BQU0sMEJBQUdELE9BQU8sQ0FBQyxxQkFBRCxDQUFWLENBQVosQ0FDQSxLQUFNRSxDQUFBQSxjQUFjLDBCQUFHRixPQUFPLENBQUMsc0NBQUQsQ0FBVixDQUFwQixDQUVBLFFBQVNHLENBQUFBLGFBQVQsQ0FBdUJDLElBQXZCLENBQTZCQyxJQUE3QixDQUFtQyx5QkFDakMsS0FBTUMsQ0FBQUEsTUFBTSwwQkFBR0YsSUFBSSxFQUFFRyxNQUFOLENBQ2IsQ0FBQyxDQUFFQyxHQUFHLENBQUVDLEdBQVAsQ0FBRCxHQUNFLHdEQUFDSixJQUFJLEVBQUVLLElBQU4sQ0FBVyxDQUFDLENBQUVGLEdBQUcsQ0FBRUcsR0FBUCxDQUFELEdBQWtCLHVEQUFBQSxDQUFBQSxHQUFHLENBQUNDLFFBQUosS0FBbUJILEdBQUcsQ0FBQ0csUUFBSixFQUFuQixDQUFpQyxDQUE5RCxDQUFELENBQWdFLENBRnJELENBQUgsQ0FBWixDQURpQyx3QkFLakMsTUFBT04sQ0FBQUEsTUFBTSxDQUFDTyxHQUFQLENBQVlDLElBQUQsRUFBVyx3REFDM0JOLEdBQUcsQ0FBRU0sSUFBSSxDQUFDTixHQURpQixDQUUzQk8sUUFBUSxDQUFFRCxJQUFJLENBQUNDLFFBRlksQ0FHM0JDLElBQUksQ0FBRUYsSUFBSSxDQUFDRSxJQUhnQixDQUkzQkMsV0FBVyxDQUFFSCxJQUFJLENBQUNHLFdBSlMsRUFLNUIsQ0FMTSxDQUFQLENBTUQsQyx3QkFDREMsTUFBTSxDQUFDQyxPQUFQLENBQWlCLE1BQU9DLFVBQVAsQ0FBbUJDLFFBQW5CLEdBQWdDLGlEQUMvQyxHQUFJLENBQ0YsR0FBSUMsQ0FBQUEsb0JBQW9CLDJCQUFHLEVBQUgsQ0FBeEIsQ0FDQSxLQUFNQyxDQUFBQSxjQUFjLDJCQUFHLEtBQU1yQixDQUFBQSxjQUFjLENBQUNtQixRQUFELENBQXZCLENBQXBCLENBQ0EsS0FBTUcsQ0FBQUEsZ0JBQWdCLDJCQUFHLEtBQU16QixDQUFBQSxlQUFlLENBQUMwQixJQUFoQixDQUFxQixDQUNsREMsUUFBUSxDQUFFTixVQUR3QyxDQUVsRE8sUUFBUSxDQUFFLElBRndDLENBQXJCLEVBSTVCQyxJQUo0QixHQUs1QkMsSUFMNEIsRUFBVCxDQUF0QixDQUhFLHlCQVNGUCxvQkFBb0IsQ0FBR25CLGFBQWEsQ0FBQ3FCLGdCQUFELENBQW1CRCxjQUFjLENBQUNPLElBQWxDLENBQXBDLENBVEUseUJBVUYsR0FBSVIsb0JBQW9CLENBQUNTLE1BQXJCLEdBQWdDLENBQXBDLENBQXVDLHFEQUNyQyxNQUFPLENBQ0xELElBQUksQ0FBRSw2Q0FERCxDQUVMRSxNQUFNLENBQUUsU0FGSCxDQUFQLENBSUQsQ0FMRCxpQ0FWRSx5QkFnQkYsTUFBTyxDQUNMRixJQUFJLENBQUVSLG9CQURELENBRUxVLE1BQU0sQ0FBRSxTQUZILENBQVAsQ0FJRCxDQUFDLE1BQU9DLEdBQVAsQ0FBWSwwQkFDWkMsT0FBTyxDQUFDQyxLQUFSLENBQWNGLEdBQWQsRUFEWSx5QkFFWixNQUFPLENBQ0xBLEdBREssQ0FFTEQsTUFBTSxDQUFFLE9BRkgsQ0FBUCxDQUlELENBQ0YsQ0E1QkQiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBDdXN0b21lckNvbnRhY3QgPSByZXF1aXJlKFwiLi4vLi4vbW9kZWxzL0N1c3RvbWVyQ29udGFjdFwiKTtcbmNvbnN0IFN5c3RlbSA9IHJlcXVpcmUoXCIuLi8uLi9tb2RlbHMvU3lzdGVtXCIpO1xuY29uc3QgZ2V0Q29udGFjdExpc3QgPSByZXF1aXJlKFwiLi4vLi4vc2VydmljZXMvc3lzdGVtL2dldENvbnRhY3RMaXN0XCIpO1xuXG5mdW5jdGlvbiBnZXRVbmFzc2lnbmVkKHRhYjEsIHRhYjIpIHtcbiAgY29uc3Qgb3V0cHV0ID0gdGFiMT8uZmlsdGVyKFxuICAgICh7IF9pZDogaWQxIH0pID0+XG4gICAgICAhdGFiMj8uc29tZSgoeyBfaWQ6IGlkMiB9KSA9PiBpZDIudG9TdHJpbmcoKSA9PT0gaWQxLnRvU3RyaW5nKCkpXG4gICk7XG4gIHJldHVybiBvdXRwdXQubWFwKChpdGVtKSA9PiAoe1xuICAgIF9pZDogaXRlbS5faWQsXG4gICAgbGFzdE5hbWU6IGl0ZW0ubGFzdE5hbWUsXG4gICAgbWFpbDogaXRlbS5tYWlsLFxuICAgIHBob25lTnVtYmVyOiBpdGVtLnBob25lTnVtYmVyXG4gIH0pKTtcbn1cbm1vZHVsZS5leHBvcnRzID0gYXN5bmMgKGN1c3RvbWVySWQsIHN5c3RlbUlkKSA9PiB7XG4gIHRyeSB7XG4gICAgbGV0IHVuc3NpZ25lZExpc3RDb250YWN0ID0gW107XG4gICAgY29uc3Qgc3lzdGVtQ29udGFjdHMgPSBhd2FpdCBnZXRDb250YWN0TGlzdChzeXN0ZW1JZCk7XG4gICAgY29uc3QgY3VzdG9tZXJDb250YWN0cyA9IGF3YWl0IEN1c3RvbWVyQ29udGFjdC5maW5kKHtcbiAgICAgIGN1c3RvbWVyOiBjdXN0b21lcklkLFxuICAgICAgaXNBY3RpdmU6IHRydWVcbiAgICB9KVxuICAgICAgLmxlYW4oKVxuICAgICAgLmV4ZWMoKTtcbiAgICB1bnNzaWduZWRMaXN0Q29udGFjdCA9IGdldFVuYXNzaWduZWQoY3VzdG9tZXJDb250YWN0cywgc3lzdGVtQ29udGFjdHMuZGF0YSk7XG4gICAgaWYgKHVuc3NpZ25lZExpc3RDb250YWN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YTogXCJBbGwgQ3VzdG9tZXIgQ29udGFjdCBhcmUgYXNzaWduZWQgdG8gc3lzdGVtXCIsXG4gICAgICAgIHN0YXR1czogXCJzdWNjZXNzXCJcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBkYXRhOiB1bnNzaWduZWRMaXN0Q29udGFjdCxcbiAgICAgIHN0YXR1czogXCJzdWNjZXNzXCJcbiAgICB9O1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycixcbiAgICAgIHN0YXR1czogXCJlcnJvclwiXG4gICAgfTtcbiAgfVxufTtcbiJdfQ==