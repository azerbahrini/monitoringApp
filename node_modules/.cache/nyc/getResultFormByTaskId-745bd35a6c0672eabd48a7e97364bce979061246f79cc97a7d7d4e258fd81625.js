function cov_288xil2bhz(){var path="/home/azer/Desktop/jenkins/app/monitoringApp/services/resultForm/getResultFormByTaskId.js";var hash="d916c06e618b6d3c9cabfc90fc7db33457cd11e3";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/azer/Desktop/jenkins/app/monitoringApp/services/resultForm/getResultFormByTaskId.js",statementMap:{"0":{start:{line:1,column:13},end:{line:1,column:41}},"1":{start:{line:2,column:17},end:{line:2,column:36}},"2":{start:{line:4,column:0},end:{line:68,column:1}},"3":{start:{line:5,column:4},end:{line:67,column:5}},"4":{start:{line:6,column:31},end:{line:49,column:10}},"5":{start:{line:51,column:8},end:{line:58,column:9}},"6":{start:{line:52,column:12},end:{line:57,column:14}},"7":{start:{line:59,column:8},end:{line:63,column:10}},"8":{start:{line:66,column:8},end:{line:66,column:53}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:4,column:17},end:{line:4,column:18}},loc:{start:{line:4,column:35},end:{line:68,column:1}},line:4}},branchMap:{"0":{loc:{start:{line:51,column:8},end:{line:58,column:9}},type:"if",locations:[{start:{line:51,column:8},end:{line:58,column:9}},{start:{line:51,column:8},end:{line:58,column:9}}],line:51}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},f:{"0":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d916c06e618b6d3c9cabfc90fc7db33457cd11e3"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_288xil2bhz=function(){return actualCoverage;};}return actualCoverage;}cov_288xil2bhz();const Task=(cov_288xil2bhz().s[0]++,require('../../models/Task'));const mongoose=(cov_288xil2bhz().s[1]++,require("mongoose"));cov_288xil2bhz().s[2]++;module.exports=async taskId=>{cov_288xil2bhz().f[0]++;cov_288xil2bhz().s[3]++;try{const ResultFormData=(cov_288xil2bhz().s[4]++,await Task.aggregate([{'$match':{'_id':mongoose.Types.ObjectId(taskId)}},{'$lookup':{'from':'maps','localField':'map','foreignField':'_id','as':'retrievedmap'}},{'$set':{'MAID':{'$arrayElemAt':['$retrievedmap.monitoringAct',0]}}},{'$lookup':{'from':'resultforms','localField':'MAID','foreignField':'monitoringActivity','as':'formResultArray'}},{'$set':{'resultFormConfig':{'$arrayElemAt':['$formResultArray',0]}}},{'$project':{'resultFormConfig':1,'title':1,'state':1,'type':1}}]));cov_288xil2bhz().s[5]++;if(ResultFormData.length===0){cov_288xil2bhz().b[0][0]++;cov_288xil2bhz().s[6]++;return{// This message will not be passed for the controller, if you want to show it, change the return code
error:{message:"No data can be found."},code:204,status:"success"};}else{cov_288xil2bhz().b[0][1]++;}cov_288xil2bhz().s[7]++;return{data:ResultFormData[0],status:"success",code:200};}catch(error){cov_288xil2bhz().s[8]++;return{error,status:"error",code:400};}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldFJlc3VsdEZvcm1CeVRhc2tJZC5qcyJdLCJuYW1lcyI6WyJUYXNrIiwicmVxdWlyZSIsIm1vbmdvb3NlIiwibW9kdWxlIiwiZXhwb3J0cyIsInRhc2tJZCIsIlJlc3VsdEZvcm1EYXRhIiwiYWdncmVnYXRlIiwiVHlwZXMiLCJPYmplY3RJZCIsImxlbmd0aCIsImVycm9yIiwibWVzc2FnZSIsImNvZGUiLCJzdGF0dXMiLCJkYXRhIl0sIm1hcHBpbmdzIjoid2hEQWVZOzJGQWZaLEtBQU1BLENBQUFBLElBQUksMEJBQUdDLE9BQU8sQ0FBQyxtQkFBRCxDQUFWLENBQVYsQ0FDQSxLQUFNQyxDQUFBQSxRQUFRLDBCQUFHRCxPQUFPLENBQUMsVUFBRCxDQUFWLENBQWQsQyx3QkFFQUUsTUFBTSxDQUFDQyxPQUFQLENBQWlCLEtBQU9DLENBQUFBLE1BQVAsRUFBa0IsaURBQy9CLEdBQUksQ0FDQSxLQUFNQyxDQUFBQSxjQUFjLDBCQUFHLEtBQU1OLENBQUFBLElBQUksQ0FBQ08sU0FBTCxDQUFlLENBQ3hDLENBQ0ksU0FBVSxDQUNOLE1BQU9MLFFBQVEsQ0FBQ00sS0FBVCxDQUFlQyxRQUFmLENBQXdCSixNQUF4QixDQURELENBRGQsQ0FEd0MsQ0FLckMsQ0FDQyxVQUFXLENBQ1AsT0FBUSxNQURELENBRVAsYUFBYyxLQUZQLENBR1AsZUFBZ0IsS0FIVCxDQUlQLEtBQU0sY0FKQyxDQURaLENBTHFDLENBWXJDLENBQ0MsT0FBUSxDQUNKLE9BQVEsQ0FDSixlQUFnQixDQUNaLDZCQURZLENBQ21CLENBRG5CLENBRFosQ0FESixDQURULENBWnFDLENBb0JyQyxDQUNDLFVBQVcsQ0FDUCxPQUFRLGFBREQsQ0FFUCxhQUFjLE1BRlAsQ0FHUCxlQUFnQixvQkFIVCxDQUlQLEtBQU0saUJBSkMsQ0FEWixDQXBCcUMsQ0EyQnJDLENBQ0MsT0FBUSxDQUNKLG1CQUFvQixDQUNoQixlQUFnQixDQUNaLGtCQURZLENBQ1EsQ0FEUixDQURBLENBRGhCLENBRFQsQ0EzQnFDLENBbUNyQyxDQUNDLFdBQVksQ0FDUixtQkFBb0IsQ0FEWixDQUVSLFFBQVMsQ0FGRCxDQUdSLFFBQVMsQ0FIRCxDQUlSLE9BQVEsQ0FKQSxDQURiLENBbkNxQyxDQUFmLENBQVQsQ0FBcEIsQ0FEQSx3QkE4Q0EsR0FBSUMsY0FBYyxDQUFDSSxNQUFmLEdBQTBCLENBQTlCLENBQWlDLG9EQUM3QixNQUFPLENBQ0g7QUFDQUMsS0FBSyxDQUFFLENBQUVDLE9BQU8sQ0FBRSx1QkFBWCxDQUZKLENBR0hDLElBQUksQ0FBRSxHQUhILENBSUhDLE1BQU0sQ0FBRSxTQUpMLENBQVAsQ0FNSCxDQVBELGlDQTlDQSx3QkFzREEsTUFBTyxDQUNIQyxJQUFJLENBQUVULGNBQWMsQ0FBQyxDQUFELENBRGpCLENBRUhRLE1BQU0sQ0FBRSxTQUZMLENBR0hELElBQUksQ0FBRSxHQUhILENBQVAsQ0FNSCxDQUFDLE1BQU9GLEtBQVAsQ0FBYyx5QkFDWixNQUFPLENBQUVBLEtBQUYsQ0FBU0csTUFBTSxDQUFFLE9BQWpCLENBQTBCRCxJQUFJLENBQUUsR0FBaEMsQ0FBUCxDQUNILENBQ0osQ0FoRUQiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBUYXNrID0gcmVxdWlyZSgnLi4vLi4vbW9kZWxzL1Rhc2snKTtcbmNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZShcIm1vbmdvb3NlXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGFzeW5jICh0YXNrSWQpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBSZXN1bHRGb3JtRGF0YSA9IGF3YWl0IFRhc2suYWdncmVnYXRlKFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAnJG1hdGNoJzoge1xuICAgICAgICAgICAgICAgICAgICAnX2lkJzogbW9uZ29vc2UuVHlwZXMuT2JqZWN0SWQodGFza0lkKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAnJGxvb2t1cCc6IHtcbiAgICAgICAgICAgICAgICAgICAgJ2Zyb20nOiAnbWFwcycsXG4gICAgICAgICAgICAgICAgICAgICdsb2NhbEZpZWxkJzogJ21hcCcsXG4gICAgICAgICAgICAgICAgICAgICdmb3JlaWduRmllbGQnOiAnX2lkJyxcbiAgICAgICAgICAgICAgICAgICAgJ2FzJzogJ3JldHJpZXZlZG1hcCdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgJyRzZXQnOiB7XG4gICAgICAgICAgICAgICAgICAgICdNQUlEJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJyRhcnJheUVsZW1BdCc6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJHJldHJpZXZlZG1hcC5tb25pdG9yaW5nQWN0JywgMFxuICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICckbG9va3VwJzoge1xuICAgICAgICAgICAgICAgICAgICAnZnJvbSc6ICdyZXN1bHRmb3JtcycsXG4gICAgICAgICAgICAgICAgICAgICdsb2NhbEZpZWxkJzogJ01BSUQnLFxuICAgICAgICAgICAgICAgICAgICAnZm9yZWlnbkZpZWxkJzogJ21vbml0b3JpbmdBY3Rpdml0eScsXG4gICAgICAgICAgICAgICAgICAgICdhcyc6ICdmb3JtUmVzdWx0QXJyYXknXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICckc2V0Jzoge1xuICAgICAgICAgICAgICAgICAgICAncmVzdWx0Rm9ybUNvbmZpZyc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICckYXJyYXlFbGVtQXQnOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJyRmb3JtUmVzdWx0QXJyYXknLCAwXG4gICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgJyRwcm9qZWN0Jzoge1xuICAgICAgICAgICAgICAgICAgICAncmVzdWx0Rm9ybUNvbmZpZyc6IDEsXG4gICAgICAgICAgICAgICAgICAgICd0aXRsZSc6IDEsXG4gICAgICAgICAgICAgICAgICAgICdzdGF0ZSc6IDEsXG4gICAgICAgICAgICAgICAgICAgICd0eXBlJzogMVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXSlcblxuICAgICAgICBpZiAoUmVzdWx0Rm9ybURhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgbWVzc2FnZSB3aWxsIG5vdCBiZSBwYXNzZWQgZm9yIHRoZSBjb250cm9sbGVyLCBpZiB5b3Ugd2FudCB0byBzaG93IGl0LCBjaGFuZ2UgdGhlIHJldHVybiBjb2RlXG4gICAgICAgICAgICAgICAgZXJyb3I6IHsgbWVzc2FnZTogXCJObyBkYXRhIGNhbiBiZSBmb3VuZC5cIiB9LFxuICAgICAgICAgICAgICAgIGNvZGU6IDIwNCxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFwic3VjY2Vzc1wiXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkYXRhOiBSZXN1bHRGb3JtRGF0YVswXSxcbiAgICAgICAgICAgIHN0YXR1czogXCJzdWNjZXNzXCIsXG4gICAgICAgICAgICBjb2RlOiAyMDBcbiAgICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJldHVybiB7IGVycm9yLCBzdGF0dXM6IFwiZXJyb3JcIiwgY29kZTogNDAwIH07XG4gICAgfVxufSJdfQ==