function cov_w97fu1vl7(){var path="/home/azer/Desktop/jenkins/app/monitoringApp/services/system/getTypesbyCustomerId.js";var hash="4efbdf94f598c313b2f3d912f2e3bf76f84b5081";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/azer/Desktop/jenkins/app/monitoringApp/services/system/getTypesbyCustomerId.js",statementMap:{"0":{start:{line:1,column:15},end:{line:1,column:45}},"1":{start:{line:2,column:15},end:{line:2,column:45}},"2":{start:{line:5,column:2},end:{line:5,column:69}},"3":{start:{line:5,column:39},end:{line:5,column:56}},"4":{start:{line:7,column:0},end:{line:47,column:2}},"5":{start:{line:8,column:2},end:{line:46,column:3}},"6":{start:{line:9,column:14},end:{line:9,column:16}},"7":{start:{line:10,column:24},end:{line:20,column:6}},"8":{start:{line:22,column:4},end:{line:28,column:5}},"9":{start:{line:23,column:6},end:{line:27,column:8}},"10":{start:{line:29,column:4},end:{line:36,column:5}},"11":{start:{line:29,column:17},end:{line:29,column:18}},"12":{start:{line:30,column:6},end:{line:35,column:7}},"13":{start:{line:31,column:8},end:{line:34,column:11}},"14":{start:{line:37,column:23},end:{line:37,column:50}},"15":{start:{line:39,column:4},end:{line:42,column:6}},"16":{start:{line:44,column:4},end:{line:44,column:58}},"17":{start:{line:45,column:4},end:{line:45,column:36}}},fnMap:{"0":{name:"getUniqueListBy",decl:{start:{line:4,column:9},end:{line:4,column:24}},loc:{start:{line:4,column:35},end:{line:6,column:1}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:5,column:29},end:{line:5,column:30}},loc:{start:{line:5,column:39},end:{line:5,column:56}},line:5},"2":{name:"(anonymous_2)",decl:{start:{line:7,column:17},end:{line:7,column:18}},loc:{start:{line:7,column:40},end:{line:47,column:1}},line:7}},branchMap:{"0":{loc:{start:{line:22,column:4},end:{line:28,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:28,column:5}},{start:{line:22,column:4},end:{line:28,column:5}}],line:22},"1":{loc:{start:{line:30,column:6},end:{line:35,column:7}},type:"if",locations:[{start:{line:30,column:6},end:{line:35,column:7}},{start:{line:30,column:6},end:{line:35,column:7}}],line:30}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4efbdf94f598c313b2f3d912f2e3bf76f84b5081"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_w97fu1vl7=function(){return actualCoverage;};}return actualCoverage;}cov_w97fu1vl7();const System=(cov_w97fu1vl7().s[0]++,require("../../models/System"));const logger=(cov_w97fu1vl7().s[1]++,require("../../config/logger"));function getUniqueListBy(arr,key){cov_w97fu1vl7().f[0]++;cov_w97fu1vl7().s[2]++;return[...new Map(arr.map(item=>{cov_w97fu1vl7().f[1]++;cov_w97fu1vl7().s[3]++;return[item[key],item];})).values()];}cov_w97fu1vl7().s[4]++;module.exports=async customer_Id=>{cov_w97fu1vl7().f[2]++;cov_w97fu1vl7().s[5]++;try{let tab=(cov_w97fu1vl7().s[6]++,[]);const systemTypes=(cov_w97fu1vl7().s[7]++,await System.find({customer:customer_Id,type:{$exists:true},isActive:true},{type:1,_id:0}).populate({path:"type",select:"type"}));cov_w97fu1vl7().s[8]++;if(systemTypes.length===0){cov_w97fu1vl7().b[0][0]++;cov_w97fu1vl7().s[9]++;return{err:{message:"No  Type match this criteria !"},status:"error",statusCode:404};}else{cov_w97fu1vl7().b[0][1]++;}cov_w97fu1vl7().s[10]++;for(let i=(cov_w97fu1vl7().s[11]++,0);i<systemTypes.length;i++){cov_w97fu1vl7().s[12]++;if(systemTypes[i].type){cov_w97fu1vl7().b[1][0]++;cov_w97fu1vl7().s[13]++;tab.push({_id:systemTypes[i].type._id,type:systemTypes[i].type.type});}else{cov_w97fu1vl7().b[1][1]++;}}const uniqueList=(cov_w97fu1vl7().s[14]++,getUniqueListBy(tab,"_id"));cov_w97fu1vl7().s[15]++;return{data:uniqueList,status:"success"};}catch(err){cov_w97fu1vl7().s[16]++;logger.error("Get types by Customer ID Error :",err);cov_w97fu1vl7().s[17]++;return{err,status:"error"};}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldFR5cGVzYnlDdXN0b21lcklkLmpzIl0sIm5hbWVzIjpbIlN5c3RlbSIsInJlcXVpcmUiLCJsb2dnZXIiLCJnZXRVbmlxdWVMaXN0QnkiLCJhcnIiLCJrZXkiLCJNYXAiLCJtYXAiLCJpdGVtIiwidmFsdWVzIiwibW9kdWxlIiwiZXhwb3J0cyIsImN1c3RvbWVyX0lkIiwidGFiIiwic3lzdGVtVHlwZXMiLCJmaW5kIiwiY3VzdG9tZXIiLCJ0eXBlIiwiJGV4aXN0cyIsImlzQWN0aXZlIiwiX2lkIiwicG9wdWxhdGUiLCJwYXRoIiwic2VsZWN0IiwibGVuZ3RoIiwiZXJyIiwibWVzc2FnZSIsInN0YXR1cyIsInN0YXR1c0NvZGUiLCJpIiwicHVzaCIsInVuaXF1ZUxpc3QiLCJkYXRhIiwiZXJyb3IiXSwibWFwcGluZ3MiOiI2aUZBZVk7eUZBZlosS0FBTUEsQ0FBQUEsTUFBTSx5QkFBR0MsT0FBTyxDQUFDLHFCQUFELENBQVYsQ0FBWixDQUNBLEtBQU1DLENBQUFBLE1BQU0seUJBQUdELE9BQU8sQ0FBQyxxQkFBRCxDQUFWLENBQVosQ0FFQSxRQUFTRSxDQUFBQSxlQUFULENBQXlCQyxHQUF6QixDQUE4QkMsR0FBOUIsQ0FBbUMsK0NBQ2pDLE1BQU8sQ0FBQyxHQUFHLEdBQUlDLENBQUFBLEdBQUosQ0FBUUYsR0FBRyxDQUFDRyxHQUFKLENBQVNDLElBQUQsRUFBVSxzREFBQ0EsSUFBSSxDQUFDSCxHQUFELENBQUwsQ0FBWUcsSUFBWixFQUFpQixDQUFuQyxDQUFSLEVBQThDQyxNQUE5QyxFQUFKLENBQVAsQ0FDRCxDLHVCQUNEQyxNQUFNLENBQUNDLE9BQVAsQ0FBaUIsS0FBT0MsQ0FBQUEsV0FBUCxFQUF1QiwrQ0FDdEMsR0FBSSxDQUNGLEdBQUlDLENBQUFBLEdBQUcseUJBQUcsRUFBSCxDQUFQLENBQ0EsS0FBTUMsQ0FBQUEsV0FBVyx5QkFBRyxLQUFNZCxDQUFBQSxNQUFNLENBQUNlLElBQVAsQ0FDeEIsQ0FDRUMsUUFBUSxDQUFFSixXQURaLENBRUVLLElBQUksQ0FBRSxDQUFFQyxPQUFPLENBQUUsSUFBWCxDQUZSLENBR0VDLFFBQVEsQ0FBQyxJQUhYLENBRHdCLENBTXhCLENBQUVGLElBQUksQ0FBRSxDQUFSLENBQVdHLEdBQUcsQ0FBRSxDQUFoQixDQU53QixFQU94QkMsUUFQd0IsQ0FPZixDQUNUQyxJQUFJLENBQUUsTUFERyxDQUVUQyxNQUFNLENBQUUsTUFGQyxDQVBlLENBQVQsQ0FBakIsQ0FGRSx1QkFjRixHQUFJVCxXQUFXLENBQUNVLE1BQVosR0FBdUIsQ0FBM0IsQ0FBOEIsa0RBQzVCLE1BQU8sQ0FDTEMsR0FBRyxDQUFFLENBQUVDLE9BQU8sQ0FBRSxnQ0FBWCxDQURBLENBRUxDLE1BQU0sQ0FBRSxPQUZILENBR0xDLFVBQVUsQ0FBRSxHQUhQLENBQVAsQ0FLRCxDQU5ELGdDQWRFLHdCQXFCRixJQUFLLEdBQUlDLENBQUFBLENBQUMsMEJBQUcsQ0FBSCxDQUFWLENBQWdCQSxDQUFDLENBQUdmLFdBQVcsQ0FBQ1UsTUFBaEMsQ0FBd0NLLENBQUMsRUFBekMsQ0FBNkMseUJBQzNDLEdBQUlmLFdBQVcsQ0FBQ2UsQ0FBRCxDQUFYLENBQWVaLElBQW5CLENBQXlCLG1EQUN2QkosR0FBRyxDQUFDaUIsSUFBSixDQUFTLENBQ1BWLEdBQUcsQ0FBRU4sV0FBVyxDQUFDZSxDQUFELENBQVgsQ0FBZVosSUFBZixDQUFvQkcsR0FEbEIsQ0FFUEgsSUFBSSxDQUFFSCxXQUFXLENBQUNlLENBQUQsQ0FBWCxDQUFlWixJQUFmLENBQW9CQSxJQUZuQixDQUFULEVBSUQsQ0FMRCxnQ0FNRCxDQUNELEtBQU1jLENBQUFBLFVBQVUsMEJBQUc1QixlQUFlLENBQUNVLEdBQUQsQ0FBTSxLQUFOLENBQWxCLENBQWhCLENBN0JFLHdCQStCRixNQUFPLENBQ0xtQixJQUFJLENBQUVELFVBREQsQ0FFTEosTUFBTSxDQUFFLFNBRkgsQ0FBUCxDQUlELENBQUMsTUFBT0YsR0FBUCxDQUFZLHlCQUNadkIsTUFBTSxDQUFDK0IsS0FBUCxDQUFhLGtDQUFiLENBQWlEUixHQUFqRCxFQURZLHdCQUVaLE1BQU8sQ0FBRUEsR0FBRixDQUFPRSxNQUFNLENBQUUsT0FBZixDQUFQLENBQ0QsQ0FDRixDQXhDRCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFN5c3RlbSA9IHJlcXVpcmUoXCIuLi8uLi9tb2RlbHMvU3lzdGVtXCIpO1xuY29uc3QgbG9nZ2VyID0gcmVxdWlyZShcIi4uLy4uL2NvbmZpZy9sb2dnZXJcIik7XG5cbmZ1bmN0aW9uIGdldFVuaXF1ZUxpc3RCeShhcnIsIGtleSkge1xuICByZXR1cm4gWy4uLm5ldyBNYXAoYXJyLm1hcCgoaXRlbSkgPT4gW2l0ZW1ba2V5XSwgaXRlbV0pKS52YWx1ZXMoKV07XG59XG5tb2R1bGUuZXhwb3J0cyA9IGFzeW5jIChjdXN0b21lcl9JZCkgPT4ge1xuICB0cnkge1xuICAgIGxldCB0YWIgPSBbXTtcbiAgICBjb25zdCBzeXN0ZW1UeXBlcyA9IGF3YWl0IFN5c3RlbS5maW5kKFxuICAgICAge1xuICAgICAgICBjdXN0b21lcjogY3VzdG9tZXJfSWQsXG4gICAgICAgIHR5cGU6IHsgJGV4aXN0czogdHJ1ZSB9LFxuICAgICAgICBpc0FjdGl2ZTp0cnVlXG4gICAgICB9LFxuICAgICAgeyB0eXBlOiAxLCBfaWQ6IDAgfVxuICAgICkucG9wdWxhdGUoe1xuICAgICAgcGF0aDogXCJ0eXBlXCIsXG4gICAgICBzZWxlY3Q6IFwidHlwZVwiLFxuICAgIH0pO1xuXG4gICAgaWYgKHN5c3RlbVR5cGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZXJyOiB7IG1lc3NhZ2U6IFwiTm8gIFR5cGUgbWF0Y2ggdGhpcyBjcml0ZXJpYSAhXCIgfSxcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIHN0YXR1c0NvZGU6IDQwNCxcbiAgICAgIH07XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3lzdGVtVHlwZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChzeXN0ZW1UeXBlc1tpXS50eXBlKSB7XG4gICAgICAgIHRhYi5wdXNoKHtcbiAgICAgICAgICBfaWQ6IHN5c3RlbVR5cGVzW2ldLnR5cGUuX2lkLFxuICAgICAgICAgIHR5cGU6IHN5c3RlbVR5cGVzW2ldLnR5cGUudHlwZSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHVuaXF1ZUxpc3QgPSBnZXRVbmlxdWVMaXN0QnkodGFiLCBcIl9pZFwiKTtcblxuICAgIHJldHVybiB7XG4gICAgICBkYXRhOiB1bmlxdWVMaXN0LFxuICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIixcbiAgICB9O1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBsb2dnZXIuZXJyb3IoXCJHZXQgdHlwZXMgYnkgQ3VzdG9tZXIgSUQgRXJyb3IgOlwiLCBlcnIpO1xuICAgIHJldHVybiB7IGVyciwgc3RhdHVzOiBcImVycm9yXCIgfTtcbiAgfVxufTtcbiJdfQ==