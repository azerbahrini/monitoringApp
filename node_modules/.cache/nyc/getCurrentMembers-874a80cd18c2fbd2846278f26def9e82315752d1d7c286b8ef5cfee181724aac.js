function cov_2hskchbbgh(){var path="/home/azer/Desktop/jenkins/app/monitoringApp/services/shift/getCurrentMembers.js";var hash="512f084e2be541c7a29453b89212453c7ccd0288";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/azer/Desktop/jenkins/app/monitoringApp/services/shift/getCurrentMembers.js",statementMap:{"0":{start:{line:1,column:14},end:{line:1,column:43}},"1":{start:{line:2,column:0},end:{line:47,column:2}},"2":{start:{line:3,column:2},end:{line:46,column:3}},"3":{start:{line:5,column:26},end:{line:36,column:13}},"4":{start:{line:37,column:4},end:{line:43,column:5}},"5":{start:{line:38,column:20},end:{line:39,column:68}},"6":{start:{line:38,column:49},end:{line:38,column:59}},"7":{start:{line:38,column:73},end:{line:38,column:77}},"8":{start:{line:39,column:38},end:{line:39,column:67}},"9":{start:{line:40,column:6},end:{line:40,column:48}},"10":{start:{line:42,column:6},end:{line:42,column:78}},"11":{start:{line:45,column:4},end:{line:45,column:36}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:2,column:17},end:{line:2,column:18}},loc:{start:{line:2,column:50},end:{line:47,column:1}},line:2},"1":{name:"(anonymous_1)",decl:{start:{line:38,column:38},end:{line:38,column:39}},loc:{start:{line:38,column:49},end:{line:38,column:59}},line:38},"2":{name:"(anonymous_2)",decl:{start:{line:38,column:65},end:{line:38,column:66}},loc:{start:{line:38,column:73},end:{line:38,column:77}},line:38},"3":{name:"(anonymous_3)",decl:{start:{line:39,column:14},end:{line:39,column:15}},loc:{start:{line:39,column:38},end:{line:39,column:67}},line:39}},branchMap:{"0":{loc:{start:{line:37,column:4},end:{line:43,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:43,column:5}},{start:{line:37,column:4},end:{line:43,column:5}}],line:37}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"512f084e2be541c7a29453b89212453c7ccd0288"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2hskchbbgh=function(){return actualCoverage;};}return actualCoverage;}cov_2hskchbbgh();const Shift=(cov_2hskchbbgh().s[0]++,require('../../models/Shift'));cov_2hskchbbgh().s[1]++;module.exports=async(start,end,shiftName)=>{cov_2hskchbbgh().f[0]++;cov_2hskchbbgh().s[2]++;try{// const currentDate = moment().utc().format();
const currentShifts=(cov_2hskchbbgh().s[3]++,await Shift.find({$or:[{$and:[{endDate:{$lte:end}},{startDate:{$gte:start}},{type:'shift'},{name:shiftName}]},{$and:[{endDate:{$gte:start}},{endDate:{$lte:end}},{type:'shift'},{name:'intermediate shift'}]},{$and:[{startDate:{$gte:start}},{startDate:{$lte:end}},{type:'shift'},{name:'intermediate shift'}]}]}).populate('user','-password -accessToken').lean().exec());cov_2hskchbbgh().s[4]++;if(currentShifts.length>0){cov_2hskchbbgh().b[0][0]++;const users=(cov_2hskchbbgh().s[5]++,currentShifts.map(shift=>{cov_2hskchbbgh().f[1]++;cov_2hskchbbgh().s[6]++;return shift.user;}).map(item=>{cov_2hskchbbgh().f[2]++;cov_2hskchbbgh().s[7]++;return item;}).filter((value,index,self)=>{cov_2hskchbbgh().f[3]++;cov_2hskchbbgh().s[8]++;return self.indexOf(value)===index;}));cov_2hskchbbgh().s[9]++;return{data:users,status:'success'};}else{cov_2hskchbbgh().b[0][1]++;cov_2hskchbbgh().s[10]++;return{err:{message:'No shifts can be found.'},status:'error'};}}catch(err){cov_2hskchbbgh().s[11]++;return{err,status:'error'};}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldEN1cnJlbnRNZW1iZXJzLmpzIl0sIm5hbWVzIjpbIlNoaWZ0IiwicmVxdWlyZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJzdGFydCIsImVuZCIsInNoaWZ0TmFtZSIsImN1cnJlbnRTaGlmdHMiLCJmaW5kIiwiJG9yIiwiJGFuZCIsImVuZERhdGUiLCIkbHRlIiwic3RhcnREYXRlIiwiJGd0ZSIsInR5cGUiLCJuYW1lIiwicG9wdWxhdGUiLCJsZWFuIiwiZXhlYyIsImxlbmd0aCIsInVzZXJzIiwibWFwIiwic2hpZnQiLCJ1c2VyIiwiaXRlbSIsImZpbHRlciIsInZhbHVlIiwiaW5kZXgiLCJzZWxmIiwiaW5kZXhPZiIsImRhdGEiLCJzdGF0dXMiLCJlcnIiLCJtZXNzYWdlIl0sIm1hcHBpbmdzIjoibXBFQWVZOzJGQWZaLEtBQU1BLENBQUFBLEtBQUssMEJBQUdDLE9BQU8sQ0FBQyxvQkFBRCxDQUFWLENBQVgsQyx3QkFDQUMsTUFBTSxDQUFDQyxPQUFQLENBQWlCLE1BQU9DLEtBQVAsQ0FBY0MsR0FBZCxDQUFtQkMsU0FBbkIsR0FBaUMsaURBQ2hELEdBQUksQ0FDRjtBQUNBLEtBQU1DLENBQUFBLGFBQWEsMEJBQUcsS0FBTVAsQ0FBQUEsS0FBSyxDQUFDUSxJQUFOLENBQVcsQ0FDckNDLEdBQUcsQ0FBRSxDQUNILENBQ0VDLElBQUksQ0FBRSxDQUNKLENBQUVDLE9BQU8sQ0FBRSxDQUFFQyxJQUFJLENBQUVQLEdBQVIsQ0FBWCxDQURJLENBRUosQ0FBRVEsU0FBUyxDQUFFLENBQUVDLElBQUksQ0FBRVYsS0FBUixDQUFiLENBRkksQ0FHSixDQUFFVyxJQUFJLENBQUUsT0FBUixDQUhJLENBSUosQ0FBQ0MsSUFBSSxDQUFFVixTQUFQLENBSkksQ0FEUixDQURHLENBU0gsQ0FDRUksSUFBSSxDQUFFLENBQ0osQ0FBRUMsT0FBTyxDQUFFLENBQUVHLElBQUksQ0FBRVYsS0FBUixDQUFYLENBREksQ0FFSixDQUFFTyxPQUFPLENBQUUsQ0FBRUMsSUFBSSxDQUFFUCxHQUFSLENBQVgsQ0FGSSxDQUdKLENBQUVVLElBQUksQ0FBRSxPQUFSLENBSEksQ0FJSixDQUFDQyxJQUFJLENBQUUsb0JBQVAsQ0FKSSxDQURSLENBVEcsQ0FpQkgsQ0FDRU4sSUFBSSxDQUFFLENBQ0osQ0FBQ0csU0FBUyxDQUFFLENBQUVDLElBQUksQ0FBRVYsS0FBUixDQUFaLENBREksQ0FFSixDQUFDUyxTQUFTLENBQUUsQ0FBQ0QsSUFBSSxDQUFFUCxHQUFQLENBQVosQ0FGSSxDQUdKLENBQUVVLElBQUksQ0FBRSxPQUFSLENBSEksQ0FJSixDQUFDQyxJQUFJLENBQUUsb0JBQVAsQ0FKSSxDQURSLENBakJHLENBRGdDLENBQVgsRUE2QnpCQyxRQTdCeUIsQ0E2QmhCLE1BN0JnQixDQTZCUix3QkE3QlEsRUE4QnpCQyxJQTlCeUIsR0ErQnpCQyxJQS9CeUIsRUFBVCxDQUFuQixDQUZFLHdCQWtDRixHQUFJWixhQUFhLENBQUNhLE1BQWQsQ0FBdUIsQ0FBM0IsQ0FBOEIsNEJBQzVCLEtBQU1DLENBQUFBLEtBQUssMEJBQUdkLGFBQWEsQ0FBQ2UsR0FBZCxDQUFtQkMsS0FBRCxFQUFXLHVEQUFBQSxDQUFBQSxLQUFLLENBQUNDLElBQU4sQ0FBVSxDQUF2QyxFQUF5Q0YsR0FBekMsQ0FBNkNHLElBQUksRUFBSUEsdURBQUFBLENBQUFBLElBQUksRUFBekQsRUFDYkMsTUFEYSxDQUNOLENBQUNDLEtBQUQsQ0FBUUMsS0FBUixDQUFlQyxJQUFmLEdBQXdCLHVEQUFBQSxDQUFBQSxJQUFJLENBQUNDLE9BQUwsQ0FBYUgsS0FBYixJQUF3QkMsS0FBeEIsQ0FBNkIsQ0FEL0MsQ0FBSCxDQUFYLENBRDRCLHdCQUc1QixNQUFPLENBQUVHLElBQUksQ0FBRVYsS0FBUixDQUFlVyxNQUFNLENBQUUsU0FBdkIsQ0FBUCxDQUNELENBSkQsSUFJTyxxREFDTCxNQUFPLENBQUVDLEdBQUcsQ0FBRSxDQUFFQyxPQUFPLENBQUUseUJBQVgsQ0FBUCxDQUErQ0YsTUFBTSxDQUFFLE9BQXZELENBQVAsQ0FDRCxDQUNGLENBQUMsTUFBT0MsR0FBUCxDQUFZLDBCQUNaLE1BQU8sQ0FBRUEsR0FBRixDQUFPRCxNQUFNLENBQUUsT0FBZixDQUFQLENBQ0QsQ0FDRixDQTdDRCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFNoaWZ0ID0gcmVxdWlyZSgnLi4vLi4vbW9kZWxzL1NoaWZ0Jyk7XG5tb2R1bGUuZXhwb3J0cyA9IGFzeW5jIChzdGFydCwgZW5kLCBzaGlmdE5hbWUpID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBjb25zdCBjdXJyZW50RGF0ZSA9IG1vbWVudCgpLnV0YygpLmZvcm1hdCgpO1xuICAgIGNvbnN0IGN1cnJlbnRTaGlmdHMgPSBhd2FpdCBTaGlmdC5maW5kKHtcbiAgICAgICRvcjogW1xuICAgICAgICB7XG4gICAgICAgICAgJGFuZDogW1xuICAgICAgICAgICAgeyBlbmREYXRlOiB7ICRsdGU6IGVuZCB9IH0sXG4gICAgICAgICAgICB7IHN0YXJ0RGF0ZTogeyAkZ3RlOiBzdGFydCB9IH0sXG4gICAgICAgICAgICB7IHR5cGU6ICdzaGlmdCcgfSxcbiAgICAgICAgICAgIHtuYW1lOiBzaGlmdE5hbWV9XG4gICAgICAgICAgXVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgJGFuZDogW1xuICAgICAgICAgICAgeyBlbmREYXRlOiB7ICRndGU6IHN0YXJ0IH0gfSxcbiAgICAgICAgICAgIHsgZW5kRGF0ZTogeyAkbHRlOiBlbmQgfSB9LFxuICAgICAgICAgICAgeyB0eXBlOiAnc2hpZnQnIH0sXG4gICAgICAgICAgICB7bmFtZTogJ2ludGVybWVkaWF0ZSBzaGlmdCd9XG4gICAgICAgICAgXVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgJGFuZDogW1xuICAgICAgICAgICAge3N0YXJ0RGF0ZTogeyAkZ3RlOiBzdGFydCB9IH0sXG4gICAgICAgICAgICB7c3RhcnREYXRlOiB7JGx0ZTogZW5kfX0sXG4gICAgICAgICAgICB7IHR5cGU6ICdzaGlmdCcgfSxcbiAgICAgICAgICAgIHtuYW1lOiAnaW50ZXJtZWRpYXRlIHNoaWZ0J31cbiAgICAgICAgICBdXG4gICAgICAgIH1cblxuICAgICAgXVxuICAgIH0pXG4gICAgICAucG9wdWxhdGUoJ3VzZXInLCAnLXBhc3N3b3JkIC1hY2Nlc3NUb2tlbicpXG4gICAgICAubGVhbigpXG4gICAgICAuZXhlYygpO1xuICAgIGlmIChjdXJyZW50U2hpZnRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHVzZXJzID0gY3VycmVudFNoaWZ0cy5tYXAoKHNoaWZ0KSA9PiBzaGlmdC51c2VyKS5tYXAoaXRlbSA9PiBpdGVtKVxuICAgICAgLmZpbHRlcigodmFsdWUsIGluZGV4LCBzZWxmKSA9PiBzZWxmLmluZGV4T2YodmFsdWUpID09PSBpbmRleCk7XG4gICAgICByZXR1cm4geyBkYXRhOiB1c2Vycywgc3RhdHVzOiAnc3VjY2VzcycgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHsgZXJyOiB7IG1lc3NhZ2U6ICdObyBzaGlmdHMgY2FuIGJlIGZvdW5kLicgfSwgc3RhdHVzOiAnZXJyb3InIH07XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZXR1cm4geyBlcnIsIHN0YXR1czogJ2Vycm9yJyB9O1xuICB9XG59O1xuIl19