function cov_1lh312d0e6(){var path="/home/azer/Desktop/jenkins/app/monitoringApp/services/task/getTasks.js";var hash="e7ac18bebade52ac4c1cdbbf28166e18c5a0fd0e";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/azer/Desktop/jenkins/app/monitoringApp/services/task/getTasks.js",statementMap:{"0":{start:{line:2,column:13},end:{line:2,column:41}},"1":{start:{line:3,column:13},end:{line:3,column:39}},"2":{start:{line:4,column:0},end:{line:191,column:2}},"3":{start:{line:12,column:2},end:{line:190,column:3}},"4":{start:{line:13,column:20},end:{line:13,column:43}},"5":{start:{line:14,column:24},end:{line:43,column:5}},"6":{start:{line:45,column:4},end:{line:74,column:7}},"7":{start:{line:46,column:6},end:{line:73,column:9}},"8":{start:{line:76,column:16},end:{line:174,column:6}},"9":{start:{line:176,column:4},end:{line:178,column:7}},"10":{start:{line:177,column:6},end:{line:177,column:78}},"11":{start:{line:180,column:4},end:{line:186,column:5}},"12":{start:{line:181,column:6},end:{line:185,column:8}},"13":{start:{line:187,column:4},end:{line:187,column:44}},"14":{start:{line:189,column:4},end:{line:189,column:36}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:4,column:17},end:{line:4,column:18}},loc:{start:{line:11,column:5},end:{line:191,column:1}},line:11},"1":{name:"(anonymous_1)",decl:{start:{line:45,column:17},end:{line:45,column:18}},loc:{start:{line:45,column:37},end:{line:74,column:5}},line:45},"2":{name:"(anonymous_2)",decl:{start:{line:176,column:12},end:{line:176,column:13}},loc:{start:{line:176,column:22},end:{line:178,column:5}},line:176}},branchMap:{"0":{loc:{start:{line:180,column:4},end:{line:186,column:5}},type:"if",locations:[{start:{line:180,column:4},end:{line:186,column:5}},{start:{line:180,column:4},end:{line:186,column:5}}],line:180}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e7ac18bebade52ac4c1cdbbf28166e18c5a0fd0e"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1lh312d0e6=function(){return actualCoverage;};}return actualCoverage;}cov_1lh312d0e6();//Model Object
const Task=(cov_1lh312d0e6().s[0]++,require("../../models/Task"));var moment=(cov_1lh312d0e6().s[1]++,require("moment-timezone"));cov_1lh312d0e6().s[2]++;module.exports=async(searchValue,type,state,startDate,endDate,timeZone)=>{cov_1lh312d0e6().f[0]++;cov_1lh312d0e6().s[3]++;try{const myArray=(cov_1lh312d0e6().s[4]++,searchValue?.split(" "));const searchArray=(cov_1lh312d0e6().s[5]++,[{$or:[{title:{$regex:"",$options:"i"}},{customerName:{$regex:"",$options:"i"}},{assigneeName:{$regex:"",$options:"i"}},{systemName:{$regex:"",$options:"i"}}]}]);cov_1lh312d0e6().s[6]++;myArray?.map(searchFragment=>{cov_1lh312d0e6().f[1]++;cov_1lh312d0e6().s[7]++;searchArray.push({$or:[{title:{$regex:searchFragment,$options:"i"}},{customerName:{$regex:searchFragment,$options:"i"}},{assigneeName:{$regex:searchFragment,$options:"i"}},{systemName:{$regex:searchFragment,$options:"i"}}]});});const doc=(cov_1lh312d0e6().s[8]++,await Task.aggregate([{$lookup:{from:"users",localField:"assignee",foreignField:"_id",as:"populatedUser"}},{$set:{assigneeName:{$concat:[{$arrayElemAt:["$populatedUser.firstName",0]}," ",{$arrayElemAt:["$populatedUser.lastName",0]}]}}},{$lookup:{from:"systems",localField:"system",foreignField:"_id",as:"populatedSystem"}},{$set:{systemName:{$arrayElemAt:["$populatedSystem.name",0]}}},{$lookup:{from:"customers",localField:"populatedSystem.customer",foreignField:"_id",as:"populatedCustomer"}},{$set:{customerName:{$arrayElemAt:["$populatedCustomer.label",0]}}},{$match:{$and:searchArray}},{$match:{state:{$in:JSON.parse(state)}}},{$match:{type:{$in:JSON.parse(type)}}},{$match:{$and:[{estimatedStart:{$lte:new Date(moment(endDate).utc())}},{estimatedStart:{$gte:new Date(moment(startDate).utc())}}]}},{$project:{populatedUser:0,populatedSystem:0,populatedCustomer:0}}]));cov_1lh312d0e6().s[9]++;doc.map(task=>{cov_1lh312d0e6().f[2]++;cov_1lh312d0e6().s[10]++;task.estimatedStart=moment(task.estimatedStart).tz(timeZone).format();});cov_1lh312d0e6().s[11]++;if(doc.length===0){cov_1lh312d0e6().b[0][0]++;cov_1lh312d0e6().s[12]++;return{error:{message:"No Tasks found"},status:"no data",statusCode:204};}else{cov_1lh312d0e6().b[0][1]++;}cov_1lh312d0e6().s[13]++;return{data:doc,status:"success"};}catch(err){cov_1lh312d0e6().s[14]++;return{err,status:"error"};}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldFRhc2tzLmpzIl0sIm5hbWVzIjpbIlRhc2siLCJyZXF1aXJlIiwibW9tZW50IiwibW9kdWxlIiwiZXhwb3J0cyIsInNlYXJjaFZhbHVlIiwidHlwZSIsInN0YXRlIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsInRpbWVab25lIiwibXlBcnJheSIsInNwbGl0Iiwic2VhcmNoQXJyYXkiLCIkb3IiLCJ0aXRsZSIsIiRyZWdleCIsIiRvcHRpb25zIiwiY3VzdG9tZXJOYW1lIiwiYXNzaWduZWVOYW1lIiwic3lzdGVtTmFtZSIsIm1hcCIsInNlYXJjaEZyYWdtZW50IiwicHVzaCIsImRvYyIsImFnZ3JlZ2F0ZSIsIiRsb29rdXAiLCJmcm9tIiwibG9jYWxGaWVsZCIsImZvcmVpZ25GaWVsZCIsImFzIiwiJHNldCIsIiRjb25jYXQiLCIkYXJyYXlFbGVtQXQiLCIkbWF0Y2giLCIkYW5kIiwiJGluIiwiSlNPTiIsInBhcnNlIiwiZXN0aW1hdGVkU3RhcnQiLCIkbHRlIiwiRGF0ZSIsInV0YyIsIiRndGUiLCIkcHJvamVjdCIsInBvcHVsYXRlZFVzZXIiLCJwb3B1bGF0ZWRTeXN0ZW0iLCJwb3B1bGF0ZWRDdXN0b21lciIsInRhc2siLCJ0eiIsImZvcm1hdCIsImxlbmd0aCIsImVycm9yIiwibWVzc2FnZSIsInN0YXR1cyIsInN0YXR1c0NvZGUiLCJkYXRhIiwiZXJyIl0sIm1hcHBpbmdzIjoic3JFQWVZOzJGQWZaO0FBQ0EsS0FBTUEsQ0FBQUEsSUFBSSwwQkFBR0MsT0FBTyxDQUFDLG1CQUFELENBQVYsQ0FBVixDQUNBLEdBQUlDLENBQUFBLE1BQU0sMEJBQUdELE9BQU8sQ0FBQyxpQkFBRCxDQUFWLENBQVYsQyx3QkFDQUUsTUFBTSxDQUFDQyxPQUFQLENBQWlCLE1BQ2ZDLFdBRGUsQ0FFZkMsSUFGZSxDQUdmQyxLQUhlLENBSWZDLFNBSmUsQ0FLZkMsT0FMZSxDQU1mQyxRQU5lLEdBT1osaURBQ0gsR0FBSSxDQUNGLEtBQU1DLENBQUFBLE9BQU8sMEJBQUdO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QUFhOEIsTUFBTSxDQUFFLFNBQXJCLENBQVAsQ0FDRCxDQUFDLE1BQU9HLEdBQVAsQ0FBWSwwQkFDWixNQUFPLENBQUVBLEdBQUYsQ0FBT0gsTUFBTSxDQUFFLE9BQWYsQ0FBUCxDQUNELENBQ0YsQ0EzTEQiLCJzb3VyY2VzQ29udGVudCI6WyIvL01vZGVsIE9iamVjdFxuY29uc3QgVGFzayA9IHJlcXVpcmUoXCIuLi8uLi9tb2RlbHMvVGFza1wiKTtcbnZhciBtb21lbnQgPSByZXF1aXJlKFwibW9tZW50LXRpbWV6b25lXCIpO1xubW9kdWxlLmV4cG9ydHMgPSBhc3luYyAoXG4gIHNlYXJjaFZhbHVlLFxuICB0eXBlLFxuICBzdGF0ZSxcbiAgc3RhcnREYXRlLFxuICBlbmREYXRlLFxuICB0aW1lWm9uZVxuKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgbXlBcnJheSA9IHNlYXJjaFZhbHVlPy5zcGxpdChcIiBcIik7XG4gICAgY29uc3Qgc2VhcmNoQXJyYXkgPSBbXG4gICAgICB7XG4gICAgICAgICRvcjogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRpdGxlOiB7XG4gICAgICAgICAgICAgICRyZWdleDogXCJcIixcbiAgICAgICAgICAgICAgJG9wdGlvbnM6IFwiaVwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGN1c3RvbWVyTmFtZToge1xuICAgICAgICAgICAgICAkcmVnZXg6IFwiXCIsXG4gICAgICAgICAgICAgICRvcHRpb25zOiBcImlcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBhc3NpZ25lZU5hbWU6IHtcbiAgICAgICAgICAgICAgJHJlZ2V4OiBcIlwiLFxuICAgICAgICAgICAgICAkb3B0aW9uczogXCJpXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgc3lzdGVtTmFtZToge1xuICAgICAgICAgICAgICAkcmVnZXg6IFwiXCIsXG4gICAgICAgICAgICAgICRvcHRpb25zOiBcImlcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgXTtcblxuICAgIG15QXJyYXk/Lm1hcCgoc2VhcmNoRnJhZ21lbnQpID0+IHtcbiAgICAgIHNlYXJjaEFycmF5LnB1c2goe1xuICAgICAgICAkb3I6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0aXRsZToge1xuICAgICAgICAgICAgICAkcmVnZXg6IHNlYXJjaEZyYWdtZW50LFxuICAgICAgICAgICAgICAkb3B0aW9uczogXCJpXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgY3VzdG9tZXJOYW1lOiB7XG4gICAgICAgICAgICAgICRyZWdleDogc2VhcmNoRnJhZ21lbnQsXG4gICAgICAgICAgICAgICRvcHRpb25zOiBcImlcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBhc3NpZ25lZU5hbWU6IHtcbiAgICAgICAgICAgICAgJHJlZ2V4OiBzZWFyY2hGcmFnbWVudCxcbiAgICAgICAgICAgICAgJG9wdGlvbnM6IFwiaVwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHN5c3RlbU5hbWU6IHtcbiAgICAgICAgICAgICAgJHJlZ2V4OiBzZWFyY2hGcmFnbWVudCxcbiAgICAgICAgICAgICAgJG9wdGlvbnM6IFwiaVwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBkb2MgPSBhd2FpdCBUYXNrLmFnZ3JlZ2F0ZShbXG4gICAgICB7XG4gICAgICAgICRsb29rdXA6IHtcbiAgICAgICAgICBmcm9tOiBcInVzZXJzXCIsXG4gICAgICAgICAgbG9jYWxGaWVsZDogXCJhc3NpZ25lZVwiLFxuICAgICAgICAgIGZvcmVpZ25GaWVsZDogXCJfaWRcIixcbiAgICAgICAgICBhczogXCJwb3B1bGF0ZWRVc2VyXCIsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICAkc2V0OiB7XG4gICAgICAgICAgYXNzaWduZWVOYW1lOiB7XG4gICAgICAgICAgICAkY29uY2F0OiBbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAkYXJyYXlFbGVtQXQ6IFtcIiRwb3B1bGF0ZWRVc2VyLmZpcnN0TmFtZVwiLCAwXSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXCIgXCIsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAkYXJyYXlFbGVtQXQ6IFtcIiRwb3B1bGF0ZWRVc2VyLmxhc3ROYW1lXCIsIDBdLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgJGxvb2t1cDoge1xuICAgICAgICAgIGZyb206IFwic3lzdGVtc1wiLFxuICAgICAgICAgIGxvY2FsRmllbGQ6IFwic3lzdGVtXCIsXG4gICAgICAgICAgZm9yZWlnbkZpZWxkOiBcIl9pZFwiLFxuICAgICAgICAgIGFzOiBcInBvcHVsYXRlZFN5c3RlbVwiLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgJHNldDoge1xuICAgICAgICAgIHN5c3RlbU5hbWU6IHtcbiAgICAgICAgICAgICRhcnJheUVsZW1BdDogW1wiJHBvcHVsYXRlZFN5c3RlbS5uYW1lXCIsIDBdLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICAkbG9va3VwOiB7XG4gICAgICAgICAgZnJvbTogXCJjdXN0b21lcnNcIixcbiAgICAgICAgICBsb2NhbEZpZWxkOiBcInBvcHVsYXRlZFN5c3RlbS5jdXN0b21lclwiLFxuICAgICAgICAgIGZvcmVpZ25GaWVsZDogXCJfaWRcIixcbiAgICAgICAgICBhczogXCJwb3B1bGF0ZWRDdXN0b21lclwiLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgJHNldDoge1xuICAgICAgICAgIGN1c3RvbWVyTmFtZToge1xuICAgICAgICAgICAgJGFycmF5RWxlbUF0OiBbXCIkcG9wdWxhdGVkQ3VzdG9tZXIubGFiZWxcIiwgMF0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgICRtYXRjaDoge1xuICAgICAgICAgICRhbmQ6IHNlYXJjaEFycmF5LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgJG1hdGNoOiB7XG4gXG4gICAgICAgICAgICAgIHN0YXRlOiB7XG4gICAgICAgICAgICAgICAgJGluOiBKU09OLnBhcnNlKHN0YXRlKSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICBcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgICRtYXRjaDoge1xuICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgICRpbjogSlNPTi5wYXJzZSh0eXBlKSxcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICAkbWF0Y2g6IHtcbiAgICAgICAgICAkYW5kOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGVzdGltYXRlZFN0YXJ0OiB7XG4gICAgICAgICAgICAgICAgJGx0ZTogbmV3IERhdGUobW9tZW50KGVuZERhdGUpLnV0YygpKSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGVzdGltYXRlZFN0YXJ0OiB7XG4gICAgICAgICAgICAgICAgJGd0ZTogbmV3IERhdGUobW9tZW50KHN0YXJ0RGF0ZSkudXRjKCkpLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgJHByb2plY3Q6IHtcbiAgICAgICAgICBwb3B1bGF0ZWRVc2VyOiAwLFxuICAgICAgICAgIHBvcHVsYXRlZFN5c3RlbTogMCxcbiAgICAgICAgICBwb3B1bGF0ZWRDdXN0b21lcjogMCxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgXSk7XG4gICBcbiAgICBkb2MubWFwKCh0YXNrKSA9PiB7XG4gICAgICB0YXNrLmVzdGltYXRlZFN0YXJ0ID0gbW9tZW50KHRhc2suZXN0aW1hdGVkU3RhcnQpLnR6KHRpbWVab25lKS5mb3JtYXQoKTtcbiAgICB9KTtcblxuICAgIGlmIChkb2MubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBlcnJvcjoge21lc3NhZ2UgOiBcIk5vIFRhc2tzIGZvdW5kXCIgfSxcbiAgICAgICAgc3RhdHVzOiBcIm5vIGRhdGFcIixcbiAgICAgICAgc3RhdHVzQ29kZTogMjA0LFxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgZGF0YTogZG9jLCBzdGF0dXM6IFwic3VjY2Vzc1wiIH07XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiB7IGVyciwgc3RhdHVzOiBcImVycm9yXCIgfTtcbiAgfVxufTtcbiJdfQ==