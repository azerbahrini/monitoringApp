function cov_egvsovxj5(){var path="/home/azer/Desktop/jenkins/app/monitoringApp/services/statistics/dbGrowthStatistics.service.js";var hash="a4a3f130db40271948a0651a2ca8e8fcee2c3dd2";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/azer/Desktop/jenkins/app/monitoringApp/services/statistics/dbGrowthStatistics.service.js",statementMap:{"0":{start:{line:1,column:13},end:{line:1,column:41}},"1":{start:{line:2,column:17},end:{line:2,column:44}},"2":{start:{line:3,column:15},end:{line:3,column:41}},"3":{start:{line:4,column:14},end:{line:4,column:42}},"4":{start:{line:6,column:20},end:{line:16,column:1}},"5":{start:{line:7,column:2},end:{line:13,column:3}},"6":{start:{line:8,column:4},end:{line:8,column:47}},"7":{start:{line:9,column:9},end:{line:13,column:3}},"8":{start:{line:10,column:4},end:{line:10,column:54}},"9":{start:{line:12,column:4},end:{line:12,column:40}},"10":{start:{line:14,column:2},end:{line:14,column:19}},"11":{start:{line:15,column:2},end:{line:15,column:14}},"12":{start:{line:17,column:0},end:{line:136,column:2}},"13":{start:{line:18,column:22},end:{line:18,column:62}},"14":{start:{line:19,column:2},end:{line:135,column:3}},"15":{start:{line:20,column:31},end:{line:20,column:97}},"16":{start:{line:21,column:29},end:{line:21,column:93}},"17":{start:{line:23,column:18},end:{line:123,column:6}},"18":{start:{line:124,column:4},end:{line:130,column:5}},"19":{start:{line:125,column:6},end:{line:129,column:8}},"20":{start:{line:131,column:19},end:{line:131,column:57}},"21":{start:{line:131,column:39},end:{line:131,column:56}},"22":{start:{line:132,column:4},end:{line:132,column:64}},"23":{start:{line:134,column:4},end:{line:134,column:53}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:20},end:{line:6,column:21}},loc:{start:{line:6,column:30},end:{line:16,column:1}},line:6},"1":{name:"(anonymous_1)",decl:{start:{line:17,column:17},end:{line:17,column:18}},loc:{start:{line:17,column:79},end:{line:136,column:1}},line:17},"2":{name:"(anonymous_2)",decl:{start:{line:131,column:29},end:{line:131,column:30}},loc:{start:{line:131,column:39},end:{line:131,column:56}},line:131}},branchMap:{"0":{loc:{start:{line:7,column:2},end:{line:13,column:3}},type:"if",locations:[{start:{line:7,column:2},end:{line:13,column:3}},{start:{line:7,column:2},end:{line:13,column:3}}],line:7},"1":{loc:{start:{line:9,column:9},end:{line:13,column:3}},type:"if",locations:[{start:{line:9,column:9},end:{line:13,column:3}},{start:{line:9,column:9},end:{line:13,column:3}}],line:9},"2":{loc:{start:{line:18,column:22},end:{line:18,column:62}},type:"binary-expr",locations:[{start:{line:18,column:22},end:{line:18,column:41}},{start:{line:18,column:45},end:{line:18,column:62}}],line:18},"3":{loc:{start:{line:105,column:24},end:{line:105,column:77}},type:"cond-expr",locations:[{start:{line:105,column:39},end:{line:105,column:61}},{start:{line:105,column:64},end:{line:105,column:77}}],line:105},"4":{loc:{start:{line:108,column:26},end:{line:110,column:31}},type:"cond-expr",locations:[{start:{line:109,column:18},end:{line:109,column:42}},{start:{line:110,column:18},end:{line:110,column:31}}],line:108},"5":{loc:{start:{line:124,column:4},end:{line:130,column:5}},type:"if",locations:[{start:{line:124,column:4},end:{line:130,column:5}},{start:{line:124,column:4},end:{line:130,column:5}}],line:124}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"a4a3f130db40271948a0651a2ca8e8fcee2c3dd2"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_egvsovxj5=function(){return actualCoverage;};}return actualCoverage;}cov_egvsovxj5();const Task=(cov_egvsovxj5().s[0]++,require('../../models/Task'));const ObjectId=(cov_egvsovxj5().s[1]++,require('mongodb').ObjectId);const moment=(cov_egvsovxj5().s[2]++,require('moment-timezone'));const toUtc=(cov_egvsovxj5().s[3]++,require('../../utils/toUTC'));cov_egvsovxj5().s[4]++;const convertToMb=item=>{cov_egvsovxj5().f[0]++;cov_egvsovxj5().s[5]++;if(item.unit==='GB'){cov_egvsovxj5().b[0][0]++;cov_egvsovxj5().s[6]++;item.growth=parseInt(item.growth)*1024;}else{cov_egvsovxj5().b[0][1]++;cov_egvsovxj5().s[7]++;if(item.unit==='TB'){cov_egvsovxj5().b[1][0]++;cov_egvsovxj5().s[8]++;item.growth=parseInt(item.growth)*1024*1024;}else{cov_egvsovxj5().b[1][1]++;cov_egvsovxj5().s[9]++;item.growth=parseInt(item.growth);}}cov_egvsovxj5().s[10]++;item.unit='MB';cov_egvsovxj5().s[11]++;return item;};cov_egvsovxj5().s[12]++;module.exports=async(startDate,endDate,customerID,systemID,timeZone)=>{cov_egvsovxj5().f[1]++;const bothAreNull=(cov_egvsovxj5().s[13]++,(cov_egvsovxj5().b[2][0]++,customerID===null)&&(cov_egvsovxj5().b[2][1]++,systemID===null));cov_egvsovxj5().s[14]++;try{const convertedStartDate=(cov_egvsovxj5().s[15]++,new Date(toUtc(moment(startDate).tz(timeZone).format(),timeZone)));const convertedEndDate=(cov_egvsovxj5().s[16]++,new Date(toUtc(moment(endDate).tz(timeZone).format(),timeZone)));const stats=(cov_egvsovxj5().s[17]++,await Task.aggregate([{$match:{title:'DB Growth'}},{$lookup:{from:'systems',localField:'system',foreignField:'_id',as:'system'}},{$unwind:{path:'$system'}},{$project:{_id:1,'system.customer':1,'system._id':1}},{$addFields:{systemID:'$system._id',customerID:'$system.customer'}},{$project:{system:0}},{$lookup:{from:'results',localField:'_id',foreignField:'task',as:'result'}},{$unwind:{path:'$result',preserveNullAndEmptyArrays:false}},{$match:{'result.createdAt':{$gte:convertedStartDate,$lte:convertedEndDate}}},{$unwind:{path:'$result.dataSet',preserveNullAndEmptyArrays:false}},{$addFields:{createdAt:'$result.createdAt',growth:'$result.dataSet.growth',unit:'$result.dataSet.unit'}},{$project:{_id:0,result:0}},{$match:{$or:[{systemID:!bothAreNull?(cov_egvsovxj5().b[3][0]++,new ObjectId(systemID)):(cov_egvsovxj5().b[3][1]++,{$ne:null})},{customerID:!bothAreNull?(cov_egvsovxj5().b[4][0]++,new ObjectId(customerID)):(cov_egvsovxj5().b[4][1]++,{$ne:null})}]}},{$project:{_id:0,result:0,systemID:0,customerID:0}}]));cov_egvsovxj5().s[18]++;if(stats.length===0){cov_egvsovxj5().b[5][0]++;cov_egvsovxj5().s[19]++;return{status:'success',statusCode:204,err:{message:'No data can be found'}};}else{cov_egvsovxj5().b[5][1]++;}const result=(cov_egvsovxj5().s[20]++,stats.map(item=>{cov_egvsovxj5().f[2]++;cov_egvsovxj5().s[21]++;return convertToMb(item);}));cov_egvsovxj5().s[22]++;return{data:result,status:'success',statusCode:200};}catch(err){cov_egvsovxj5().s[23]++;return{err,status:'error',statusCode:400};}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRiR3Jvd3RoU3RhdGlzdGljcy5zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbIlRhc2siLCJyZXF1aXJlIiwiT2JqZWN0SWQiLCJtb21lbnQiLCJ0b1V0YyIsImNvbnZlcnRUb01iIiwiaXRlbSIsInVuaXQiLCJncm93dGgiLCJwYXJzZUludCIsIm1vZHVsZSIsImV4cG9ydHMiLCJzdGFydERhdGUiLCJlbmREYXRlIiwiY3VzdG9tZXJJRCIsInN5c3RlbUlEIiwidGltZVpvbmUiLCJib3RoQXJlTnVsbCIsImNvbnZlcnRlZFN0YXJ0RGF0ZSIsIkRhdGUiLCJ0eiIsImZvcm1hdCIsImNvbnZlcnRlZEVuZERhdGUiLCJzdGF0cyIsImFnZ3JlZ2F0ZSIsIiRtYXRjaCIsInRpdGxlIiwiJGxvb2t1cCIsImZyb20iLCJsb2NhbEZpZWxkIiwiZm9yZWlnbkZpZWxkIiwiYXMiLCIkdW53aW5kIiwicGF0aCIsIiRwcm9qZWN0IiwiX2lkIiwiJGFkZEZpZWxkcyIsInN5c3RlbSIsInByZXNlcnZlTnVsbEFuZEVtcHR5QXJyYXlzIiwiJGd0ZSIsIiRsdGUiLCJjcmVhdGVkQXQiLCJyZXN1bHQiLCIkb3IiLCIkbmUiLCJsZW5ndGgiLCJzdGF0dXMiLCJzdGF0dXNDb2RlIiwiZXJyIiwibWVzc2FnZSIsIm1hcCIsImRhdGEiXSwibWFwcGluZ3MiOiJrekhBZVk7eUZBZlosS0FBTUEsQ0FBQUEsSUFBSSx5QkFBR0MsT0FBTyxDQUFDLG1CQUFELENBQVYsQ0FBVixDQUNBLEtBQU1DLENBQUFBLFFBQVEseUJBQUdELE9BQU8sQ0FBQyxTQUFELENBQVAsQ0FBbUJDLFFBQXRCLENBQWQsQ0FDQSxLQUFNQyxDQUFBQSxNQUFNLHlCQUFHRixPQUFPLENBQUMsaUJBQUQsQ0FBVixDQUFaLENBQ0EsS0FBTUcsQ0FBQUEsS0FBSyx5QkFBR0gsT0FBTyxDQUFDLG1CQUFELENBQVYsQ0FBWCxDLHVCQUVBLEtBQU1JLENBQUFBLFdBQVcsQ0FBSUMsSUFBRCxFQUFVLCtDQUM1QixHQUFJQSxJQUFJ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ckMsQ0FBSCxDQUFaLENBaEhFLHdCQWlIRixNQUFPLENBQUU2QyxJQUFJLENBQUVULE1BQVIsQ0FBZ0JJLE1BQU0sQ0FBRSxTQUF4QixDQUFtQ0MsVUFBVSxDQUFFLEdBQS9DLENBQVAsQ0FDRCxDQUFDLE1BQU9DLEdBQVAsQ0FBWSx5QkFDWixNQUFPLENBQUVBLEdBQUYsQ0FBT0YsTUFBTSxDQUFFLE9BQWYsQ0FBd0JDLFVBQVUsQ0FBRSxHQUFwQyxDQUFQLENBQ0QsQ0FDRixDQXZIRCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFRhc2sgPSByZXF1aXJlKCcuLi8uLi9tb2RlbHMvVGFzaycpO1xuY29uc3QgT2JqZWN0SWQgPSByZXF1aXJlKCdtb25nb2RiJykuT2JqZWN0SWQ7XG5jb25zdCBtb21lbnQgPSByZXF1aXJlKCdtb21lbnQtdGltZXpvbmUnKTtcbmNvbnN0IHRvVXRjID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvdG9VVEMnKVxuXG5jb25zdCBjb252ZXJ0VG9NYiA9IChpdGVtKSA9PiB7XG4gIGlmIChpdGVtLnVuaXQgPT09ICdHQicpIHtcbiAgICBpdGVtLmdyb3d0aCA9IHBhcnNlSW50KGl0ZW0uZ3Jvd3RoKSAqIDEwMjQ7XG4gIH0gZWxzZSBpZiAoaXRlbS51bml0ID09PSAnVEInKSB7XG4gICAgaXRlbS5ncm93dGggPSBwYXJzZUludChpdGVtLmdyb3d0aCkgKiAxMDI0ICogMTAyNDtcbiAgfSBlbHNlIHtcbiAgICBpdGVtLmdyb3d0aCA9IHBhcnNlSW50KGl0ZW0uZ3Jvd3RoKTtcbiAgfVxuICBpdGVtLnVuaXQgPSAnTUInO1xuICByZXR1cm4gaXRlbTtcbn07XG5tb2R1bGUuZXhwb3J0cyA9IGFzeW5jIChzdGFydERhdGUsIGVuZERhdGUsIGN1c3RvbWVySUQsIHN5c3RlbUlELCB0aW1lWm9uZSkgPT4ge1xuICBjb25zdCBib3RoQXJlTnVsbCA9IGN1c3RvbWVySUQgPT09IG51bGwgJiYgc3lzdGVtSUQgPT09IG51bGw7XG4gIHRyeSB7XG4gICAgY29uc3QgY29udmVydGVkU3RhcnREYXRlID0gbmV3IERhdGUodG9VdGMobW9tZW50KHN0YXJ0RGF0ZSkudHoodGltZVpvbmUpLmZvcm1hdCgpLCB0aW1lWm9uZSkpO1xuICAgIGNvbnN0IGNvbnZlcnRlZEVuZERhdGUgPSBuZXcgRGF0ZSh0b1V0Yyhtb21lbnQoZW5kRGF0ZSkudHoodGltZVpvbmUpLmZvcm1hdCgpLCB0aW1lWm9uZSkpO1xuXG4gICAgY29uc3Qgc3RhdHMgPSBhd2FpdCBUYXNrLmFnZ3JlZ2F0ZShbXG4gICAgICB7XG4gICAgICAgICRtYXRjaDoge1xuICAgICAgICAgIHRpdGxlOiAnREIgR3Jvd3RoJ1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICAkbG9va3VwOiB7XG4gICAgICAgICAgZnJvbTogJ3N5c3RlbXMnLFxuICAgICAgICAgIGxvY2FsRmllbGQ6ICdzeXN0ZW0nLFxuICAgICAgICAgIGZvcmVpZ25GaWVsZDogJ19pZCcsXG4gICAgICAgICAgYXM6ICdzeXN0ZW0nXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgICR1bndpbmQ6IHtcbiAgICAgICAgICBwYXRoOiAnJHN5c3RlbSdcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgJHByb2plY3Q6IHtcbiAgICAgICAgICBfaWQ6IDEsXG4gICAgICAgICAgJ3N5c3RlbS5jdXN0b21lcic6IDEsXG4gICAgICAgICAgJ3N5c3RlbS5faWQnOiAxXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgICRhZGRGaWVsZHM6IHtcbiAgICAgICAgICBzeXN0ZW1JRDogJyRzeXN0ZW0uX2lkJyxcbiAgICAgICAgICBjdXN0b21lcklEOiAnJHN5c3RlbS5jdXN0b21lcidcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgJHByb2plY3Q6IHtcbiAgICAgICAgICBzeXN0ZW06IDBcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgJGxvb2t1cDoge1xuICAgICAgICAgIGZyb206ICdyZXN1bHRzJyxcbiAgICAgICAgICBsb2NhbEZpZWxkOiAnX2lkJyxcbiAgICAgICAgICBmb3JlaWduRmllbGQ6ICd0YXNrJyxcbiAgICAgICAgICBhczogJ3Jlc3VsdCdcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgJHVud2luZDoge1xuICAgICAgICAgIHBhdGg6ICckcmVzdWx0JyxcbiAgICAgICAgICBwcmVzZXJ2ZU51bGxBbmRFbXB0eUFycmF5czogZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgJG1hdGNoOiB7XG4gICAgICAgICAgJ3Jlc3VsdC5jcmVhdGVkQXQnOiB7XG4gICAgICAgICAgICAkZ3RlOiBjb252ZXJ0ZWRTdGFydERhdGUsXG4gICAgICAgICAgICAkbHRlOiBjb252ZXJ0ZWRFbmREYXRlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICAkdW53aW5kOiB7XG4gICAgICAgICAgcGF0aDogJyRyZXN1bHQuZGF0YVNldCcsXG4gICAgICAgICAgcHJlc2VydmVOdWxsQW5kRW1wdHlBcnJheXM6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgICRhZGRGaWVsZHM6IHtcbiAgICAgICAgICBjcmVhdGVkQXQ6ICckcmVzdWx0LmNyZWF0ZWRBdCcsXG4gICAgICAgICAgZ3Jvd3RoOiAnJHJlc3VsdC5kYXRhU2V0Lmdyb3d0aCcsXG4gICAgICAgICAgdW5pdDogJyRyZXN1bHQuZGF0YVNldC51bml0J1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICAkcHJvamVjdDoge1xuICAgICAgICAgIF9pZDogMCxcbiAgICAgICAgICByZXN1bHQ6IDBcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgJG1hdGNoOiB7XG4gICAgICAgICAgJG9yOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHN5c3RlbUlEOiAhYm90aEFyZU51bGwgPyBuZXcgT2JqZWN0SWQoc3lzdGVtSUQpIDogeyAkbmU6IG51bGwgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY3VzdG9tZXJJRDogIWJvdGhBcmVOdWxsXG4gICAgICAgICAgICAgICAgPyBuZXcgT2JqZWN0SWQoY3VzdG9tZXJJRClcbiAgICAgICAgICAgICAgICA6IHsgJG5lOiBudWxsIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgICRwcm9qZWN0OiB7XG4gICAgICAgICAgX2lkOiAwLFxuICAgICAgICAgIHJlc3VsdDogMCxcbiAgICAgICAgICBzeXN0ZW1JRDogMCxcbiAgICAgICAgICBjdXN0b21lcklEOiAwXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBdKTtcbiAgICBpZiAoc3RhdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcbiAgICAgICAgc3RhdHVzQ29kZTogMjA0LFxuICAgICAgICBlcnI6IHsgbWVzc2FnZTogJ05vIGRhdGEgY2FuIGJlIGZvdW5kJyB9XG4gICAgICB9O1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSBzdGF0cy5tYXAoKGl0ZW0pID0+IGNvbnZlcnRUb01iKGl0ZW0pKTtcbiAgICByZXR1cm4geyBkYXRhOiByZXN1bHQsIHN0YXR1czogJ3N1Y2Nlc3MnLCBzdGF0dXNDb2RlOiAyMDAgfTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIHsgZXJyLCBzdGF0dXM6ICdlcnJvcicsIHN0YXR1c0NvZGU6IDQwMCB9O1xuICB9XG59O1xuIl19