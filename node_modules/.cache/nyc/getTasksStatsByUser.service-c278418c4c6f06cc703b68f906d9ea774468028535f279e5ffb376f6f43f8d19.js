function cov_91zngje7l(){var path="/home/azer/Desktop/jenkins/app/monitoringApp/services/statistics/getTasksStatsByUser.service.js";var hash="573ffd233fe54a76b14b48efa219cb509b292959";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/azer/Desktop/jenkins/app/monitoringApp/services/statistics/getTasksStatsByUser.service.js",statementMap:{"0":{start:{line:1,column:13},end:{line:1,column:41}},"1":{start:{line:2,column:17},end:{line:2,column:44}},"2":{start:{line:3,column:15},end:{line:3,column:41}},"3":{start:{line:4,column:14},end:{line:4,column:42}},"4":{start:{line:6,column:0},end:{line:189,column:2}},"5":{start:{line:7,column:22},end:{line:7,column:62}},"6":{start:{line:8,column:2},end:{line:188,column:3}},"7":{start:{line:9,column:31},end:{line:9,column:97}},"8":{start:{line:10,column:29},end:{line:10,column:93}},"9":{start:{line:12,column:19},end:{line:177,column:6}},"10":{start:{line:178,column:4},end:{line:184,column:5}},"11":{start:{line:179,column:6},end:{line:183,column:8}},"12":{start:{line:185,column:4},end:{line:185,column:67}},"13":{start:{line:187,column:4},end:{line:187,column:53}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:17},end:{line:6,column:18}},loc:{start:{line:6,column:87},end:{line:189,column:1}},line:6}},branchMap:{"0":{loc:{start:{line:7,column:22},end:{line:7,column:62}},type:"binary-expr",locations:[{start:{line:7,column:22},end:{line:7,column:41}},{start:{line:7,column:45},end:{line:7,column:62}}],line:7},"1":{loc:{start:{line:59,column:24},end:{line:59,column:77}},type:"cond-expr",locations:[{start:{line:59,column:39},end:{line:59,column:61}},{start:{line:59,column:64},end:{line:59,column:77}}],line:59},"2":{loc:{start:{line:62,column:26},end:{line:64,column:31}},type:"cond-expr",locations:[{start:{line:63,column:18},end:{line:63,column:42}},{start:{line:64,column:18},end:{line:64,column:31}}],line:62},"3":{loc:{start:{line:178,column:4},end:{line:184,column:5}},type:"if",locations:[{start:{line:178,column:4},end:{line:184,column:5}},{start:{line:178,column:4},end:{line:184,column:5}}],line:178}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"573ffd233fe54a76b14b48efa219cb509b292959"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_91zngje7l=function(){return actualCoverage;};}return actualCoverage;}cov_91zngje7l();const Task=(cov_91zngje7l().s[0]++,require('../../models/Task'));const ObjectId=(cov_91zngje7l().s[1]++,require('mongodb').ObjectId);const moment=(cov_91zngje7l().s[2]++,require('moment-timezone'));const toUtc=(cov_91zngje7l().s[3]++,require('../../utils/toUTC'));cov_91zngje7l().s[4]++;module.exports=async(UserID,startDate,endDate,customerID,systemID,timeZone)=>{cov_91zngje7l().f[0]++;const bothAreNull=(cov_91zngje7l().s[5]++,(cov_91zngje7l().b[0][0]++,customerID===null)&&(cov_91zngje7l().b[0][1]++,systemID===null));cov_91zngje7l().s[6]++;try{const convertedStartDate=(cov_91zngje7l().s[7]++,new Date(toUtc(moment(startDate).tz(timeZone).format(),timeZone)));const convertedEndDate=(cov_91zngje7l().s[8]++,new Date(toUtc(moment(endDate).tz(timeZone).format(),timeZone)));const result=(cov_91zngje7l().s[9]++,await Task.aggregate([{$match:{assignee:new ObjectId(UserID),updatedAt:{$gte:convertedStartDate,$lte:convertedEndDate}}},{$lookup:{from:'systems',localField:'system',foreignField:'_id',as:'system'}},{$unwind:{path:'$system'}},{$project:{state:1,'system.customer':1,'system._id':1,createdAt:1,updatedAt:1}},{$addFields:{systemID:'$system._id',customerID:'$system.customer'}},{$project:{system:0}},{$match:{$or:[{systemID:!bothAreNull?(cov_91zngje7l().b[1][0]++,new ObjectId(systemID)):(cov_91zngje7l().b[1][1]++,{$ne:null})},{customerID:!bothAreNull?(cov_91zngje7l().b[2][0]++,new ObjectId(customerID)):(cov_91zngje7l().b[2][1]++,{$ne:null})}]}},{$project:{systemID:0,customerID:0}},{$set:{'item.state':'$state','item.createdAt':'$createdAt','item.updatedAt':'$updatedAt'}},{$group:{_id:'',tasks:{$push:'$item'},totalAffected:{$sum:1},Pending:{$sum:{$cond:[{$eq:['$state','Pending']},1,0]}},Rejected:{$sum:{$cond:[{$eq:['$state','Pending']},1,0]}},In_progress:{$sum:{$cond:[{$eq:['$state','Pending']},1,0]}},Canceled:{$sum:{$cond:[{$eq:['$state','Canceled']},1,0]}},Done:{$sum:{$cond:[{$eq:['$state','Done']},1,0]}},Completed:{$sum:{$cond:[{$eq:['$state','Completed']},1,0]}}}},{$set:{'stats.totalAffected':'$totalAffected','stats.Pending':'$Pending','stats.Rejected':'$Rejected','stats.In_progress':'$In_progress','stats.Canceled':'$Canceled','stats.Done':'$Done','stats.Completed':'$Completed'}},{$project:{_id:0,tasks:1,stats:1}}]));cov_91zngje7l().s[10]++;if(result.length===0){cov_91zngje7l().b[3][0]++;cov_91zngje7l().s[11]++;return{status:'success',statusCode:204,err:{message:'No data can be found'}};}else{cov_91zngje7l().b[3][1]++;}cov_91zngje7l().s[12]++;return{data:result[0],status:'success',statusCode:200};}catch(err){cov_91zngje7l().s[13]++;return{err,status:'error',statusCode:400};}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldFRhc2tzU3RhdHNCeVVzZXIuc2VydmljZS5qcyJdLCJuYW1lcyI6WyJUYXNrIiwicmVxdWlyZSIsIk9iamVjdElkIiwibW9tZW50IiwidG9VdGMiLCJtb2R1bGUiLCJleHBvcnRzIiwiVXNlcklEIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsImN1c3RvbWVySUQiLCJzeXN0ZW1JRCIsInRpbWVab25lIiwiYm90aEFyZU51bGwiLCJjb252ZXJ0ZWRTdGFydERhdGUiLCJEYXRlIiwidHoiLCJmb3JtYXQiLCJjb252ZXJ0ZWRFbmREYXRlIiwicmVzdWx0IiwiYWdncmVnYXRlIiwiJG1hdGNoIiwiYXNzaWduZWUiLCJ1cGRhdGVkQXQiLCIkZ3RlIiwiJGx0ZSIsIiRsb29rdXAiLCJmcm9tIiwibG9jYWxGaWVsZCIsImZvcmVpZ25GaWVsZCIsImFzIiwiJHVud2luZCIsInBhdGgiLCIkcHJvamVjdCIsInN0YXRlIiwiY3JlYXRlZEF0IiwiJGFkZEZpZWxkcyIsInN5c3RlbSIsIiRvciIsIiRuZSIsIiRzZXQiLCIkZ3JvdXAiLCJfaWQiLCJ0YXNrcyIsIiRwdXNoIiwidG90YWxBZmZlY3RlZCIsIiRzdW0iLCJQZW5kaW5nIiwiJGNvbmQiLCIkZXEiLCJSZWplY3RlZCIsIkluX3Byb2dyZXNzIiwiQ2FuY2VsZWQiLCJEb25lIiwiQ29tcGxldGVkIiwic3RhdHMiLCJsZW5ndGgiLCJzdGF0dXMiLCJzdGF0dXNDb2RlIiwiZXJyIiwibWVzc2FnZSIsImRhdGEiXSwibWFwcGluZ3MiOiJvK0VBZVk7eUZBZlosS0FBTUEsQ0FBQUEsSUFBSSx5QkFBR0MsT0FBTyxDQUFDLG1CQUFELENBQVYsQ0FBVixDQUNBLEtBQU1DLENBQUFBLFFBQVEseUJBQUdELE9BQU8sQ0FBQyxTQUFELENBQVAsQ0FBbUJDLFFBQXRCLENBQWQsQ0FDQSxLQUFNQyxDQUFBQSxNQUFNLHlCQUFHRixPQUFPLENBQUMsaUJBQUQsQ0FBVixDQUFaLENBQ0EsS0FBTUcsQ0FBQUEsS0FBSyx5QkFBR0gs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QkFBcUIsY0FKakIsQ0FLSixpQkFBa0IsV0FMZCxDQU1KLGFBQWMsT0FOVixDQU9KLGtCQUFtQixZQVBmLENBRFIsQ0FuSmtDLENBOEpsQyxDQUNFUCxRQUFRLENBQUUsQ0FDUlMsR0FBRyxDQUFFLENBREcsQ0FFUkMsS0FBSyxDQUFFLENBRkMsQ0FHUlksS0FBSyxDQUFFLENBSEMsQ0FEWixDQTlKa0MsQ0FBZixDQUFULENBQVosQ0FKRSx3QkEwS0YsR0FBSXBDLE1BQU0sQ0FBQ3FDLE1BQVAsR0FBa0IsQ0FBdEIsQ0FBeUIsbURBQ3ZCLE1BQU8sQ0FDTEMsTUFBTSxDQUFFLFNBREgsQ0FFTEMsVUFBVSxDQUFFLEdBRlAsQ0FHTEMsR0FBRyxDQUFFLENBQUVDLE9BQU8sQ0FBRSxzQkFBWCxDQUhBLENBQVAsQ0FLRCxDQU5ELGdDQTFLRSx3QkFpTEYsTUFBTyxDQUFFQyxJQUFJLENBQUUxQyxNQUFNLENBQUMsQ0FBRCxDQUFkLENBQW1Cc0MsTUFBTSxDQUFFLFNBQTNCLENBQXNDQyxVQUFVLENBQUUsR0FBbEQsQ0FBUCxDQUNELENBQUMsTUFBT0MsR0FBUCxDQUFZLHlCQUNaLE1BQU8sQ0FBRUEsR0FBRixDQUFPRixNQUFNLENBQUUsT0FBZixDQUF3QkMsVUFBVSxDQUFFLEdBQXBDLENBQVAsQ0FDRCxDQUNGLENBdkxEIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgVGFzayA9IHJlcXVpcmUoJy4uLy4uL21vZGVscy9UYXNrJyk7XG5jb25zdCBPYmplY3RJZCA9IHJlcXVpcmUoJ21vbmdvZGInKS5PYmplY3RJZDtcbmNvbnN0IG1vbWVudCA9IHJlcXVpcmUoJ21vbWVudC10aW1lem9uZScpO1xuY29uc3QgdG9VdGMgPSByZXF1aXJlKCcuLi8uLi91dGlscy90b1VUQycpXG5cbm1vZHVsZS5leHBvcnRzID0gYXN5bmMgKFVzZXJJRCwgc3RhcnREYXRlLCBlbmREYXRlLCBjdXN0b21lcklELCBzeXN0ZW1JRCwgdGltZVpvbmUpID0+IHtcbiAgY29uc3QgYm90aEFyZU51bGwgPSBjdXN0b21lcklEID09PSBudWxsICYmIHN5c3RlbUlEID09PSBudWxsO1xuICB0cnkge1xuICAgIGNvbnN0IGNvbnZlcnRlZFN0YXJ0RGF0ZSA9IG5ldyBEYXRlKHRvVXRjKG1vbWVudChzdGFydERhdGUpLnR6KHRpbWVab25lKS5mb3JtYXQoKSwgdGltZVpvbmUpKTtcbiAgICBjb25zdCBjb252ZXJ0ZWRFbmREYXRlID0gbmV3IERhdGUodG9VdGMobW9tZW50KGVuZERhdGUpLnR6KHRpbWVab25lKS5mb3JtYXQoKSwgdGltZVpvbmUpKTtcblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFRhc2suYWdncmVnYXRlKFtcbiAgICAgIHtcbiAgICAgICAgJG1hdGNoOiB7XG4gICAgICAgICAgYXNzaWduZWU6IG5ldyBPYmplY3RJZChVc2VySUQpLFxuICAgICAgICAgIHVwZGF0ZWRBdDoge1xuICAgICAgICAgICAgJGd0ZTogY29udmVydGVkU3RhcnREYXRlLFxuICAgICAgICAgICAgJGx0ZTogY29udmVydGVkRW5kRGF0ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgJGxvb2t1cDoge1xuICAgICAgICAgIGZyb206ICdzeXN0ZW1zJyxcbiAgICAgICAgICBsb2NhbEZpZWxkOiAnc3lzdGVtJyxcbiAgICAgICAgICBmb3JlaWduRmllbGQ6ICdfaWQnLFxuICAgICAgICAgIGFzOiAnc3lzdGVtJ1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICAkdW53aW5kOiB7XG4gICAgICAgICAgcGF0aDogJyRzeXN0ZW0nXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgICRwcm9qZWN0OiB7XG4gICAgICAgICAgc3RhdGU6IDEsXG4gICAgICAgICAgJ3N5c3RlbS5jdXN0b21lcic6IDEsXG4gICAgICAgICAgJ3N5c3RlbS5faWQnOiAxLFxuICAgICAgICAgIGNyZWF0ZWRBdDogMSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IDFcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgJGFkZEZpZWxkczoge1xuICAgICAgICAgIHN5c3RlbUlEOiAnJHN5c3RlbS5faWQnLFxuICAgICAgICAgIGN1c3RvbWVySUQ6ICckc3lzdGVtLmN1c3RvbWVyJ1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICAkcHJvamVjdDoge1xuICAgICAgICAgIHN5c3RlbTogMFxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICAkbWF0Y2g6IHtcbiAgICAgICAgICAkb3I6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc3lzdGVtSUQ6ICFib3RoQXJlTnVsbCA/IG5ldyBPYmplY3RJZChzeXN0ZW1JRCkgOiB7ICRuZTogbnVsbCB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBjdXN0b21lcklEOiAhYm90aEFyZU51bGxcbiAgICAgICAgICAgICAgICA/IG5ldyBPYmplY3RJZChjdXN0b21lcklEKVxuICAgICAgICAgICAgICAgIDogeyAkbmU6IG51bGwgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgJHByb2plY3Q6IHtcbiAgICAgICAgICBzeXN0ZW1JRDogMCxcbiAgICAgICAgICBjdXN0b21lcklEOiAwXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgICRzZXQ6IHtcbiAgICAgICAgICAnaXRlbS5zdGF0ZSc6ICckc3RhdGUnLFxuICAgICAgICAgICdpdGVtLmNyZWF0ZWRBdCc6ICckY3JlYXRlZEF0JyxcbiAgICAgICAgICAnaXRlbS51cGRhdGVkQXQnOiAnJHVwZGF0ZWRBdCdcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgJGdyb3VwOiB7XG4gICAgICAgICAgX2lkOiAnJyxcbiAgICAgICAgICB0YXNrczoge1xuICAgICAgICAgICAgJHB1c2g6ICckaXRlbSdcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRvdGFsQWZmZWN0ZWQ6IHtcbiAgICAgICAgICAgICRzdW06IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIFBlbmRpbmc6IHtcbiAgICAgICAgICAgICRzdW06IHtcbiAgICAgICAgICAgICAgJGNvbmQ6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAkZXE6IFsnJHN0YXRlJywgJ1BlbmRpbmcnXVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgMSxcbiAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIFJlamVjdGVkOiB7XG4gICAgICAgICAgICAkc3VtOiB7XG4gICAgICAgICAgICAgICRjb25kOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgJGVxOiBbJyRzdGF0ZScsICdQZW5kaW5nJ11cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIDEsXG4gICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBJbl9wcm9ncmVzczoge1xuICAgICAgICAgICAgJHN1bToge1xuICAgICAgICAgICAgICAkY29uZDogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICRlcTogWyckc3RhdGUnLCAnUGVuZGluZyddXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAxLFxuICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgQ2FuY2VsZWQ6IHtcbiAgICAgICAgICAgICRzdW06IHtcbiAgICAgICAgICAgICAgJGNvbmQ6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAkZXE6IFsnJHN0YXRlJywgJ0NhbmNlbGVkJ11cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIDEsXG4gICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBEb25lOiB7XG4gICAgICAgICAgICAkc3VtOiB7XG4gICAgICAgICAgICAgICRjb25kOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgJGVxOiBbJyRzdGF0ZScsICdEb25lJ11cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIDEsXG4gICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBDb21wbGV0ZWQ6IHtcbiAgICAgICAgICAgICRzdW06IHtcbiAgICAgICAgICAgICAgJGNvbmQ6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAkZXE6IFsnJHN0YXRlJywgJ0NvbXBsZXRlZCddXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAxLFxuICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgJHNldDoge1xuICAgICAgICAgICdzdGF0cy50b3RhbEFmZmVjdGVkJzogJyR0b3RhbEFmZmVjdGVkJyxcbiAgICAgICAgICAnc3RhdHMuUGVuZGluZyc6ICckUGVuZGluZycsXG4gICAgICAgICAgJ3N0YXRzLlJlamVjdGVkJzogJyRSZWplY3RlZCcsXG4gICAgICAgICAgJ3N0YXRzLkluX3Byb2dyZXNzJzogJyRJbl9wcm9ncmVzcycsXG4gICAgICAgICAgJ3N0YXRzLkNhbmNlbGVkJzogJyRDYW5jZWxlZCcsXG4gICAgICAgICAgJ3N0YXRzLkRvbmUnOiAnJERvbmUnLFxuICAgICAgICAgICdzdGF0cy5Db21wbGV0ZWQnOiAnJENvbXBsZXRlZCdcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgJHByb2plY3Q6IHtcbiAgICAgICAgICBfaWQ6IDAsXG4gICAgICAgICAgdGFza3M6IDEsXG4gICAgICAgICAgc3RhdHM6IDFcbiAgICAgICAgfVxuICAgICAgfVxuICAgIF0pO1xuICAgIGlmIChyZXN1bHQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcbiAgICAgICAgc3RhdHVzQ29kZTogMjA0LFxuICAgICAgICBlcnI6IHsgbWVzc2FnZTogJ05vIGRhdGEgY2FuIGJlIGZvdW5kJyB9XG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4geyBkYXRhOiByZXN1bHRbMF0sIHN0YXR1czogJ3N1Y2Nlc3MnLCBzdGF0dXNDb2RlOiAyMDAgfTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIHsgZXJyLCBzdGF0dXM6ICdlcnJvcicsIHN0YXR1c0NvZGU6IDQwMCB9O1xuICB9XG59O1xuIl19