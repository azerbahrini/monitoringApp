function cov_1l27t0rszj(){var path="/home/azer/Desktop/jenkins/app/monitoringApp/services/task/getTaskHighlights.js";var hash="72130f2f44109d1cec3f1f113989cfe123f8cf6b";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/azer/Desktop/jenkins/app/monitoringApp/services/task/getTaskHighlights.js",statementMap:{"0":{start:{line:1,column:17},end:{line:1,column:36}},"1":{start:{line:2,column:13},end:{line:2,column:41}},"2":{start:{line:3,column:15},end:{line:3,column:32}},"3":{start:{line:4,column:0},end:{line:66,column:2}},"4":{start:{line:9,column:2},end:{line:65,column:3}},"5":{start:{line:10,column:18},end:{line:41,column:5}},"6":{start:{line:42,column:18},end:{line:59,column:6}},"7":{start:{line:60,column:25},end:{line:60,column:82}},"8":{start:{line:60,column:49},end:{line:60,column:76}},"9":{start:{line:62,column:4},end:{line:62,column:53}},"10":{start:{line:64,column:4},end:{line:64,column:36}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:4,column:17},end:{line:4,column:18}},loc:{start:{line:8,column:5},end:{line:66,column:1}},line:8},"1":{name:"(anonymous_1)",decl:{start:{line:60,column:38},end:{line:60,column:39}},loc:{start:{line:60,column:49},end:{line:60,column:76}},line:60}},branchMap:{"0":{loc:{start:{line:10,column:18},end:{line:41,column:5}},type:"cond-expr",locations:[{start:{line:11,column:4},end:{line:27,column:5}},{start:{line:28,column:4},end:{line:41,column:5}}],line:10}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},f:{"0":0,"1":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"72130f2f44109d1cec3f1f113989cfe123f8cf6b"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1l27t0rszj=function(){return actualCoverage;};}return actualCoverage;}cov_1l27t0rszj();const mongoose=(cov_1l27t0rszj().s[0]++,require("mongoose"));const Task=(cov_1l27t0rszj().s[1]++,require("../../models/Task"));const moment=(cov_1l27t0rszj().s[2]++,require('moment'));cov_1l27t0rszj().s[3]++;module.exports=async(userId,startDate,endDate)=>{cov_1l27t0rszj().f[0]++;cov_1l27t0rszj().s[4]++;try{const match=(cov_1l27t0rszj().s[5]++,userId?(cov_1l27t0rszj().b[0][0]++,{$and:[{estimatedStart:{$lte:new Date(moment(endDate).utc())}},{estimatedStart:{$gte:new Date(moment(startDate).utc())}},{assignee:mongoose.Types.ObjectId(userId)}]}):(cov_1l27t0rszj().b[0][1]++,{$and:[{estimatedStart:{$lte:new Date(moment(endDate).utc())}},{estimatedStart:{$gte:new Date(moment(startDate).utc())}}]}));const tasks=(cov_1l27t0rszj().s[6]++,await Task.aggregate([{$match:match},{$group:{_id:{state:"$state"},count:{$sum:1}}},{$project:{_id:0,state:'$_id.state',count:'$count'}}]));const countsObject=(cov_1l27t0rszj().s[7]++,tasks.reduce((a,v)=>{cov_1l27t0rszj().f[1]++;cov_1l27t0rszj().s[8]++;return{...a,[v.state]:v.count};},{}));cov_1l27t0rszj().s[9]++;return{data:countsObject,status:"success"};}catch(err){cov_1l27t0rszj().s[10]++;return{err,status:"error"};}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldFRhc2tIaWdobGlnaHRzLmpzIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwicmVxdWlyZSIsIlRhc2siLCJtb21lbnQiLCJtb2R1bGUiLCJleHBvcnRzIiwidXNlcklkIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsIm1hdGNoIiwiJGFuZCIsImVzdGltYXRlZFN0YXJ0IiwiJGx0ZSIsIkRhdGUiLCJ1dGMiLCIkZ3RlIiwiYXNzaWduZWUiLCJUeXBlcyIsIk9iamVjdElkIiwidGFza3MiLCJhZ2dyZWdhdGUiLCIkbWF0Y2giLCIkZ3JvdXAiLCJfaWQiLCJzdGF0ZSIsImNvdW50IiwiJHN1bSIsIiRwcm9qZWN0IiwiY291bnRzT2JqZWN0IiwicmVkdWNlIiwiYSIsInYiLCJkYXRhIiwic3RhdHVzIiwiZXJyIl0sIm1hcHBpbmdzIjoia3lEQWVZOzJGQWZaLEtBQU1BLENBQUFBLFFBQVEsMEJBQUdDLE9BQU8sQ0FBQyxVQUFELENBQVYsQ0FBZCxDQUNBLEtBQU1DLENBQUFBLElBQUksMEJBQUdELE9BQU8sQ0FBQyxtQkFBRCxDQUFWLENBQVYsQ0FDQSxLQUFNRSxDQUFBQSxNQUFNLDBCQUFHRixPQUFPLENBQUMsUUFBRCxDQUFWLENBQVosQyx3QkFDQUcsTUFBTSxDQUFDQyxPQUFQLENBQWlCLE1BQ2ZDLE1BRGUsQ0FFZkMsU0FGZSxDQUdmQyxPQUhlLEdBSVosaURBQ0gsR0FBSSxDQUNGLEtBQU1DLENBQUFBLEtBQUssMEJBQUdILE1BQU0sNkJBQ3BCLENBQ0VJLElBQUksQ0FBRSxDQUNKLENBQ0VDLGNBQWMsQ0FBRSxDQUNkQyxJQUFJLENBQUUsR0FBSUMsQ0FBQUEsSUFBSixDQUFTVixNQUFNLENBQUNLLE9BQUQsQ0FBTixDQUFnQk0sR0FBaEIsRUFBVCxDQURRLENBRGxCLENBREksQ0FNSixDQUNFSCxjQUFjLENBQUUsQ0FDZEksSUFBSSxDQUFFLEdBQUlGLENBQUFBLElBQUosQ0FBU1YsTUFBTSxDQUFDSSxTQUFELENBQU4sQ0FBa0JPLEdBQWxCLEVBQVQsQ0FEUSxDQURsQixDQU5JLENBV0osQ0FDRUUsUUFBUSxDQUFFaEIsUUFBUSxDQUFDaUIsS0FBVCxDQUFlQyxRQUFmLENBQXdCWixNQUF4QixDQURaLENBWEksQ0FEUixDQURvQiw4QkFrQnBCLENBQ0VJLElBQUksQ0FBRSxDQUNKLENBQ0VDLGNBQWMsQ0FBRSxDQUNkQyxJQUFJLENBQUUsR0FBSUMsQ0FBQUEsSUFBSixDQUFTVixNQUFNLENBQUNLLE9BQUQsQ0FBTixDQUFnQk0sR0FBaEIsRUFBVCxDQURRLENBRGxCLENBREksQ0FNSixDQUNFSCxjQUFjLENBQUUsQ0FDZEksSUFBSSxDQUFFLEdBQUlGLENBQUFBLElBQUosQ0FBU1YsTUFBTSxDQUFDSSxTQUFELENBQU4sQ0FBa0JPLEdBQWxCLEVBQVQsQ0FEUSxDQURsQixDQU5JLENBRFIsQ0FsQm9CLENBQVQsQ0FBWCxDQWdDQSxLQUFNSyxDQUFBQSxLQUFLLDBCQUFHLEtBQU1qQixDQUFBQSxJQUFJLENBQUNrQixTQUFMLENBQWUsQ0FDakMsQ0FDRUMsTUFBTSxDQUFFWixLQURWLENBRGlDLENBSWpDLENBQ0VhLE1BQU0sQ0FBRSxDQUNOQyxHQUFHLENBQUUsQ0FBRUMsS0FBSyxDQUFFLFFBQVQsQ0FEQyxDQUVOQyxLQUFLLENBQUUsQ0FBRUMsSUFBSSxDQUFFLENBQVIsQ0FGRCxDQURWLENBSmlDLENBVWpDLENBQ0VDLFFBQVEsQ0FBRSxDQUNSSixHQUFHLENBQUUsQ0FERyxDQUVSQyxLQUFLLENBQUUsWUFGQyxDQUdSQyxLQUFLLENBQUUsUUFIQyxDQURaLENBVmlDLENBQWYsQ0FBVCxDQUFYLENBa0JBLEtBQU1HLENBQUFBLFlBQVksMEJBQUdULEtBQUssQ0FBQ1UsTUFBTixDQUFhLENBQUNDLENBQUQsQ0FBSUMsQ0FBSixHQUFXLHdEQUFFLEdBQUdELENBQUwsQ0FBUSxDQUFDQyxDQUFDLENBQUNQLEtBQUgsRUFBV08sQ0FBQyxDQUFDTixLQUFyQixFQUEyQixDQUFuRCxDQUFzRCxFQUF0RCxDQUFILENBQWxCLENBbkRFLHdCQXFERixNQUFPLENBQUVPLElBQUksQ0FBRUosWUFBUixDQUFzQkssTUFBTSxDQUFFLFNBQTlCLENBQVAsQ0FDRCxDQUFDLE1BQU9DLEdBQVAsQ0FBWSwwQkFDWixNQUFPLENBQUVBLEdBQUYsQ0FBT0QsTUFBTSxDQUFFLE9BQWYsQ0FBUCxDQUNELENBQ0YsQ0E5REQiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb25nb29zZSA9IHJlcXVpcmUoXCJtb25nb29zZVwiKTtcbmNvbnN0IFRhc2sgPSByZXF1aXJlKFwiLi4vLi4vbW9kZWxzL1Rhc2tcIik7XG5jb25zdCBtb21lbnQgPSByZXF1aXJlKCdtb21lbnQnKTtcbm1vZHVsZS5leHBvcnRzID0gYXN5bmMgKFxuICB1c2VySWQsXG4gIHN0YXJ0RGF0ZSxcbiAgZW5kRGF0ZVxuKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgbWF0Y2ggPSB1c2VySWQ/XG4gICAge1xuICAgICAgJGFuZDogW1xuICAgICAgICB7XG4gICAgICAgICAgZXN0aW1hdGVkU3RhcnQ6IHtcbiAgICAgICAgICAgICRsdGU6IG5ldyBEYXRlKG1vbWVudChlbmREYXRlKS51dGMoKSksXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGVzdGltYXRlZFN0YXJ0OiB7XG4gICAgICAgICAgICAkZ3RlOiBuZXcgRGF0ZShtb21lbnQoc3RhcnREYXRlKS51dGMoKSksXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGFzc2lnbmVlOiBtb25nb29zZS5UeXBlcy5PYmplY3RJZCh1c2VySWQpXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9OlxuICAgIHtcbiAgICAgICRhbmQ6IFtcbiAgICAgICAge1xuICAgICAgICAgIGVzdGltYXRlZFN0YXJ0OiB7XG4gICAgICAgICAgICAkbHRlOiBuZXcgRGF0ZShtb21lbnQoZW5kRGF0ZSkudXRjKCkpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBlc3RpbWF0ZWRTdGFydDoge1xuICAgICAgICAgICAgJGd0ZTogbmV3IERhdGUobW9tZW50KHN0YXJ0RGF0ZSkudXRjKCkpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9XG4gICAgY29uc3QgdGFza3MgPSBhd2FpdCBUYXNrLmFnZ3JlZ2F0ZShbXG4gICAgICB7XG4gICAgICAgICRtYXRjaDogbWF0Y2hcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgICRncm91cDoge1xuICAgICAgICAgIF9pZDogeyBzdGF0ZTogXCIkc3RhdGVcIiB9LFxuICAgICAgICAgIGNvdW50OiB7ICRzdW06IDEgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICAkcHJvamVjdDoge1xuICAgICAgICAgIF9pZDogMCxcbiAgICAgICAgICBzdGF0ZTogJyRfaWQuc3RhdGUnLFxuICAgICAgICAgIGNvdW50OiAnJGNvdW50J1xuICAgICAgICB9XG4gICAgICB9XG4gICAgXSk7XG4gICAgY29uc3QgY291bnRzT2JqZWN0ID0gdGFza3MucmVkdWNlKChhLCB2KSA9PiAoeyAuLi5hLCBbdi5zdGF0ZV06IHYuY291bnR9KSwge30pO1xuXG4gICAgcmV0dXJuIHsgZGF0YTogY291bnRzT2JqZWN0LCBzdGF0dXM6IFwic3VjY2Vzc1wiIH07XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiB7IGVyciwgc3RhdHVzOiBcImVycm9yXCIgfTtcbiAgfVxufTtcbiJdfQ==