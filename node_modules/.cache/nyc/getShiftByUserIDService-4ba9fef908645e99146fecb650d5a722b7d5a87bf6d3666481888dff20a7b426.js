function cov_ae6sjoj97(){var path="/home/azer/Desktop/jenkins/app/monitoringApp/services/shift/getShiftByUserIDService.js";var hash="413e4e83050cba3c84858951d1fb0984d951be71";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/azer/Desktop/jenkins/app/monitoringApp/services/shift/getShiftByUserIDService.js",statementMap:{"0":{start:{line:1,column:14},end:{line:1,column:43}},"1":{start:{line:2,column:15},end:{line:2,column:32}},"2":{start:{line:4,column:0},end:{line:39,column:2}},"3":{start:{line:5,column:2},end:{line:38,column:3}},"4":{start:{line:6,column:21},end:{line:6,column:44}},"5":{start:{line:7,column:22},end:{line:18,column:5}},"6":{start:{line:19,column:4},end:{line:21,column:5}},"7":{start:{line:20,column:6},end:{line:20,column:40}},"8":{start:{line:22,column:16},end:{line:22,column:46}},"9":{start:{line:24,column:4},end:{line:30,column:5}},"10":{start:{line:25,column:6},end:{line:29,column:8}},"11":{start:{line:32,column:4},end:{line:34,column:5}},"12":{start:{line:33,column:6},end:{line:33,column:63}},"13":{start:{line:35,column:4},end:{line:35,column:61}},"14":{start:{line:37,column:4},end:{line:37,column:36}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:4,column:17},end:{line:4,column:18}},loc:{start:{line:4,column:58},end:{line:39,column:1}},line:4}},branchMap:{"0":{loc:{start:{line:4,column:32},end:{line:4,column:53}},type:"default-arg",locations:[{start:{line:4,column:49},end:{line:4,column:53}}],line:4},"1":{loc:{start:{line:19,column:4},end:{line:21,column:5}},type:"if",locations:[{start:{line:19,column:4},end:{line:21,column:5}},{start:{line:19,column:4},end:{line:21,column:5}}],line:19},"2":{loc:{start:{line:24,column:4},end:{line:30,column:5}},type:"if",locations:[{start:{line:24,column:4},end:{line:30,column:5}},{start:{line:24,column:4},end:{line:30,column:5}}],line:24},"3":{loc:{start:{line:24,column:8},end:{line:24,column:32}},type:"binary-expr",locations:[{start:{line:24,column:8},end:{line:24,column:24}},{start:{line:24,column:28},end:{line:24,column:32}}],line:24},"4":{loc:{start:{line:32,column:4},end:{line:34,column:5}},type:"if",locations:[{start:{line:32,column:4},end:{line:34,column:5}},{start:{line:32,column:4},end:{line:34,column:5}}],line:32}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},f:{"0":0},b:{"0":[0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"413e4e83050cba3c84858951d1fb0984d951be71"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_ae6sjoj97=function(){return actualCoverage;};}return actualCoverage;}cov_ae6sjoj97();const Shift=(cov_ae6sjoj97().s[0]++,require('../../models/Shift'));const moment=(cov_ae6sjoj97().s[1]++,require('moment'));cov_ae6sjoj97().s[2]++;module.exports=async(userId,teamLeaderRoleID=(cov_ae6sjoj97().b[0][0]++,null))=>{cov_ae6sjoj97().f[0]++;cov_ae6sjoj97().s[3]++;try{const dateTime=(cov_ae6sjoj97().s[4]++,moment().utc().format());const findQuery=(cov_ae6sjoj97().s[5]++,{user:userId,type:'shift',$and:[{startDate:{$lte:moment().add(2,'hours').utc().format()}},{endDate:{$gte:dateTime}}]});cov_ae6sjoj97().s[6]++;if(teamLeaderRoleID!==null){cov_ae6sjoj97().b[1][0]++;cov_ae6sjoj97().s[7]++;findQuery.role=teamLeaderRoleID;}else{cov_ae6sjoj97().b[1][1]++;}const doc=(cov_ae6sjoj97().s[8]++,await Shift.findOne(findQuery));cov_ae6sjoj97().s[9]++;if((cov_ae6sjoj97().b[3][0]++,teamLeaderRoleID)&&(cov_ae6sjoj97().b[3][1]++,!doc)){cov_ae6sjoj97().b[2][0]++;cov_ae6sjoj97().s[10]++;return{err:{message:'You are not authorized'},status:'error',statusCode:203};}else{cov_ae6sjoj97().b[2][1]++;}cov_ae6sjoj97().s[11]++;if(!doc){cov_ae6sjoj97().b[4][0]++;cov_ae6sjoj97().s[12]++;return{data:doc,status:'success',statusCode:204};}else{cov_ae6sjoj97().b[4][1]++;}cov_ae6sjoj97().s[13]++;return{data:doc,status:'success',statusCode:200};}catch(err){cov_ae6sjoj97().s[14]++;return{err,status:'error'};}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldFNoaWZ0QnlVc2VySURTZXJ2aWNlLmpzIl0sIm5hbWVzIjpbIlNoaWZ0IiwicmVxdWlyZSIsIm1vbWVudCIsIm1vZHVsZSIsImV4cG9ydHMiLCJ1c2VySWQiLCJ0ZWFtTGVhZGVyUm9sZUlEIiwiZGF0ZVRpbWUiLCJ1dGMiLCJmb3JtYXQiLCJmaW5kUXVlcnkiLCJ1c2VyIiwidHlwZSIsIiRhbmQiLCJzdGFydERhdGUiLCIkbHRlIiwiYWRkIiwiZW5kRGF0ZSIsIiRndGUiLCJyb2xlIiwiZG9jIiwiZmluZE9uZSIsImVyciIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJzdGF0dXNDb2RlIiwiZGF0YSJdLCJtYXBwaW5ncyI6InFvRkFlWTt5RkFmWixLQUFNQSxDQUFBQSxLQUFLLHlCQUFHQyxPQUFPLENBQUMsb0JBQUQsQ0FBVixDQUFYLENBQ0EsS0FBTUMsQ0FBQUEsTUFBTSx5QkFBR0QsT0FBTyxDQUFDLFFBQUQsQ0FBVixDQUFaLEMsdUJBRUFFLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixNQUFPQyxNQUFQLENBQWVDLGdCQUFnQiw0QkFBQyxJQUFELENBQS9CLEdBQXlDLCtDQUN4RCxHQUFJLENBQ0YsS0FBTUMsQ0FBQUEsUUFBUSx5QkFBR0wsTUFBTSxHQUFHTSxHQUFULEdBQWVDLE1BQWYsRUFBSCxDQUFkLENBQ0EsS0FBTUMsQ0FBQUEsU0FBUyx5QkFBRyxDQUNoQkMsSUFBSSxDQUFFTixNQURVLENBRWhCTyxJQUFJLENBQUUsT0FGVSxDQUdoQkMsSUFBSSxDQUFFLENBQ0osQ0FDRUMsU0FBUyxDQUFFLENBQUVDLElBQUksQ0FBRWIsTUFBTSxHQUFHYyxHQUFULENBQWEsQ0FBYixDQUFnQixPQUFoQixFQUF5QlIsR0FBekIsR0FBK0JDLE1BQS9CLEVBQVIsQ0FEYixDQURJLENBSUosQ0FDRVEsT0FBTyxDQUFFLENBQUVDLElBQUksQ0FBRVgsUUFBUixDQURYLENBSkksQ0FIVSxDQUFILENBQWYsQ0FGRSx1QkFjRixHQUFJRCxnQkFBZ0IsR0FBSyxJQUF6QixDQUErQixrREFDN0JJLFNBQVMsQ0FBQ1MsSUFBVixDQUFpQmIsZ0JBQWpCLENBQ0QsQ0FGRCxnQ0FHQSxLQUFNYyxDQUFBQSxHQUFHLHlCQUFHLEtBQU1wQixDQUFBQSxLQUFLLENBQUNxQixPQUFOLENBQWNYLFNBQWQsQ0FBVCxDQUFULENBakJFLHVCQW1CRixHQUFJLDJCQUFBSixnQkFBZ0IsOEJBQUksQ0FBQ2MsR0FBTCxDQUFwQixDQUE4QixtREFDNUIsTUFBTyxDQUNMRSxHQUFHLENBQUUsQ0FBRUMsT0FBTyxDQUFFLHdCQUFYLENBREEsQ0FFTEMsTUFBTSxDQUFFLE9BRkgsQ0FHTEMsVUFBVSxDQUFFLEdBSFAsQ0FBUCxDQUtELENBTkQsZ0NBbkJFLHdCQTJCRixHQUFJLENBQUNMLEdBQUwsQ0FBVSxtREFDUixNQUFPLENBQUVNLElBQUksQ0FBRU4sR0FBUixDQUFhSSxNQUFNLENBQUUsU0FBckIsQ0FBZ0NDLFVBQVUsQ0FBRSxHQUE1QyxDQUFQLENBQ0QsQ0FGRCxnQ0EzQkUsd0JBOEJGLE1BQU8sQ0FBRUMsSUFBSSxDQUFFTixHQUFSLENBQWFJLE1BQU0sQ0FBRSxTQUFyQixDQUFnQ0MsVUFBVSxDQUFFLEdBQTVDLENBQVAsQ0FDRCxDQUFDLE1BQU9ILEdBQVAsQ0FBWSx5QkFDWixNQUFPLENBQUVBLEdBQUYsQ0FBT0UsTUFBTSxDQUFFLE9BQWYsQ0FBUCxDQUNELENBQ0YsQ0FuQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBTaGlmdCA9IHJlcXVpcmUoJy4uLy4uL21vZGVscy9TaGlmdCcpO1xuY29uc3QgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gYXN5bmMgKHVzZXJJZCwgdGVhbUxlYWRlclJvbGVJRD1udWxsKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgZGF0ZVRpbWUgPSBtb21lbnQoKS51dGMoKS5mb3JtYXQoKTtcbiAgICBjb25zdCBmaW5kUXVlcnkgPSB7XG4gICAgICB1c2VyOiB1c2VySWQsXG4gICAgICB0eXBlOiAnc2hpZnQnLFxuICAgICAgJGFuZDogW1xuICAgICAgICB7XG4gICAgICAgICAgc3RhcnREYXRlOiB7ICRsdGU6IG1vbWVudCgpLmFkZCgyLCAnaG91cnMnKS51dGMoKS5mb3JtYXQoKSB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBlbmREYXRlOiB7ICRndGU6IGRhdGVUaW1lIH1cbiAgICAgICAgfVxuICAgICAgXVxuICAgIH07XG4gICAgaWYgKHRlYW1MZWFkZXJSb2xlSUQgIT09IG51bGwpIHtcbiAgICAgIGZpbmRRdWVyeS5yb2xlID0gdGVhbUxlYWRlclJvbGVJRDtcbiAgICB9XG4gICAgY29uc3QgZG9jID0gYXdhaXQgU2hpZnQuZmluZE9uZShmaW5kUXVlcnkpO1xuXG4gICAgaWYgKHRlYW1MZWFkZXJSb2xlSUQgJiYgIWRvYykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZXJyOiB7IG1lc3NhZ2U6ICdZb3UgYXJlIG5vdCBhdXRob3JpemVkJyB9LFxuICAgICAgICBzdGF0dXM6ICdlcnJvcicsXG4gICAgICAgIHN0YXR1c0NvZGU6IDIwM1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAoIWRvYykge1xuICAgICAgcmV0dXJuIHsgZGF0YTogZG9jLCBzdGF0dXM6ICdzdWNjZXNzJywgc3RhdHVzQ29kZTogMjA0IH07XG4gICAgfVxuICAgIHJldHVybiB7IGRhdGE6IGRvYywgc3RhdHVzOiAnc3VjY2VzcycsIHN0YXR1c0NvZGU6IDIwMCB9O1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZXR1cm4geyBlcnIsIHN0YXR1czogJ2Vycm9yJyB9O1xuICB9XG59O1xuIl19